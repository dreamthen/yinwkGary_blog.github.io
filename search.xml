<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[è¶³çƒå›¢é˜Ÿå‰ç«¯ä»£ç reviewä¸Žè§„èŒƒ]]></title>
    <url>%2F2019%2F12%2F05%2F%E8%B6%B3%E7%90%83%E5%9B%A2%E9%98%9F%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81review%E4%B8%8E%E8%A7%84%E8%8C%83%2F</url>
    <content type="text"><![CDATA[ä¸€ã€Gitæäº¤æ³¨é‡Šéƒ¨åˆ†(git comment -m â€˜?â€™)ï¼Œå»ºè®®è§„èŒƒèµ·æ¥ã€‚ åŽŸå›  é¦–å…ˆæ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹å°±æ˜¯ï¼Œå½“å‡ºçŽ°ä»£ç åˆå¹¶å†²çªé—®é¢˜æˆ–è€…ä»£ç åˆå¹¶åˆæ¼çš„æƒ…å†µï¼Œå¯ä»¥æ ¹æ®æ³¨é‡Šæ¨¡æ¿æ ‡è¯†æ¥è¿›è¡ŒæŸ¥æ‰¾ï¼Œå…·ä½“çš„äººå…·ä½“çš„æäº¤ç‰ˆæœ¬å¯ä»¥ä¸€ç›®äº†ç„¶ï¼Œä¸å¿…æ‰“æ‰°å…¶ä»–ç›¸å…³çš„äººï¼›å…¶æ¬¡å°±æ˜¯åˆ†æ”¯å›žæ»šæ—¶ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹å‡ºå›žæ»šä½ç½®ï¼Œåšåˆ°å¾ˆä¾¿æ·çš„å›žæ»šï¼›æœ€åŽä¸€ç‚¹ï¼Œèƒ½æ¸…æ™°çš„ååº”å¼€å‘è€…è¿™ä¸€ä¸ªå‘¨éƒ½åšäº†ä»€ä¹ˆï¼Œæ›´åˆ©äºŽå¼€å‘è€…å›žé¡¾è¿™ä¸€ä¸ªå‘¨ä¸šåŠ¡æˆ–è€…æŠ€æœ¯å¼€å‘ï¼Œå†çŽ°å®žç‚¹å„¿çš„æ„ä¹‰å°±æ˜¯ä¾¿äºŽå†™å‘¨æŠ¥ï¼ŒðŸ˜„ ä¸ºæ­¤ï¼Œæˆ‘åœ¨æˆ‘ä»¬è¶³çƒä¸šåŠ¡ç»„å†…éƒ¨åˆ¶å®šäº†ä¸€å¥—æ³¨é‡Šè‰æ¡ˆï¼Œè¯·å¤§å®¶å»ºè®®ã€ææ„è§æˆ–è€…æŸ¥æ¼è¡¥ç¼º: 12345678910111213141516171819202122//æˆ‘ä»¬ä»¥type:descriptionå½¢å¼æ¥å†™æ³¨é‡Šï¼Œä¸­é—´çš„:è¡¨è¾¾çš„æ˜¯åœ¨æŸä¸€ç§ç±»åž‹ä¸‹ï¼Œæäº¤çš„æŸæŸæŸç‰ˆæœ¬æ³¨é‡Šå¼€å‘ä¸šåŠ¡ 'business:xxx'ä¿®æ”¹bug 'fix:xxx'ä¼˜åŒ– 'optimize:xxxâ€™è¿½åŠ æ–‡æ¡£ 'doc:xxx'ç”Ÿæ€æ­å»º 'build:xxxâ€™æ ·å¼ä¿®æ”¹ 'style:xxx'é‡å†™ 'rewrite:xxx'å•å…ƒæµ‹è¯• 'test:xxx'//è¿™é‡Œé¢æ˜¯æœ‰äº¤é›†å†²çªçš„ï¼Œæ¯”å¦‚: //å¦‚æžœåªæ”¹äº†æ ·å¼ï¼Œè€Œæ²¡æœ‰åŠ¨ä»»ä½•å…¶ä»–çš„é…ç½®ï¼Œé‚£å°±æ˜¯style:xxx//ä½†å¦‚æžœæ”¹äº†æ ·å¼åˆæ”¹äº†å…¶ä»–çš„éƒ¨åˆ†ï¼Œæ˜¯è¦æŒ‰ç…§å½“æ—¶ä¸šåŠ¡åœºæ™¯æ¥çœ‹çš„ï¼Œå¯èƒ½æ˜¯businessã€fixã€optimizeã€rewriteç­‰ç­‰//ä»¥æ­¤ç±»æŽ¨ï¼Œå°±æ˜¯å½“å•çº¯æ”¹äº†æŸä¸€ä¸ªåˆ†ç±»ï¼Œå°±æŒ‰ç…§åˆ†ç±»ç®—ï¼Œä½†å¦‚æžœæ”¹äº†ä¸åŒçš„åˆ†ç±»ï¼Œé‚£å°±æŒ‰ç…§ä¸šåŠ¡åœºæ™¯æ¥çœ‹ã€‚//æœ‰çš„å°ä¼™ä¼´è‹±è¯­ä¸å¥½ï¼Œå¤šå­¦å‡ ä¸ªå•è¯æ„Ÿè§‰è´¹åŠ²ï¼Œå’±ä¹Ÿæœ‰ä¸­æ–‡ç‰ˆ:å¼€å‘ä¸šåŠ¡ 'ä¸šåŠ¡:xxx'ä¿®æ”¹bug 'é—®é¢˜:xxx'ä¼˜åŒ– 'ä¼˜åŒ–:xxx'è¿½åŠ æ–‡æ¡£ 'æ–‡æ¡£:xxx'ç”Ÿæ€æ­å»º 'ç”Ÿæ€:xxx'æ ·å¼ä¿®æ”¹ 'æ ·å¼:xxx'é‡å†™ 'é‡å†™:xxx'å•å…ƒæµ‹è¯• 'æµ‹è¯•:xxx' äºŒã€Jenkinså‘å¸ƒç³»ç»Ÿæ­¥éª¤ åŽŸå›  ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªç³»ç»Ÿã€‚æˆ‘ä»¬çš„å‰ç«¯æ‰“åŒ…ä¹‹åŽçš„æ–‡ä»¶å®žé™…ä¸Šå°±æ˜¯ä¸€äº›é™æ€èµ„æºï¼Œå¼€å‘äººå‘˜æ¯ä¸€æ¬¡éƒ½è¦æ‰“åŒ…ï¼Œè€Œä¸”è¿˜è¦ä¸Šä¼ åˆ°gitlabä¸Šé¢ï¼Œé™æ€èµ„æºæ˜¯ä¸åº”è¯¥æ”¾åˆ°gitlabä»£ç ç®¡ç†åº“é‡Œé¢åŽ»çš„ï¼Œæœ‰äº†è¿™ä¸ªå‘å¸ƒç³»ç»Ÿï¼Œç›´æŽ¥äº¤ç»™æµç¨‹æœºå™¨äººè¿›è¡Œæ‰“åŒ…å¤„ç†ï¼Œå¹¶è‡ªåŠ¨å‘å¸ƒåˆ°SITã€STGå’ŒPRDçš„çŽ¯å¢ƒä¸Šé¢ï¼Œå‡å°‘äº†äººå·¥çš„æ‰“åŒ…ä»¥åŠæ‰‹åŠ¨æ‹‰åˆ°æœåŠ¡å™¨ä¸Šé¢çš„æ—¶é—´ï¼Œä¸”é™æ€èµ„æºä¹Ÿæ˜¯åˆ†å‘åˆ°OSSé™æ€èµ„æºæœåŠ¡å™¨ä¸Šé¢ï¼Œå¯è°“ç‰©å½’å…¶æ‰€åœ°ã€‚ æ­¥éª¤ æ‰“å¼€http://ticket.hupu.io/desk/è¿™ä¸ªå‘å¸ƒå·¥å•çš„ç³»ç»Ÿï¼Œå¦‚æžœæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®åº”ç”¨ï¼Œæ— è®ºæ˜¯åŽå°è¿˜æ˜¯å‰ç«¯ï¼Œé€‰æ‹©â€æ–°åº”ç”¨ç”³è¯·â€ï¼Œç”³è¯·ä¸€ä¸ªæ–°é¡¹ç›®åº”ç”¨ï¼Œç”³è¯·å°±ä¼šè€—ä¸€äº›æ—¶é—´ï¼Œè¿ç»´è€å¤§ä¼šå¯¹ä½ ç”³è¯·çš„è¿™ä¸ªåº”ç”¨æå‡ºæ„è§ï¼Œæ¯”å¦‚åº”ç”¨åå­—ç­‰ç­‰ï¼ŒæŒ‰ç…§è§„èŒƒæ”¹ï¼Œä¹‹åŽè¦æ‰¾ä¸åŒçš„äºº(çŽ‹èŠ‚çº¢(è¿ç»´è€å¤§)è·Ÿä»–è¯´ä½ è¿™ä¸ªåº”ç”¨çš„gitlabæ‰€åœ¨åœ°å€ç­‰ç­‰ç¡®è®¤ã€é‚°é¹(æ‹“æµ·CBAå®˜ç½‘çš„è¿ç»´è´Ÿè´£äºº)çš„ç¡®è®¤)ï¼Œæœ€åŽæ–°åº”ç”¨ä¸Šçº¿å®Œæˆã€‚ ä¹‹åŽï¼Œéœ€è¦è¿›è¡Œå‰ç«¯é…ç½®ï¼Œç”±äºŽOSSåªæ”¾htmlæ–‡ä»¶ï¼Œæ‰“åŒ…åŽçš„é™æ€æ–‡ä»¶ï¼ˆCSSã€JSç­‰ï¼‰ï¼Œéœ€è¦æ”¾å…¥W1æœåŠ¡å™¨ï¼ŒOSSä¸æ”¯æŒCDNåŠ é€Ÿï¼Œè€ŒW1æœåŠ¡å™¨å®žé™…ä¸Šå°±æ˜¯ä¸€ä¸ªCDNæœåŠ¡å™¨ï¼Œæ‰€ä»¥éœ€è¦é…ç½®webpackä¸­çš„publicPathï¼Œè®¿é—®é™æ€æ–‡ä»¶éœ€è¦ä½¿ç”¨w1çš„åŸŸåï¼Œè·¯å¾„ä¸º:http://w1.hoopchina.com.cn/games/static/é¡¹ç›®åã€‚ ç¼ºç‚¹ å½“ç„¶ä¹Ÿå­˜åœ¨æ¯”è¾ƒå¤šçš„ç¼ºç‚¹ï¼Œå’Œå‰ç«¯å°ä¼™ä¼´è®¨è®ºçš„è¿‡ç¨‹ä¸­ï¼Œå‘çŽ°è¿™ä¸ªå‘å¸ƒç³»ç»Ÿï¼Œåªèƒ½å•çº¿ç¨‹å‘å¸ƒï¼Œå¯¹äºŽå¤šçº¿ç¨‹æäº¤å·¥å•ï¼Œå¹¶ä¸æ”¯æŒï¼Œä¸”è¿›è¡Œæäº¤å·¥å•çš„åˆ†æ”¯å¿…é¡»ä¸ºreleaseï¼Œæ‰€ä»¥å½“å¤šäººé¡¹ç›®å‘å¸ƒä¸åŒçš„åŠŸèƒ½ç‚¹æ—¶ï¼Œç”±äºŽæäº¤çš„æ—¶é—´ç‚¹ä¸åŒï¼Œå½“ä¸€äººæäº¤ä¸ŠåŽ»ï¼Œå¦å¤–çš„å°ä¼™ä¼´å°±åªèƒ½ç­‰ç€ï¼Œç­‰å¾…è¿™äººçš„åŠŸèƒ½æµ‹è¯•å®Œå…¨ä¸Šçº¿ï¼Œæ‰å¯ä»¥æäº¤ç¬¬äºŒä¸ªå·¥å•ï¼Œè¿™æ ·æ•ˆçŽ‡å®žé™…ä¸Šæ˜¯å¤§å¤§é™ä½Žçš„ã€‚ ä¼˜åŒ–å»ºè®® å’Œå°ä¼™ä¼´å•†é‡ä¹‹åŽï¼Œå¸Œæœ›å‘å¸ƒå·¥å•ç³»ç»Ÿå¯ä»¥æ”¯æŒå¤šåˆ†æ”¯æäº¤å·¥å•ï¼Œä¸åªä¾èµ–äºŽreleaseåˆ†æ”¯ï¼Œå¯ä»¥é€‰æ‹©å¤šä¸ªåˆ†æ”¯å¹¶å…¥releaseåˆ†æ”¯ï¼Œæ—¢å¯ä»¥å‹¾é€‰å¹¶å…¥ï¼Œä¹Ÿå¯ä»¥æ¶ˆé™¤å‹¾é€‰ç§»é™¤ï¼Œå‘å¸ƒæ—¶ï¼Œå…ˆæ£€æµ‹æ˜¯å¦å­˜åœ¨å†²çªï¼Œè§£å†³å®Œå†²çªä¹‹åŽï¼Œå†å‘å¸ƒè‡³releaseï¼Œreleaseåˆ†æ”¯å‘è‡³sitå’ŒstgçŽ¯å¢ƒï¼Œå¾…æµ‹è¯•æµ‹å®Œä¹‹åŽï¼Œå†é€‰æ‹©prdå‘å¸ƒè‡³çº¿ä¸Šå¹¶åˆå…¥masteråˆ†æ”¯ï¼ˆæƒ³æ³•gitlabä¸Šçš„é¡¹ç›®é»˜è®¤æŽ¥å…¥ci/cdï¼Œå¯ä»¥æš´éœ²gitlabçš„èœå•é€‰é¡¹ï¼Œé’ˆå¯¹äºŽæŸä¸€ä¸ªé¡¹ç›®è‡ªå®šä¹‰è‡ªå·±çš„å‘å¸ƒå·¥å•ç³»ç»Ÿï¼‰ã€‚ ä¸‰ã€è¡¨å•æ ¡éªŒæ’ä»¶èƒ½åœ¨æˆ‘ä»¬ä¸šåŠ¡å‰ç«¯å†…ä½¿ç”¨ åŽŸå›  æŠ›å¼ƒä¹‹å‰çš„if elseå†—é•¿çš„åˆ¤æ–­é€»è¾‘ï¼Œå°†å…¶é›†æˆæ’ä»¶ä½¿ç”¨ï¼Œå‡å°‘é¡¹ç›®ä»£ç çš„å†—ä½™ï¼Œæé«˜è§„åˆ™æ’ä»¶çš„å¯å¤ç”¨æ€§ï¼Œæ­¤æ’ä»¶ç¬¦åˆè®¾è®¡æ¨¡å¼å•ä¸€èŒè´£ä»¥åŠå¼€æ”¾å°é—­çš„åŽŸåˆ™ï¼Œä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥ç¼–å†™ã€‚ åŽŸç† æ­¤æ’ä»¶æ˜¯ä»¥æ ¡éªŒè§„åˆ™ä¸ºåŸºåˆ™ï¼Œæ”¯æŒæ·»åŠ ä¸€æˆ–å¤šä¸ªæ ¡éªŒå˜é‡å¯¹åº”ä¸€æˆ–å¤šä¸ªæ ¡éªŒè§„åˆ™ï¼Œæ¥å®žçŽ°ä¸€å¯¹ä¸€ã€å¤šå¯¹ä¸€ã€ä¸€å¯¹å¤šå’Œå¤šå¯¹å¤šçš„æ ¡éªŒæ–¹å¼ï¼Œæ•°æ®ç±»åž‹æ”¯æŒæ•°ç»„æˆ–è€…æ˜¯å­—ç¬¦ä¸²ï¼Œæ ¡éªŒè§„åˆ™å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸”å¯¹å‡ºçŽ°å¼‚å¸¸æˆ–è€…é—®é¢˜æ—¶çš„æç¤ºè¯­ï¼Œä¹Ÿæ”¯æŒtype:æç¤ºå¼‚å¸¸è¯­çš„å½¢å¼æ¥å¼¹å‡ºæˆ–è€…é£žå…¥ç­‰è‡ªå®šä¹‰å½¢å¼æç¤ºå¼‚å¸¸ã€‚ ä½¿ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344import verify from "../utils/verify";const &#123;phone, code, password, passwordConfirm&#125; = this.state;return verify.addRule([ phone, code, password, passwordConfirm], [&#123; rule: 'isEmpty', errMsg: [ 'warning:è¯·è¾“å…¥æ‰‹æœºå·', 'warning:è¯·è¾“å…¥æ­£ç¡®çš„éªŒè¯ç ', 'warning:è¯·è¾“å…¥6-16ä½å¯†ç ', 'warning:è¯·è¾“å…¥6-16ä½ç¡®è®¤å¯†ç ' ]&#125;]).addRule( phone, [&#123; rule: 'isPhone:^1[3|4|5|6|7|8|9]\\d&#123;9&#125;$', errMsg: [ 'warning:è¾“å…¥çš„æ‰‹æœºå·ä¸ç¬¦åˆæ ‡å‡†' ] &#125;]).addRule( password, [&#123; rule: 'passwordBit:6', errMsg: [ 'warning:è¯·è¾“å…¥6-16ä½å¯†ç ' ] &#125;]).addRule( password, [&#123; rule: 'passwordReg:^[\\w]+$', errMsg: [ 'warning:è¯·è¾“å…¥æ•°å­—æˆ–è€…å­—æ¯' ] &#125;]).addRule( password, [&#123; rule: `isConfirm:$&#123;passwordConfirm&#125;`, errMsg: [ 'warning:ä¸¤æ¬¡è¾“å…¥å¾—å¯†ç ä¸ä¸€è‡´' ]&#125;]).execute(); æºç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119//è¡¨å•æ ¡éªŒæ’ä»¶let verify = (function () &#123; const ruleMap = new WeakMap(); const rulesList = &#123; //æ ¡éªŒè¾“å…¥æ¡†æ˜¯å¦ä¸ºç©º isEmpty(val, type, errMsg) &#123; if ((!val &amp;&amp; val !== 0) || val.length &lt;= 0) &#123; return &#123; type, errMsg &#125;; &#125; return false; &#125;, //æ ¡éªŒå¯†ç å’Œç¡®è®¤å¯†ç æ˜¯å¦ç›¸åŒ isConfirm(val, confirmVal, type, errMsg) &#123; if (val !== confirmVal) &#123; return &#123; type, errMsg &#125;; &#125; return false; &#125;, //æ ¡éªŒå¯†ç é•¿åº¦ passwordBit(val, length, type, errMsg) &#123; if (val.length &lt; length) &#123; return &#123; type, errMsg &#125;; &#125; return false; &#125;, //æ ¡éªŒå¯†ç æ˜¯å¦æ˜¯åªæœ‰æ•°å­—æˆ–è€…å­—æ¯ passwordReg(val, reg, type, errMsg) &#123; let _reg = new RegExp(reg, 'g'); if(!_reg.test(val)) &#123; return &#123; type, errMsg &#125;; &#125; return false; &#125;, //æ ¡éªŒæ‰‹æœºå·ç  isPhone(val, reg, type, errMsg) &#123; let _reg = new RegExp(reg); if(!_reg.test(val)) &#123; return &#123; type, errMsg &#125;; &#125; return false; &#125; &#125;; class Verify &#123; constructor() &#123; ruleMap.set(this, []); &#125; /** * æ·»åŠ æ ¡éªŒè§„åˆ™ * @param vals * @param rules * @returns &#123;Verify&#125; */ addRule = (vals, rules) =&gt; &#123; const mapList = ruleMap.get(this); vals = (Object.prototype.toString.call(vals) === "[object Array]") ? vals : [vals]; for (let [key, val] of vals.entries()) &#123; rules.forEach(ruleItem =&gt; &#123; mapList.push(() =&gt; &#123; let &#123;rule, errMsg&#125; = ruleItem; const operation = rule.split(":"); errMsg = errMsg instanceof Array ? errMsg : [errMsg]; const currentErrMsg = errMsg[key]; const method = operation.shift(); operation.unshift(val); operation.push(...currentErrMsg.split(":")); return rulesList[method](...operation); &#125;); &#125;); &#125; ruleMap.set(this, mapList); return this; &#125;; /** * è¿›è¡Œæ ¡éªŒ * @returns &#123;boolean|*&#125; */ execute = () =&gt; &#123; const mapList = ruleMap.get(this); let msg; for (let mapVal of mapList.values()) &#123; if ((msg = mapVal())) &#123; this.clear(); return msg; &#125; &#125; this.clear(); return false; &#125;; /** * å°†æ ¡éªŒè§„åˆ™çš„æ–¹æ³•éƒ½æ¸…é™¤æŽ‰ */ clear = () =&gt; &#123; ruleMap.set(this, []); &#125;; &#125; return new Verify();&#125;)();export default verify; å››ã€ç›®å½•ç»“æž„ åŽŸå›  å»ºç«‹ä¸€ä¸ªç”Ÿæ€ï¼Œæœ€é‡è¦çš„å°±æ˜¯ç›®å½•ç»“æž„ï¼Œä¸€ä¸ªå¥½çš„ç›®å½•ç»“æž„ï¼Œèƒ½å¤Ÿä½¿å¼€å‘çš„æ•ˆçŽ‡å˜é«˜ï¼ŒçœåŽ»è¿‡å¤šçš„æŸ¥æ‰¾ç›®å½•ã€è·¯å¾„å’Œæ–‡ä»¶çš„æ—¶é—´ï¼Œè€Œå¼€å‘ä¸€ä¸ªç”Ÿæ€æˆ–è€…ä¸€ä¸ªé¡¹ç›®ï¼Œå¾€å¾€æ˜¯è¦å’Œä¸šåŠ¡è¿žæŽ¥èµ·æ¥çš„ï¼Œæ‰€ä»¥ç›®å½•ç»“æž„æœ‰å¿…è¦ä¸Žä¸šåŠ¡ç´§å¯†ç›¸è¿žã€‚ è¯¦æƒ… æˆ‘ä»¬è¶³çƒä¸šåŠ¡é¡¹ç›®ï¼Œå»ºè®®é‡‡ç”¨umiçš„é‚£ç§ç›®å½•ç»“æž„ï¼Œé…åˆä¸šåŠ¡ç•Œé¢çš„ç»„ä»¶ï¼Œæ— è®ºæ˜¯ä¸šåŠ¡ç»„ä»¶(ä¸åŒ…å«å…¬ç”¨ç»„ä»¶)ã€ä¸šåŠ¡æ ·å¼ã€ç§æœ‰ä¸šåŠ¡æ ·å¼å˜é‡ï¼Œè¿˜æ˜¯reduxçš„è¡Œä¸ºactionã€è§¦å‘redux actionè¡Œä¸ºäº§ç”Ÿæ•°æ®å¤„ç†å¹¶è¿”å›žçš„reducerã€ç§æœ‰é™æ€å¸¸é‡ã€ç§æœ‰å·¥å…·ï¼Œéƒ½æ”¾å…¥å’Œä¸šåŠ¡ç•Œé¢ç»„ä»¶åŒä¸€ä¸ªç›®å½•è·¯å¾„ä¸‹ï¼Œè¿™æ ·åœ¨å¼€å‘æŸä¸€ä¸ªç•Œé¢çš„ä¸šåŠ¡æ—¶ï¼Œå°±ä¸éœ€è¦è¿”å›žä¸Šä¸€çº§ç”šè‡³äºŽæ ¹ç›®å½•ä¸‹å¯»æ‰¾è¿™äº›ä¸šåŠ¡å¯èƒ½å¿…å¤‡çš„æ ·å¼ã€ç»„ä»¶ã€å·¥å…·ã€actionã€reducerå’Œé™æ€å˜é‡ã€‚ è€Œå…¬æœ‰çš„éƒ¨åˆ†åˆ™æ”¾å…¥åˆ°ç››è£…ä¸šåŠ¡ç•Œé¢ç»„ä»¶æ ¹è·¯å¾„çš„å¤–éƒ¨ï¼Œæ¯”å¦‚é™æ€å›¾ç‰‡ã€æ–‡å­—å­—ä½“ã€éŸ³é¢‘å’Œè§†é¢‘èµ„æºã€å…¬æœ‰çš„æ ·å¼ã€å…¬æœ‰çš„æ ·å¼å˜é‡ã€å…¬æœ‰çš„å·¥å…·å’Œç»„ä»¶ä»¥åŠå…¬æœ‰çš„é™æ€å¸¸é‡ï¼Œéƒ½æ”¾å…¥å¤–éƒ¨ï¼Œåˆ†ç›®å½•ç››è£…ï¼Œåå­—å«å•¥å°±ä¸å»ºè®®äº†ï¼Œæœ€èµ·ç è¦è¯­ä¹‰æ¸…æ™°ä¸”å¸¸ç”¨ï¼Œè®©äººèƒ½å¤Ÿæ¯”è¾ƒå®¹æ˜“çš„ç†è§£ã€‚ äº”ã€react stateå’Œpropsçš„ä½¿ç”¨ æ¦‚æ‹¬ stateèŠ±å¿ƒ,propsä¸“ä¸€ ; stateå¦‚æ­¤å–„å˜,propså§‹ç»ˆå¦‚ä¸€ ä½¿ç”¨ åœ¨è¿˜æ²¡æœ‰reduxç»Ÿä¸€ç®¡ç†æ•°æ®çš„å¹´ä»£,æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨stateæ¥æ‰¿æŽ¥å˜é‡,åœ¨ä¸€ä¸ªç»„ä»¶çš„å†…éƒ¨,æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨stateæ¥æŽ§åˆ¶è¿™ä¸ªç»„ä»¶çš„å–œæ€’å“€ä¹å’Œè¨€è¡Œä¸¾æ­¢,æŽ§åˆ¶å™¨å‘¢,å°±æ˜¯setState;ä½†æ˜¯å½“ç»„ä»¶å¥—ç”¨æ—¶,çˆ¶å­å…³ç³»å‘ˆçŽ°å‡ºæ¥,çˆ¶ç»„ä»¶å‘çŽ°æ²¡åŠžæ³•ä¼ æŽˆå’Œæ•™è‚²å­ç»„ä»¶ä¸€äº›ç»éªŒå’ŒçŸ¥è¯†,å› ä¸ºç»„ä»¶éƒ½æ˜¯æœ‰è¡€æœ‰è‚‰æœ‰è‡ªå·±æ„è¯†çš„,æ‰€ä»¥åªèƒ½å¼ºåˆ¶,çˆ¶ç»„ä»¶é€šè¿‡ä¼ å…¥è‡ªå·±çš„state,æ¥æ”¹å˜å­ç»„ä»¶çš„ä¸€äº›åä¹ æƒ¯,ä¿—è¯è¯´å¾—å¥½,â€œå°æ ‘ä¸ä¿®ä¸ç›´æºœ,äººä¸ä¿®ç†å“å•¾å•¾â€,è‡ªç„¶åœ¨å­ç»„ä»¶è¿˜æ²¡æœ‰æˆç†Ÿæ—¶,ä¼ å…¥å­ç»„ä»¶å†…éƒ¨çš„çˆ¶ç»„ä»¶state(ä¹Ÿå°±æ˜¯å­ç»„ä»¶props),å­ç»„ä»¶æ˜¯æ— æ³•ä¿®æ”¹çš„,åªèƒ½å¬ä¹‹ä»»ä¹‹,æŽ¥å—æ´—ç¤¼,ä½†æ˜¯å½“å­ç»„ä»¶å˜æˆç†Ÿ,çˆ¶ç»„ä»¶å˜è€,å­ç»„ä»¶æƒ³è¦æ”¹å˜çˆ¶ç»„ä»¶çš„éœ€æ±‚ä¹Ÿå°±è‡ªç„¶æ˜¾ç¤ºå‡ºæ¥,é‚£å¦‚ä½•èƒ½ä¿®æ”¹å‘¢,åªèƒ½åŠçˆ¶ç»„ä»¶æŽˆæƒç»™ä»–,ä»¥ä¸ºçˆ¶ç»„ä»¶å¥½çš„åä¹‰,çˆ¶ç»„ä»¶å¬åˆ°äº†å¿ƒé‡Œ,è§‰å¾—â€å„¿å•Šï¼Œé•¿å¤§äº†ï¼Œæ‡‚äº‹äº†â€,ç›´æŽ¥ç»™äºˆå­ç»„ä»¶ä¸€ä¸ªæ–¹æ³•,è¿™ä¸ªæ–¹æ³•è¡Œä¸ºç›´æŽ¥å¯ä»¥æ”¹å˜çˆ¶ç»„ä»¶çš„stateç”Ÿæ´»è¡Œä¸º,è€Œè¿™ä¸ªæ–¹æ³•æ˜¯å­ç»„ä»¶æŽ§åˆ¶çš„ã€‚ æ•…stateæ‰¿æŽ¥çš„æ˜¯å˜é‡,è€Œpropsåªæ˜¯stateåœ¨çˆ¶å­ä¼ é€’stateæ—¶çš„æ¡¥æ¢,æ¡¥æ¢æ˜¯ä¸å¯å¦„åŠ¨çš„ã€‚ å»ºè®®stateä¸­ä¸è¦æ”¾å…¥å¸¸é‡,å¦‚æžœå«ŒæŸå¸¸é‡åªæ˜¯åœ¨æœ¬ç»„ä»¶å†…ä½¿ç”¨æˆ–è€…å«Œé‡æ–°å»ºä¸€ä¸ªé™æ€å¸¸é‡æ–‡ä»¶éº»çƒ¦,é‚£å°±ç›´æŽ¥ä½¿ç”¨ç»„ä»¶å†…éƒ¨çš„this.constants = {number: â€˜è¿™æ˜¯å¸¸é‡â€™};æˆ–è€…ä¸æ”¾å…¥åˆ°reactç»„ä»¶å†…,ç›´æŽ¥åœ¨æ–‡ä»¶é¡¶éƒ¨åŠ ä¸€ä¸ªconst constants = {number: â€˜è¿™æ˜¯å¸¸é‡â€™};ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ å…­ã€reactäº‹ä»¶ å®šä¹‰ äº‹ä»¶å¾€å¾€ä»£è¡¨ä¸€ä¸ªå¯¹è±¡ã€ä¸€ä¸ªç»„ä»¶å’Œä¸€å¥—å·¥å…·çš„è¡Œä¸º,è€Œreactäº‹ä»¶çš„æ¼”åŒ–ä»Žåˆå§‹é˜¶æ®µçš„bindæ˜¾ç¤ºç¡¬ç»‘å®š,è‡³ä¸­æœŸçš„ç®­å¤´å‡½æ•°,ç›´è‡³çŽ°é˜¶æ®µæ¯”è¾ƒå¥½çš„ç®­å¤´å‡½æ•°é…åˆdata-propsTypeå±žæ€§çš„æ–¹å¼ã€‚ å‰æœŸbindç¡¬ç»‘å®š åœ¨å‰æœŸ,æˆ‘ä»¬æ—¢å¸Œæœ›äº‹ä»¶å‡½æ•°çš„thisæŒ‡å‘Reactç»„ä»¶å¯¹è±¡æœ¬èº«,åˆå¸Œæœ›å¯ä»¥ä¼ é€’æŸäº›æ•°æ®çŠ¶æ€,ä¸”thisä¸è¦æŒ‡å‘äº‹ä»¶æ‰€ç»‘å®šçš„å…ƒç´ domæˆ–è€…reactè™šæ‹Ÿdomï¼Œåœ¨è¿™æ—¶å€™ï¼Œæˆ‘ä»¬é€‰æ‹©äº†bindç¡¬ç»‘å®š,äº‹ä»¶.bind(this, params)é…±ç´«,ä½†æ˜¯å‘çŽ°è¿™æ ·å¤§æŠµæ˜¯ä¸ºå†…å­˜æ³„æ¼åŸ‹ä¸‹äº†éšæ‚£ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ¨¡æ‹Ÿbindçš„jsæºä»£ç : 1234567891011121314Function.prototype.bind = function(context) &#123; let _this = this, fBind, args = [...arguments]; function F() &#123;&#125; fBind = function () &#123; const newArgs = [...args, ...arguments]; return _this.apply(this instanceof fBind ? this : context, newArgs); &#125;; //è¿™é‡Œè®©è¿”å›žçš„å‡½æ•°çš„éšå¼åŽŸåž‹æŒ‡å‘å…¶ç»‘å®šçš„äº‹ä»¶å‡½æ•°çš„æ˜¾å¼åŽŸåž‹ F.prototype = _this.prototype; fBind.prototype = new F(); return fBind;&#125;; è¿™æ ·å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„bindç¡¬ç»‘å®šçš„å‡½æ•°ï¼ŒåŸºäºŽFunctionå‡½æ•°å¯¹è±¡çš„åŽŸåž‹é“¾ä¸Šé¢ï¼Œä½†æ˜¯å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œbindç¡¬ç»‘å®šå½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼ŒfBindçš„è¿™ä¸ªå‡½æ•°å¯¹è±¡ï¼Œåœ¨å¼‚æ­¥æœºåˆ¶ä¸­çš„å†…å­˜å½“ä¸­æ˜¯ä¸€ç›´å­˜åœ¨çš„ã€‚é‚£å°±æ„å‘³ç€ï¼Œæˆ‘ç¡¬ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œå°±ä¼šå½¢æˆå¤šä¸ªé—­åŒ…ï¼Œè¿™æ ·è¿Ÿæ—©ä¼šå½¢æˆå†…å­˜æ³„æ¼ï¼Œå®žåœ¨æ˜¯ä¸å¯å–çš„ä¸€ä¸ªæ–¹å¼ã€‚ ä¸­æœŸçš„ç®­å¤´å‡½æ•°ä¸ŽçŽ°é˜¶æ®µçš„ç®­å¤´å‡½æ•°é…åˆdata-propsTypeå±žæ€§ å¯¹äºŽç®­å¤´å‡½æ•°ï¼Œæˆ‘ä»¬æžä¸ºç†Ÿæ‚‰ï¼Œä¸èƒ½æ”¹å˜å…¶thisçš„æŒ‡å‘ã€æ— argumentsç±»å‚æ•°æ•°ç»„ã€ä¸èƒ½ä½¿ç”¨newç»‘å®šæž„é€ è°ƒç”¨å’Œå¼•ç”¨å…³è”ä»¥åŠä¸èƒ½ä½¿ç”¨superç»§æ‰¿ã€‚è¿™æ ·æ—¢å†™æ³•ç®€å•ï¼Œthisçš„æŒ‡å‘åˆè§£å†³äº†ï¼ŒæŒ‡å‘Reactç»„ä»¶å¯¹è±¡æœ¬èº«ï¼Œä¸”ä¸æŒ‡å‘äº‹ä»¶æ‰€ç»‘å®šçš„å…ƒç´ domæˆ–è€…reactè™šæ‹Ÿdomã€‚é‚£ä¹ˆå‚æ•°å¦‚ä½•ä¼ å…¥å‘¢ï¼Œå½“ç„¶ä½ å¦‚æžœä¸å«Œéº»çƒ¦ï¼Œå¯ä»¥è¿™æ ·: harmony1234567&lt;div onClick=&#123;(e) =&gt; &#123; const type = 'me'; //è¿™ä¸ªå°±æ˜¯ä½ å®šä¹‰çš„ç®­å¤´å‡½æ•° onChangeHandler(type, e);&#125;&#125;&gt; æ¥å§ï¼Œç‚¹å‡»&lt;/div&gt; ä½†æ˜¯å¤ªè¿‡éº»çƒ¦ï¼Œæ¯æ¬¡éƒ½è¦å†…éƒ¨ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œåœ¨å¤–é¢åˆè¦å†å®šä¹‰ä¸€ä¸ªå°è£…çš„ç®­å¤´å‡½æ•°ï¼Œæ„Ÿè§‰æœ‰ç‚¹å„¿çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è‡ªå®šä¹‰å±žæ€§çš„æ–¹æ³•ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ harmony1234567891011121314151617class Demo extends React.Component&#123; onChangeHandler = (e) =&gt; &#123; const &#123;target&#125; = e || &#123;&#125;; const type = target.getAttribute('data-type'); console.log(type); &#125;; render() &#123; return ( &lt;div onClick=&#123; data-type='me' onChangeHandler &#125;&gt; æ¥å§ï¼Œç‚¹å‡» &lt;/div&gt; ); &#125; &#125; è¿™ç§ç®­å¤´å‡½æ•°é…åˆdata-propsTypeå±žæ€§çš„æ–¹å¼ï¼Œç®€æ˜“å®žç”¨ï¼Œæ˜¯çŽ°é˜¶æ®µæ¯”è¾ƒå¥½çš„äº‹ä»¶å®žçŽ°è¿‡ç¨‹ã€‚ ä¸ƒã€æ·»åŠ æ³¨é‡Š è¯¦æƒ… æ³¨é‡Šæ˜¯ä½“çŽ°ä¸€ä¸ªå¥½çš„å¼€å‘äººå‘˜ç´ å…»çš„æ ‡è¯†,å¥½ä¸”æœ‰æ•ˆçš„æ³¨é‡Šåœ¨å¤šäººå›¢é˜ŸåŒæ—¶å¼€å‘è¿‡ç¨‹ä¸­çš„åž«è„šçŸ³,æ‰€ä»¥å»ºè®®å°ä¼™ä¼´ä»¬,æ— è®ºæ˜¯åœ¨ä¸šåŠ¡é€»è¾‘è¿˜æ˜¯æŠ€æœ¯é€»è¾‘æ¯”è¾ƒå¤æ‚çš„éƒ¨åˆ†,åšå¥½è¯¦ç»†çš„æ³¨é‡Š,å¤æ‚æŠ€æœ¯é€»è¾‘åªè¦è®²æ¸…æ¥šä»£ç é€»è¾‘å³å¯,è€Œå¤æ‚ä¸šåŠ¡é€»è¾‘,å°±éœ€è¦è®²ä¸šåŠ¡çš„èƒŒæ™¯è®²æ¸…æ¥š,å³æ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆè¯¦ç»†çš„è¡¨è¾¾æ˜Žç™½ã€‚]]></content>
      <categories>
        <category>reviewä¸Žè§„èŒƒ</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>review</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½ ä¸çŸ¥é“çš„Javascript]]></title>
    <url>%2F2019%2F05%2F23%2F%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84Javascript%2F</url>
    <content type="text"><![CDATA[&lt;ä¸Šç¯‡&gt;æ•´ç†: è¯æ³•ä½œç”¨åŸŸã€thisä»¥åŠåŽŸåž‹å¯¹è±¡ä¸€ã€è¯æ³•ä½œç”¨åŸŸ æµè§ˆå™¨æ‰§è¡ŒJavaScriptè¯­è¨€ åœ¨æµè§ˆå™¨å¼•æ“Žæ‰§è¡ŒJSä¹‹å‰,JSå°±å·²ç»ç»è¿‡äº†æµè§ˆå™¨ç¼–è¯‘å™¨çš„ç¼–è¯‘,ä¹Ÿå°±æ˜¯è¯æ³•åˆ†æžå’Œè¯­æ³•åˆ†æž,å°†å…³é”®å­—ã€ä¿ç•™å­—ã€è‡ªå®šä¹‰å˜é‡ä»¥åŠå‡½æ•°æ ¹æ®è¯æ³•è§£é‡Šå’ŒæŠ½è±¡è¯­æ³•æ ‘è¿›è¡Œè§£æž,å¹¶ä¸”æŒ‰ç…§ä¼˜å…ˆçº§å’Œè¯æ³•ä½œç”¨åŸŸæ”¾åˆ°åº”æœ‰çš„ä½ç½®ä¸Š,æœ€åŽé€šè¿‡æµè§ˆå™¨å¼•æ“Žæ‰§è¡Œ è¯æ³•åˆ†æž è¯æ³•åˆ†æžåˆ†ä¸º: åˆ†è¯å’Œè¯æ³•è§£é‡Šã€‚ åˆ†è¯å°±æ˜¯å°†å„ä¸ªè¡¨è¾¾å¼æ ¹æ®ç©ºæ ¼åˆ†å¼€,å†æ ¹æ®å…³é”®å­—ã€ä¿ç•™å­—ç­‰è¯æ³•è¿›è¡ŒåŒ¹é…è¯æ³•è§£é‡Šã€‚ è¯­æ³•åˆ†æž è¯­æ³•åˆ†æžå°±æ˜¯æ ¹æ®æŠ½è±¡è¯­æ³•æ ‘ä¸Šé¢çš„è¯­æ³•è§£é‡Š,ç±»åž‹ã€å¼ºåˆ¶ç±»åž‹è½¬æ¢ã€ToNumberã€ToStringå’ŒToPrometiveç­‰æ³›æ³›å«ä¹‰å¯¹è¡¨è¾¾å¼è§£æž„ã€‚ å¼•æ“Žæ‰§è¡Œ è¯æ³•åˆ†æžå’Œè¯­æ³•åˆ†æžä¹‹åŽ,æµè§ˆå™¨å°±ä¼šå°†å·²ç»ç¼–è¯‘å¥½çš„JSä»£ç ,äº¤ç»™å¼•æ“Žæ‰§è¡Œã€‚ LHSã€RHS è¯æ³•ä½œç”¨åŸŸé™å®šäº†å˜é‡å’Œå‡½æ•°äº§ç”Ÿæ•ˆæžœçš„èŒƒå›´,åˆ†ä¸ºä¸‰ç§: å…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸä»¥åŠå—çº§ä½œç”¨åŸŸ(ES6å¼•å…¥),ä¸ºäº†æ›´å¥½çš„ç†è§£è¿™ä¸‰ç§ä½œç”¨åŸŸ,ä»¥åŠå…¶ä¸­å˜é‡å’Œå‡½æ•°çš„å®šä¹‰ä¸Žèµ‹å€¼,ä»Žæ¦‚å¿µä¸Šå¼•å…¥äº†LHSå’ŒRHS,ç”¨æ¥è§£é‡Šå¼•æ“Žæ‰§è¡Œæ—¶,å˜é‡çš„èµ‹å€¼ç›®æ ‡ä»¥åŠèµ‹å€¼æ“ä½œçš„æºå¤´ LHS: èµ‹å€¼æ“ä½œçš„ç›®æ ‡æ˜¯è° RHS: è°æ‰æ˜¯èµ‹å€¼æ“ä½œçš„æºå¤´ ä¾‹å­ //å®šä¹‰fooå‡½æ•°ä¸ºLHS;èŽ·å–å˜é‡aä¸ºRHS;var b = ä¸ºLHS;èŽ·å–å˜é‡aå’Œbä¸ºRHS function foo(a) { var b = a; return a + b; } //var c = ä¸ºLHS;foo(10)ä¸ºRHS;å°†å®žå‚10èµ‹å€¼ç»™è™šå‚aä¸ºLHS var c = foo(10); //console.logä¸ºRHS;èŽ·å–å˜é‡cä¸ºRHS console.log(c); //äº”ä¸ªè¡¨è¾¾å¼ä¸­,å…±æœ‰å››ä¸ªLHSå’Œäº”ä¸ªRHS è¯æ³•ä½œç”¨åŸŸé“¾ ç®€å•æ¥è¯´,ä½œç”¨åŸŸé“¾ä½¿å†…éƒ¨ä½œç”¨åŸŸå†…çš„å˜é‡å’Œå‡½æ•°å˜æˆäº†ç§å¯†ä¸”ä¸å¯è®¿é—®çš„,ä¿è¯äº†å†…éƒ¨å˜é‡ä¸ä¼šæ±¡æŸ“åˆ°å…¨å±€ä»¥åŠå¤–éƒ¨ä½œç”¨åŸŸ,ä»¥å…é€ æˆå˜é‡åå†²çªç­‰ä¸å¯é¢„çŸ¥çš„é”™è¯¯,å¤–éƒ¨ä½œç”¨åŸŸæ˜¯è®¿é—®ä¸åˆ°ä»¥åŠæ“ä½œä¸åˆ°çš„,è€Œå†…éƒ¨ä½œç”¨åŸŸçš„ä¼˜å…ˆçº§å´æ˜¯è¶Šæ¥è¶Šé«˜,å¯ä»¥è®¿é—®å’Œæ“ä½œåˆ°è‡ªå·±ä»¥åŠå¤–éƒ¨Nå±‚ä½œç”¨åŸŸçš„å˜é‡å’Œå‡½æ•° ä¾‹å­ var a = &quot;hello&quot;; function foo() { var b = &quot;world&quot;; //fooå‡½æ•°ä½œç”¨åŸŸ,å¯ä»¥è®¿é—®åˆ°å’Œæ“ä½œåˆ°a,è¿™é‡Œæ‰“å°&quot;hello&quot; console.log(a); function bar() { var c = &quot;wenkai.yin&quot;; //barå‡½æ•°ä½œç”¨åŸŸ,å¯ä»¥è®¿é—®åˆ°å’Œæ“ä½œåˆ°c,b,a,è¿™é‡Œæ‰“å°&quot;wenkai.yin&quot; &quot;world&quot; &quot;hello&quot; console.log(c, b, a); } bar(); //è¿™é‡ŒæŠ¥é”™ReferrenceError c is not defined //å› ä¸ºfooå‡½æ•°ä½œç”¨åŸŸä¸­è®¿é—®ä¸åˆ°å’Œæ“ä½œä¸åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„barå‡½æ•°ä½œç”¨åŸŸä¸­çš„ç§å¯†å˜é‡c, //ä¸”åœ¨æœ¬ä½œç”¨åŸŸä¸‹æ‰¾ä¸åˆ°å˜é‡c,ç”±æ­¤å‘å¤–éƒ¨ä½œç”¨åŸŸ,ä¹Ÿå°±æ˜¯å…¨å±€ä½œç”¨åŸŸä¸­æŸ¥æ‰¾å˜é‡c,å‘çŽ°cå¹¶æ²¡æœ‰å®šä¹‰,æ›´åˆ«è¯´ç»™cèµ‹å€¼äº†, //æ‰€ä»¥è¿™æ—¶å€™ä¼šæŠ¥ReferrenceError c is not defined console.log(c); } foo(); å˜é‡æå‡ ç»¼ä¸Šæ‰€è¿°,å˜é‡å’Œå‡½æ•°çš„å®šä¹‰æ˜¯åœ¨æµè§ˆå™¨ç¼–è¯‘å™¨ç¼–è¯‘æ—¶,å…·ä½“åº”è¯¥æ˜¯åœ¨è¯æ³•åˆ†æžçš„è¯æ³•è§£é‡Šæ—¶,å°±å·²ç»å®šä¹‰å¥½äº†å˜é‡å’Œå‡½æ•°çš„ä½ç½®,ä¹‹åŽçš„å¼•æ“Žæ‰§è¡Œæ‰æ˜¯è¿›è¡Œèµ‹å€¼,ç”±æ­¤ä¼šå‡ºçŽ°å˜é‡æå‡çš„æƒ…å†µ ä¾‹å­ä¸€ console.log(a); var a = 14; //è¿™é‡Œæ‰“å°çš„å€¼ä¸ºundefined,è¿™é‡Œä¸ä¼šæŠ¥é”™,å› ä¸ºå˜é‡aå·²ç»åœ¨æµè§ˆå™¨ç¼–è¯‘ä¸­å°±å®šä¹‰äº†,æ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯: //var a; //console.log(a); //a = 14; ä¾‹å­äºŒ a = 14; var a; console.log(a); //è¿™é‡Œæ‰“å°çš„å€¼ä¸º14,æ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯: //var a; //a = 14; //console.log(a); ä¾‹å­ä¸‰ console.log(a); let a = 14; //è¿™é‡Œä¼šç›´æŽ¥æŠ¥é”™ReferrenceError a is not defined //å› ä¸ºåœ¨ES6ä¸­letå’Œconstä¸ä¼šå‡ºçŽ°å˜é‡æå‡,letå’Œconstå¹¶ä¸åªæ˜¯ä¸ºäº†è¿›è¡ŒåŒºåˆ†å˜é‡å’Œå¸¸é‡æ‰äº§ç”Ÿçš„ //å…¶æ ¸å¿ƒæ˜¯ä¸ºäº†äº§ç”Ÿå—çº§ä½œç”¨åŸŸ,å—çº§ä½œç”¨åŸŸä¹Ÿéµä»Žè¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ä»¥åŠä½œç”¨åŸŸé“¾,æ‰€ä»¥æ‰ä¸ä¼šå‡ºçŽ°å˜é‡æå‡ //å®žé™…æ‰§è¡Œç»“æžœåº”è¯¥æ˜¯: //console.log(a); //{ // let a = 14; //} //è¿™æ—¶å€™å…¨å±€ä½œç”¨åŸŸä¸­æ˜¯æ²¡åŠžæ³•è®¿é—®å’Œæ“ä½œå—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡açš„,ç”±æ­¤åˆ¤æ–­aæœªå®šä¹‰,æ‰ä¼šæŠ¥é”™ReferrenceError a is not defined ä¾‹å­å›› if(a in window) { var a = 10; } console.log(a); //è¿™é‡Œä¼šç›´æŽ¥æ‰“å°:10 //è¿™é‡Œæ˜¯å­˜åœ¨å˜é‡æå‡çš„æ¦‚å¿µçš„,å˜é‡açš„å®šä¹‰æ˜¯åœ¨æµè§ˆå™¨ç¼–è¯‘çš„è¯æ³•åˆ†æžçš„è¯æ³•è§£é‡Šæ—¶,å°±å·²ç»ç¡®å®šäº†açš„ä½ç½®,æ‰€ä»¥å˜é‡åœ¨windowå¯¹è±¡ä¸­æ˜¯å­˜åœ¨çš„ //å®žé™…æµè§ˆå™¨å¼•æ“Žæ‰§è¡Œç»“æžœåº”è¯¥æ˜¯: //var a; //if(a in window) { // a = 10; //} //console.log(a); evalå’Œwith evalé€šè¿‡å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºJavascriptè¯­å¥å’Œè¡¨è¾¾å¼,æ¥æ”¹å˜æŸä¸ªè¯æ³•ä½œç”¨åŸŸ;withé€šè¿‡åˆ›é€ è¯æ³•ä½œç”¨åŸŸ,ä½¿å¾—æŸä¸ªå¯¹è±¡å±žæ€§èŽ·å¾—withè¯æ³•ä½œç”¨åŸŸä¸­å˜é‡çš„å€¼ ä¾‹å­ä¸€ var b = &quot;bigger&quot;; function foo(sentence) { eval(sentence); console.log(b); } foo(&quot;var b = &apos;smaller&apos;&quot;); //è¿™é‡Œæ‰“å°smaller,æœ¬æ¥fooçš„è¯æ³•ä½œç”¨åŸŸä¸­æ˜¯ä¸å­˜åœ¨å˜é‡bçš„,è€Œevalæ”¹å˜äº†fooçš„è¯æ³•ä½œç”¨åŸŸ,ä½¿å¾—fooè¯æ³•ä½œç”¨åŸŸä¸­å‡ºçŽ°äº†å˜é‡b ä¾‹å­äºŒ var obj = {a: &quot;foo&quot;, b: &quot;bar&quot;}; with(obj) { a = &quot;bar&quot;; b = &quot;foos&quot;; } console.log(obj); //è¿™é‡Œæ‰“å°{a: &quot;bar, b: &quot;foos&quot;},withåˆ›é€ äº†è¯æ³•ä½œç”¨åŸŸ,ä½¿å¾—å…¶ä¸­çš„å˜é‡èµ‹å€¼æ“ä½œæ˜¯ç§å¯†çš„,ä¸å¯è®¿é—®ä¸”ä¸å¯æ“ä½œçš„ console.log(a); console.log(b); //å˜é‡aå’Œbåœ¨å…¨å±€ä½œç”¨åŸŸä¸­éƒ½æ²¡æœ‰å®šä¹‰,åªæœ‰åœ¨withåˆ›é€ çš„ä½œç”¨åŸŸä¸‹,è¿›è¡Œèµ‹å€¼, //æ‰€ä»¥è¿™é‡Œä¼šæŠ¥é”™:ReferrenceError a is not defined;ReferrenceError b is not defined evalç”±äºŽå¯¹å­—ç¬¦ä¸²è¯æ³•å’Œè¯­æ³•åˆ†æžæ¯”è¾ƒå¤æ‚,å­—ç¬¦ä¸²ä¸­çš„å˜é‡å’Œè¡¨è¾¾å¼ä¼šæ°¸ä¹…çš„ä¿ç•™åœ¨å†…å­˜ä¸­çš„,ä¸ä¼šè¢«æµè§ˆå™¨åžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶,ä¼šé€ æˆç½‘ç«™çš„æ€§èƒ½è¾ƒå·®çš„åŽŸå› ,è¢«å®˜æ–¹ä¸æŽ¨èä½¿ç”¨;è€Œwithç”±äºŽä¹Ÿä¼šé€ æˆç½‘ç«™æ€§èƒ½å˜å·®,å¹¶ä¸”æ²¡æœ‰å¿…è¦ä½¿ç”¨withæ”¹å˜å¯¹è±¡å±žæ€§å€¼çš„åŽŸå› ,è¢«å®˜æ–¹åˆ—ä¸ºç¦ç”¨è¡¨è¾¾å¼è¯­å¥ ä½œç”¨åŸŸä¸Žé—­åŒ… é—­åŒ…è·Ÿä½œç”¨åŸŸæœ‰ç€åƒä¸ä¸‡ç¼•çš„è”ç³»,æœ‰æ—¶å€™ä½ ä¼šä¸ç»æ„é—´ä½¿ç”¨åˆ°,ä½†æ˜¯å´ä¸çŸ¥æ˜¯é—­åŒ…,å…¶å®žä½ å¹³æ—¶ä½¿ç”¨çš„å¥½å¤šåœºæ™¯éƒ½æœ‰é—­åŒ… é—­åŒ…ç®€å•æ¥è¯´,å¯ä»¥è§£é‡Šä¸º:Aå‡½æ•°é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªBå‡½æ•°,Bå‡½æ•°åœ¨éžAå‡½æ•°ä½œç”¨åŸŸä¸‹æ‰§è¡Œ,åœ¨Aå‡½æ•°é‡Šæ”¾çš„æƒ…å†µä¸‹,ä»èƒ½è®¿é—®å’Œæ“ä½œAå‡½æ•°ä½œç”¨åŸŸä¸‹çš„å˜é‡å’Œå‡½æ•° è¿™å°±æ˜¯é—­åŒ…,åœ¨ä¸šåŠ¡å¼€å‘è¿‡ç¨‹ä¸­,æˆ‘ä»¬ä¼šé‡åˆ°å¾ˆå¤šæ­¤ç±»ç¤ºä¾‹ ä¾‹å­ä¸€ function foo() { var name = &quot;wenkai.yin&quot;; setTimeout(function time() { console.log(name); name = &quot;Gary&quot;; console.log(name); }, 1000); } foo(); //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin //Gary //è¿™å°±æ˜¯ä¸€ä¸ªé—­åŒ…ç¤ºä¾‹,åä¸ºtimeçš„å‡½æ•°åœ¨fooå‡½æ•°ä½œç”¨åŸŸä¸‹å®šä¹‰,åœ¨fooå‡½æ•°è°ƒç”¨é‡Šæ”¾ä¹‹åŽ,åœ¨setTimeoutè¿™ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸‹æ‰§è¡Œ,ä»èƒ½è®¿é—®å’Œæ“ä½œåˆ°fooå‡½æ•°ä½œç”¨åŸŸä¸‹çš„å˜é‡name,è¿™å°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…,å˜é‡name,æ˜Žæ˜Žåº”è¯¥éšç€fooå‡½æ•°çš„è°ƒç”¨é‡Šæ”¾è¢«é”€æ¯,ä½†æ˜¯å´æ²¡æœ‰,åœ¨å†…å­˜ä¸­èŽ·å¾—ä¿ç•™,å½¢æˆä¸€å—å„¿é—­åŒ…åŒºåŸŸ ä¾‹å­äºŒ function foo() { var name = &quot;world&quot;; function bar() { console.log(name); name = &quot;hello&quot;; console.log(name); } return bar; } foo()(); //è¿™é‡Œæ‰“å°: //world //hello //åœ¨è¿™é‡Œbarå‡½æ•°æ˜¯åœ¨fooå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¸‹å®šä¹‰çš„,ä½†æ˜¯åœ¨fooå‡½æ•°è°ƒç”¨é‡Šæ”¾ä¹‹åŽ,barå‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹è¿˜æ˜¯èƒ½å¤Ÿè®¿é—®å’Œæ“ä½œfooå‡½æ•°ä½œç”¨åŸŸä¸‹çš„æœ¬åº”è¢«é”€æ¯æŽ‰çš„å˜é‡name,è¯´æ˜Žè¿™æ—¶å€™å˜é‡nameå¹¶æ²¡æœ‰åœ¨å†…å­˜ä¸­æ˜¾ç¤º,åè€Œä¿ç•™äº†ä¸‹æ¥,å½¢æˆäº†ä¸€å—å„¿é—­åŒ…åŒºåŸŸ ä¾‹å­ä¸‰ function deep() { for(var i = 0; i &lt; 10; i++) { setTimeout(function time() { console.log(i); }, i * 1000); } } deep(); //åœ¨è¿™é‡Œä¼šæ‰“å°: 10ä¸ª10 //ç”±äºŽå»¶æ—¶å™¨å¼‚æ­¥çš„å…³ç³»,å½“æµè§ˆå™¨å¼•æ“Žé‡åˆ°å¼‚æ­¥ä»£ç æ—¶,ä¼šå…ˆæŠŠå¼‚æ­¥ä»£ç æ”¾åˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­,å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ,ç­‰å¾…åˆ°åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ä¹‹åŽ,å†åŽ»è½®è¯¢å¼‚æ­¥é˜Ÿåˆ—ä¸­çš„å¼‚æ­¥ä»£ç ,è€Œè¿™æ—¶å€™forå¾ªçŽ¯å·²ç»ç»“æŸ,içš„å€¼ä¸º10,æ‰€ä»¥æ‰“å°äº†10ä¸ª10 //å½“ç„¶é‡Œé¢ä¹Ÿå­˜åœ¨é—­åŒ…,ä¾‹å­ä¸€ä¸­å·²ç»è¯´æ˜Ž //ä¿®å¤å¼‚æ­¥é—®é¢˜,ä½¿ç”¨é—­åŒ…æ–¹æ³•: function deep() { for(var i = 0; i &lt; 10; i++) { setTimeout((function time(i) { var j = i; return function () { console.log(j); } })(i), i * 1000); } } deep(); //åœ¨è¿™é‡Œä¼šæ‰“å°: 0-9åä¸ªæ•°å­— //jæ˜¯timeå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¸‹çš„å˜é‡,è€Œforå¾ªçŽ¯ä¸­çš„å˜é‡ié€šè¿‡å‚æ•°çš„æ–¹å¼ä¼ å…¥time IIFEè‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼, //è¿™æ—¶timeå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¸‹è¿”å›žä¸€ä¸ªåŒ¿åå‡½æ•°,ä¸”ä¸åœ¨timeå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¸‹è€Œæ˜¯åœ¨setTimeoutå‡½æ•°ä½œç”¨åŸŸä¸‹æ‰§è¡Œ,è¿™æ—¶å€™å½¢æˆäº†åä¸ªé—­åŒ…,å†…å­˜ä¸­ä¿ç•™äº†timeå‡½æ•°é‡Šæ”¾ä¹‹åŽçš„å†…éƒ¨çš„iå’Œjå˜é‡,å½¢æˆäº†åä¸ªé—­åŒ…åŒºåŸŸ //ä¿®å¤å¼‚æ­¥é—®é¢˜,ä½¿ç”¨letå…³é”®å­—: function deep() { for(let i = 0; i &lt; 10; i++) { setTimeout(function time() { console.log(i); }, i * 1000); } } deep(); //åœ¨è¿™é‡Œä¼šæ‰“å°: 0-9åä¸ªæ•°å­— //å®žé™…ä¸Šåœ¨è¿™é‡Œæ¯ä¸€æ¬¡å¾ªçŽ¯éƒ½ä¼šå½¢æˆä¸€ä¸ªå—çº§ä½œç”¨åŸŸ,å—çº§ä½œç”¨åŸŸä¸‹å®šä¹‰çš„timeå‡½æ•°, //è€Œtimeå‡½æ•°åœ¨setTimeoutå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¸‹æ‰§è¡Œ,ä»ç„¶å¯ä»¥èŽ·å–åˆ°å—çº§ä½œç”¨åŸŸä¸‹çš„å˜é‡i,è¿™æ—¶çš„å˜é‡iæ˜¯ä¿ç•™åœ¨å†…å­˜å½“ä¸­çš„,å½¢æˆäº†ç±»ä¼¼äºŽé—­åŒ…çš„åä¸ªå—çº§ä½œç”¨åŸŸé—­åŒ…åŒºåŸŸ IIFEè‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ IIFEè‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼çš„å‡ºçŽ°æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†é˜²æ­¢å˜é‡åç§°å†²çª,é¿å…æ±¡æŸ“å…¨å±€å˜é‡,åˆ©ç”¨å‡½æ•°è¯æ³•ä½œç”¨åŸŸ,åšäº†ä¸€å¤„è‡ªåŠ¨æ‰§è¡Œçš„ç§å¯†è£…ç½® ä¾‹å­ var name = &quot;global&quot;; (function IIFE(global) { var name = &quot;IIFE&quot;; console.log(name, global.name); })(window); console.log(name); //åœ¨è¿™é‡Œæ‰“å°: IIFE global //global //ä½“çŽ°äº†å…¨å±€ä½œç”¨åŸŸä¸‹çš„å˜é‡nameå’ŒIIFEå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¸‹çš„å˜é‡nameçš„ä¸åŒå«ä¹‰,ä¸”IIFEå‡½æ•°è¯æ³•ä½œç”¨åŸŸä¸‹çš„å˜é‡ä¸ä¼šé€ æˆå…¨å±€å˜é‡çš„æ±¡æŸ“,ä¸ä¼šé€ æˆå‘½åå†²çª,æ˜¯ç§å¯†çš„ã€‚ //è¿˜æœ‰ä¸€ç§è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼çš„å†™æ³• var name = &quot;global&quot;; (function IIFE(fn) { fn(window); })(function foo(global) { var name = &quot;IIFE&quot;; console.log(name, global.name); }); console.log(name); //åœ¨è¿™é‡Œæ‰“å°: IIFE global //global //åŒä¸Šå«ä¹‰,åªä¸è¿‡ä¼ å…¥çš„å‚æ•°æ–¹å¼ä¸åŒ,ä¸€ç§æ˜¯ä¼ é€’windowå‚æ•°,ä¸€ç§æ˜¯ç›´æŽ¥ä¼ é€’å‡½æ•° tryâ€¦catchâ€¦æ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸ æ—©åœ¨ES6 letå’Œconstå…³é”®å­—å‡ºçŽ°ä¹‹å‰,å°±å·²ç»æœ‰å›¢é˜Ÿå’Œå…¬å¸åœ¨å¼€å§‹æ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸäº†,å…¶ä¸­Googleå…¬å¸çš„Tracerè§£æžç¼–è¯‘å·¥å…·åœ¨ç¼–è¯‘å’Œæ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸæ—¶,ç¼–è¯‘å‡ºæ¥çš„ES5ä»£ç ,å°±æ˜¯ä½¿ç”¨äº†try{} catch() {}è¿™ç§æ–¹å¼ ä¾‹å­ try { throw undefined; } catch(a) { b = 12; console.log(b); } console.log(b); //åœ¨è¿™é‡Œæ‰“å°: //12 //ReferrenceError:b is not defined //è¿™ç§æœºåˆ¶åœ¨ES3ä¸­å°±æ—©å·²ç»å‡ºçŽ°äº† äºŒã€thisåŠ¨æ€ä½œç”¨åŸŸthisåŠ¨æ€ä½œç”¨åŸŸæ˜¯å…¬è®¤çš„jsé—­åŒ…ä¹‹å¤–çš„ç¬¬äºŒä¸ªéš¾ç‚¹,æœ‰å¾ˆå¤šäººä¸æ˜Žç™½thisæ‰€æŒ‡ä»£çš„æ˜¯ä»€ä¹ˆ,æ˜¯å¯¹è±¡?è¯æ³•ä½œç”¨åŸŸ?è¿˜æ˜¯ä¸Šä¸‹æ–‡?å…¶å®žéƒ½ä¸æ˜¯,è®©æˆ‘ä»¬æ¥ä¸€èµ·æ­å¼€thisçš„é¢çº± thisæ˜¯ä»€ä¹ˆ thiså®žé™…ä¸Šæ˜¯å‡½æ•°å¯¹è±¡è°ƒç”¨æ‰§è¡Œæ—¶æ‰€å¤„çš„ä¸Šä¸‹æ–‡å¯¹è±¡(è¿™é‡Œçš„ä¸Šä¸‹æ–‡å¯¹è±¡æŒ‡çš„å¹¶ä¸æ˜¯ä½œç”¨åŸŸ) thisæŒ‡å‘åˆ†ç±» thisæŒ‡å‘çš„åˆ†ç±»ä¸€å…±æœ‰å››ç§: 1. æ™®é€šå‡½æ•°è°ƒç”¨æ‰§è¡Œ,é»˜è®¤æŒ‡å‘window 2. ä½¿ç”¨å¯¹è±¡è°ƒç”¨æ‰§è¡Œ,è½¯ç»‘å®šæŒ‡å‘è¯¥å¯¹è±¡ 3. ä½¿ç”¨applyã€callæˆ–è€…bindç»‘å®šåœ¨æŸä¸ªå¯¹è±¡ä¸Šæ‰§è¡Œ,ç¡¬ç»‘å®šæŒ‡å‘è¯¥å¯¹è±¡ 4. ä½¿ç”¨newè¯­æ³•ç³–æž„é€ å™¨è°ƒç”¨æ‰§è¡Œ,newç»‘å®šæŒ‡å‘å‡½æ•°å¯¹è±¡æœ¬èº« ä¾‹å­ä¸€ var a = 99; function foo() { console.log(this.a); } foo(); //åœ¨è¿™é‡Œæ‰“å°: //99 //ç”±äºŽæ˜¯æ™®é€šè°ƒç”¨åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹æ‰§è¡Œ,æ­¤æ—¶çš„thisæŒ‡å‘çš„æ˜¯window, //ç”±æ­¤console.log(window.a),æ‰“å°çš„æ˜¯99 ä¾‹å­äºŒ var $a = &apos;world&apos;; var $obj = { $a: &apos;9hello9&apos;, b() { console.log(this.$a); } }; $obj.b(); //åœ¨è¿™é‡Œæ‰“å°: //9hello9 //ç”±äºŽæ˜¯ä½¿ç”¨å¯¹è±¡è°ƒç”¨æ‰§è¡Œ,è½¯ç»‘å®šthisæŒ‡å‘è¯¥å¯¹è±¡ //ç”±æ­¤console.log($obj.a),æ‰“å°çš„æ˜¯9hello9 ä¾‹å­ä¸‰ var $a = &apos;6world6&apos;; var $obj = { $a: &apos;9hello9&apos;, b() { console.log(this.$a); } }; var $_obj = { $a: &apos;7fast7&apos; }; $obj.b.apply($_obj); $obj.b.call($_obj); //åœ¨è¿™é‡Œæ‰“å°: //7fast7 //7fast7 //ç”±äºŽæ˜¯ä½¿ç”¨applyã€callæˆ–è€…bindç»‘å®šåœ¨æŸä¸ªå¯¹è±¡ä¸Šè°ƒç”¨æ‰§è¡Œ,ç¡¬ç»‘å®šthisæŒ‡å‘è¯¥å¯¹è±¡ //ç”±æ­¤console.log($_obj.$a),æ‰“å°çš„æ˜¯7fast7 ä¾‹å­å›› var $a = &apos;6world6&apos;; function Fo($a) { this.$a = $a; } var $fo = new Fo(&apos;9hello9&apos;); console.log($fo.$a); //åœ¨è¿™é‡Œæ‰“å°: //9hello9 //ç”±äºŽæ˜¯ä½¿ç”¨newè¯­æ³•ç³–æž„é€ å™¨è°ƒç”¨æ‰§è¡Œ,newç»‘å®šæŒ‡å‘å‡½æ•°å¯¹è±¡æœ¬èº« //ç”±æ­¤console.log($fo.$a),æ‰“å°çš„æ˜¯9hello9 thisæŒ‡å‘ä¼˜å…ˆçº§ thisé»˜è®¤ç»‘å®š &lt; å¯¹è±¡è½¯ç»‘å®š &lt; applyã€callå’Œbindç¡¬ç»‘å®š &lt; newç»‘å®š å¯¹æ¯”å¯¹è±¡è½¯ç»‘å®šå’Œapplyã€callä»¥åŠbindç¡¬ç»‘å®šçš„ä¼˜å…ˆçº§ function bar() { console.log(this.$a); } var $obj = { $a: &quot;5we5&quot;, bar: bar }; var $_obj = { $a: &quot;6happy6&quot; }; $obj.bar.apply($_obj); $obj.bar.call($_obj); //åœ¨è¿™é‡Œæ‰“å°: //6happy6 //6happy6 //ç”±æ­¤å¯è§,applyã€callä»¥åŠbindç¡¬ç»‘å®šçš„ä¼˜å…ˆçº§å¤§äºŽå¯¹è±¡è½¯ç»‘å®š å¯¹æ¯”å¯¹è±¡è½¯ç»‘å®šå’Œnewç»‘å®šçš„ä¼˜å…ˆçº§ function bar() { console.log(this.$a); } var $obj = { $a: &quot;4snake4&quot;, bar: bar }; var $result = new $obj.bar(); //åœ¨è¿™é‡Œæ‰“å°: //undefined //ç”±æ­¤å¯è§,newç»‘å®šçš„ä¼˜å…ˆçº§å¤§äºŽå¯¹è±¡è½¯ç»‘å®š å¯¹æ¯”applyã€callä»¥åŠbindç¡¬ç»‘å®šå’Œnewç»‘å®šçš„ä¼˜å…ˆçº§,ç”±äºŽapply/callå’Œnewä¸èƒ½åŒæ—¶ä½¿ç”¨,æ‰€ä»¥æˆ‘ä»¬æ¼”ç¤ºå°±ä½¿ç”¨bindç¡¬ç»‘å®šä¸Žnewç»‘å®šè¿›è¡Œä¼˜å…ˆçº§æ¯”è¾ƒ function Fo($a) { this.$a = $a; } var bar = { $a: &quot;8money8&quot; }; var fBind = Fo.bind(bar); var _bind = new fBind(&quot;3sheep3&quot;); console.log(_bind.$a); //åœ¨è¿™é‡Œæ‰“å°: //3sheep3 //ç”±æ­¤å¯è§,newç»‘å®šçš„ä¼˜å…ˆçº§å¤§äºŽapplyã€callä»¥åŠbindç¡¬ç»‘å®š polyfillå…¼å®¹æ¨¡æ‹Ÿbindç¡¬ç»‘å®š if(!Function.prototype.bind) { Function.prototype.bind = function (context) { if(typeof this !== &quot;function&quot;) { throw new TypeError(&quot;è¢«ç»‘å®šçš„å¯¹è±¡å¹¶ä¸æ˜¯å‡½æ•°å¯¹è±¡!&quot;); } let self = this, args = Array.from(arguments), fBind; args.shift(); function F() {} fBind = function () { let innerArgs = Array.from(arguments); return self.apply(this instanceof fBind ? this : context, [...args, ...innerArgs]); }; F.prototype = self.prototype; fBind.prototype = new F(); return fBind; }; } //polyfillå…¼å®¹æ¨¡æ‹Ÿbindç¡¬ç»‘å®šå¤§æ¦‚ä¸Šå°±æ˜¯å¦‚æ­¤ //æµ‹è¯•ç¡¬ç»‘å®š,éžnewç»‘å®šæ¨¡å¼ function Person(name, age) { this.name = name; this.age = age; } var $obj = { name: &quot;Gary&quot;, age: 26 }; var $_obj = Person.bind($obj); var $obj_ano = { name: &quot;Clay yin&quot;, age: 29, $_obj }; var $obj_empty = {}; $_obj(&quot;wenkai.yin&quot;, 27); console.log($obj.name, $obj.age); $obj_ano.$_obj(&quot;yin.wenkai&quot;, 25); console.log($obj.name, $obj.age); console.log($obj_ano.name, $obj_ano.age); $_obj.apply($obj_empty, [&quot;Gary Yin&quot;, 24]); console.log($obj_empty.name, $obj_empty.age); console.log($obj.name, $obj.age); //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin 27 //yin.wenkai 25 //Clay yin 29 //undefined undefined //Gary Yin 24 //æµ‹è¯•ç¡¬ç»‘å®š,newç»‘å®šæ¨¡å¼ function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function () { console.log(`hello, I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; var obj = { name: &quot;Gary Yin&quot;, age: 24 }; var fBind = Person.bind(obj); var person = new fBind(&quot;wenkai.yin&quot;, 26); console.log(person.name, person.age); person.introduce(); console.log(obj.name, obj.age); //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin 26 //hello, I&apos;m wenkai.yin, 24 year&apos;s old //Gary Yin 24 polyfillå…¼å®¹æ¨¡æ‹ŸsoftBindè½¯ç»‘å®š Function.prototype.softBind = function (context) { if(typeof this !== &quot;function&quot;) { throw new TypeError(&quot;è¢«ç»‘å®šçš„å¯¹è±¡å¹¶ä¸æ˜¯å‡½æ•°å¯¹è±¡!&quot;); } var self = this, args = Array.from(arguments), fBind; args.shift(); function F() {} fBind = function () { var innerArgs = Array.from(arguments); return self.apply((!this || this === window) ? context : this, [...args, ...innerArgs]); }; F.prototype = self.prototype; fBind.prototype = new F(); return fBind; }; //polyfillå…¼å®¹æ¨¡æ‹ŸsoftBindè½¯ç»‘å®šå¤§æ¦‚ä¸Šå°±æ˜¯å¦‚æ­¤ //æµ‹è¯•è½¯ç»‘å®š,éžnewç»‘å®šæ¨¡å¼ function Person(name, age) { this.name = name; this.age = age; } var $obj = { name: &quot;Gary&quot;, age: 26 }; var $_obj = Person.softBind($obj); $_obj(&quot;wenkai.yin&quot;, 27); console.log($obj.name, $obj.age); var $obj_ano = { name: &quot;Clay yin&quot;, age: 29, $_obj }; var $obj_empty = {}; $obj_ano.$_obj(&quot;Gary Yin&quot;, 28); console.log($obj_ano.name, $obj_ano.age); console.log($obj.name, $obj.age); $_obj.apply($obj_empty, [&quot;yin.wenkai&quot;, 24]); console.log($obj_empty.name, $obj_empty.age); console.log($obj.name, $obj.age); //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin 27 //Gary Yin 28 //wenkai.yin 27 //yin.wenkai 24 //wenkai.yin 27 //æµ‹è¯•è½¯ç»‘å®š,newç»‘å®šæ¨¡å¼ function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function () { console.log(`hello, I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; var $obj = { name: &quot;Clay yin&quot;, age: 29 }; var $_obj = Person.bind($obj); var person = new Person(&quot;Gary_yin&quot;, 22); console.log(person.name, person.age); person.introduce(); console.log($obj.name, $obj.age); //åœ¨è¿™é‡Œæ‰“å°: //Gary_yin 22 //hello, I&apos;m Gary_yin, 22 year&apos;s old //Clay yin 29 polyfillå…¼å®¹æ¨¡æ‹Ÿnewç»‘å®š function _new() { var args = Array.from(arguments), Collapse = args.shift(), _obj = {}; _obj.__proto__ = Collapse.prototype; var target = Collapse.apply(_obj, args); return typeof target === &quot;object&quot; ? target : _obj; } //æµ‹è¯•æ¨¡æ‹Ÿnewç»‘å®š function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function() { console.log(`hello, I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; var person = _new(Person, &quot;Gary&quot;, 26); console.log(person.name, person.age); person.introduce(); console.log(Object.getPrototypeOf(person) === Person.prototype); console.log(Person.prototype.isPrototypeOf(person)); //åœ¨è¿™é‡Œæ‰“å°: //Gary 26 //hello, I&apos;m Gary, 26 year&apos;s old //true //true æ³¨æ„ç‚¹ thisä¸Žå‡½æ•°è°ƒç”¨æ‰§è¡Œçš„ä½ç½®çš„ä¸Šä¸‹æ–‡å¯¹è±¡æ¯æ¯ç›¸å…³,æœ‰æ—¶å€™åƒä¸‡ä¸è¦è¢«ä¸€äº›éšœçœ¼æ³•è’™è”½ ä¾‹å­ä¸€ var name = &quot;Gary Yin&quot;; function bar() { console.log(this.name); } var obj = { name: &quot;wenkai.yin&quot;, bar }; var _bar = obj.bar; _bar(); //åœ¨è¿™é‡Œæ‰“å°: //Gary Yin //æ­¤æ—¶barå‡½æ•°è°ƒç”¨æ‰§è¡Œä½ç½®çš„ä¸Šä¸‹æ–‡å¯¹è±¡,å¹¶ä¸æ˜¯å¯¹è±¡è½¯ç»‘å®š,è€Œæ˜¯å…¨å±€å¯¹è±¡window ä¾‹å­äºŒ function say() { console.log(this.name); } var obj = { name: &quot;obj_one&quot; }; var objTwo = { name: &quot;obj_two&quot; }; var objThree = { name: &quot;obj_three&quot; }; var foo = say.bind(obj).bind(objTwo).bind(objThree); foo(); //åœ¨è¿™é‡Œæ‰“å°: //obj_one //æ­¤æ—¶sayå‡½æ•°è°ƒç”¨æ‰§è¡Œthisåªç¡¬ç»‘å®šæŒ‡å‘äº†ä¸€å±‚ä¸Šä¸‹æ–‡å¯¹è±¡,é‚£å°±æ˜¯obj,å‰©ä¸‹çš„ä¸¤å±‚ç¡¬ç»‘å®š,éƒ½æ˜¯bindç¡¬ç»‘å®šå†…éƒ¨è¿”å›žçš„å‡½æ•°å¯¹è±¡fBindè¿›è¡Œçš„,ä¸Žsayå‡½æ•°æ²¡æœ‰ä»»ä½•å…³ç³» ä¾‹å­ä¸‰ function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function() { console.log(`hello, I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; var $obj = { name: &quot;Gary&quot;, age: 26 }; var fBind = Person.bind($obj); var person = new fBind(&quot;wenkai.yin&quot;, 28); console.log(person.name, person.age); person.introduce(); console.log($obj.name, $obj.age); //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yn 28 //hello, I&apos;m wenkai.yin, 28 year&apos;s old //Gary 26 //æ ¹æ®polyfillå…¼å®¹æ¨¡æ‹Ÿçš„bind,æˆ‘ä»¬å¯ä»¥çœ‹å‡º,å½“thisæŒ‡å‘å…¶æž„é€ å™¨fBindæ—¶,ä¹Ÿå°±æ˜¯newè¿”å›žçš„å‡½æ•°,è¿›è¡Œæž„é€ è°ƒç”¨æ—¶,å¤–éƒ¨ç»‘å®šçš„å‡½æ•°å¯¹è±¡çš„thiså°±ä¸ä¼šæŒ‡å‘ç»‘å®šçš„å¯¹è±¡,è€Œæ˜¯ä¼šæŒ‡å‘æž„é€ å™¨fBind,æ‰€ä»¥å¼•ç”¨å¯¹è±¡personå§”æ‰˜å…³è”æŒ‡å‘fBind,å¹¶é€šè¿‡åŽŸåž‹é“¾æŒ‡å‘Personã€‚ //äºŽæ˜¯,åç§°å’Œå¹´é¾„æ˜¯å¤–éƒ¨å‚æ•°wenkai.yinå’Œ28,å¯ä»¥è°ƒç”¨æ‰§è¡ŒåŽŸåž‹é“¾ä¸Šé¢çš„å‡½æ•°introduce,è€Œ$objå¯¹è±¡ä¸Šé¢çš„å±žæ€§å€¼å¹¶æ²¡æœ‰å‘ç”Ÿä»»ä½•æ”¹å˜ ä¸‰ã€åŽŸåž‹é“¾åŽŸåž‹é“¾,ä»Žæœ¬è´¨ä¸Šæ¥è®²,å°±æ˜¯å¼•ç”¨å¯¹è±¡ä¸Žæ™®é€šå¯¹è±¡ã€å¼•ç”¨å¯¹è±¡ä¸Žå‡½æ•°å¯¹è±¡ä¹‹é—´å§”æ‰˜å…³è”,å½“å»ºç«‹èµ·å§”æ‰˜å…³è”åŽ,å¼•ç”¨å¯¹è±¡æœ¬èº«çš„éšå¼åŽŸåž‹protoä¸Žæž„é€ å‡½æ•°çš„æ˜¾å¼åŽŸåž‹prototypeå°±ä¼šå½¢æˆå¼•ç”¨å…³ç³»,ä½¿å¾—å¼•ç”¨å¯¹è±¡ä¸ä»…å¯ä»¥è°ƒç”¨æœ¬èº«è¢«æ˜¾å¼ç»‘å®šçš„å±žæ€§å€¼,ä¹Ÿå¯ä»¥è¿½æœ¬æº¯æºçš„é€šè¿‡åŽŸåž‹é“¾è°ƒç”¨æž„é€ å‡½æ•°åŽŸåž‹é“¾ä¸Šé¢çš„å±žæ€§å’Œå‡½æ•°æ–¹æ³•ã€‚ ä¼ªç»§æ‰¿ ç»§æ‰¿åœ¨ä¼ ç»Ÿé¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­æ˜¯å­ç±»ç›´æŽ¥å¤åˆ¶çˆ¶ç±»çš„å±žæ€§å’Œæ–¹æ³•,å¤åˆ¶åŽ,å­ç±»ä¸Šæ˜¯ç›´æŽ¥å­˜åœ¨å…¶çˆ¶ç±»çš„å±žæ€§å’Œæ–¹æ³•çš„,ä½†æ˜¯åœ¨JSä¸­,ç»§æ‰¿å¹¶ä¸æ˜¯å¤åˆ¶,è€Œæ˜¯å§”æ‰˜å…³è”,é€šè¿‡åŽŸåž‹é“¾å‘çˆ¶çº§æœç´¢æŸ¥æ‰¾,ç›´è‡³ç»§æ‰¿æ ‘çš„é¡¶ç«¯Object.prototypeä¹Ÿå°±æ˜¯Objectå¯¹è±¡çš„æ˜¾å¼åŽŸåž‹ã€‚ ä¾‹å­ä¸€ function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function () { console.log(`hello, I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; function Gary(name, age, hobby) { Person.call(this, name, age); this.hobby = hobby; } //ä»¥ä¸‹ä¸‰è¡Œå°±æ˜¯JSä¼ªç»§æ‰¿å§”æ‰˜å…³è”çš„ç²¾é«“s //å°†å­ç±»çš„æ˜¾å¼åŽŸåž‹çš„éšå¼åŽŸåž‹æŒ‡å‘çˆ¶ç±»çš„æ˜¾å¼åŽŸåž‹ function F() {} F.prototype = Person.prototype; Gary.prototype = new F(); Gary.prototype.hobbyMine = function () { console.log(`${this.name}, I love ${this.hobby}`); }; var gary = new Gary(&quot;wenkai.yin&quot;, 26, &quot;program&quot;); console.log(gary.name, gary.age, gary.hobby); gary.introduce(); gary.hobbyMine(); //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin 26 program //hello, I&apos;m wenkai.yin, 26 year&apos;s old //wenka.yin, I love program ä¾‹å­äºŒ //è¿˜æ˜¯åŒæ ·å‰§æƒ…çš„ä¾‹å­,ä¸è¿‡è¿™ä¸€æ¬¡æˆ‘ä»¬è¦æ¢ä¸€ä¸‹ç»§æ‰¿æ–¹å¼ //å¹¶ä¸”æ·±ç©¶ä¸€ä¸‹å†…éƒ¨çš„å§”æ‰˜å…³è”åŽŸåž‹é“¾ function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function () { console.log(`hello, I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; function Gary(name, age, hobby) { Person.call(this, name, age); this.hobby = hobby; } //ä»¥ä¸‹ä¸‰è¡Œå°±æ˜¯JSä¼ªç»§æ‰¿å§”æ‰˜å…³è”çš„ç²¾é«“ //å°†å­ç±»çš„æ˜¾å¼åŽŸåž‹çš„éšå¼åŽŸåž‹æŒ‡å‘çˆ¶ç±»çš„æ˜¾å¼åŽŸåž‹ Gary.prototype = Object.create(Person.prototype); Gary.prototype.hobbyMine = function () { console.log(`${this.name}, I love ${this.hobby}`); }; var gary = new Gary(&quot;wenkai.yin&quot;, 26, &quot;program&quot;); console.log(gary.name, gary.age, gary.hobby); gary.introduce(); gary.hobbyMine(); console.log(gary.__proto__ === Gary.prototype); console.log(Gary.prototype.__proto__ === Person.prototype); console.log(Object.getPrototypeOf(gary) === Gary.prototype); console.log(Object.getPrototypeOf(Object.getPrototypeOf(gary)) === Person.prototype); console.log(Gary.prototype.isPrototypeOf(gary)); console.log(Person.prototype.isPrototypeOf(Gary.prototype)); //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin 26 program //hello, I&apos;m wenkai.yin, 26 year&apos;s old //wenkai.yin, I love program //true //true //true //true //true //true //è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªæ–¹æ³•,isPrototypeOfå’ŒgetPrototypeOfã€‚ //a.isPrototypeOf(b)æ˜¯åˆ¤æ–­bæ˜¯å¦æ˜¯åœ¨açš„åŽŸåž‹é“¾ä¸Š,å¯ä»¥ç”¨äºŽæ£€æŸ¥å¼•ç”¨å¯¹è±¡å’Œå…¶ä»–ä»»æ„å¯¹è±¡ä¹‹é—´çš„å§”æ‰˜å…³è”å…³ç³» //Object.getPrototypeOf(b) === aä¸Žb.__proto__ === açš„æ•ˆæžœç›¸åŒçš„,Object.getPrototypeOf(b)ä¹Ÿåªä¸è¿‡æ˜¯æå–äº†bå¯¹è±¡ä¸­çš„éšå¼åŽŸåž‹ä¸Žaå¯¹è±¡æˆ–è€…aå‡½æ•°å¯¹è±¡çš„æ˜¾å¼åŽŸåž‹è¿›è¡Œæ¯”å¯¹ã€‚ polyfillå…¼å®¹æ¨¡æ‹ŸObject.createæ–¹æ³• ä»Žpolyfillå…¼å®¹æ¨¡æ‹ŸObject.createæ–¹æ³•çš„æºä»£ç æ¥çœ‹,åˆ©ç”¨çš„æ˜¯åŽŸåž‹é“¾çš„æœºåˆ¶,å°†å­ç±»ä¸Žçˆ¶ç±»æˆ–è€…è¯´æ˜¯å­å¯¹è±¡ä¸Žçˆ¶å¯¹è±¡å§”æ‰˜å…³è”èµ·æ¥ã€‚ä½¿ç”¨Object.createçš„ä¼˜åŠ¿,é¦–å…ˆ,ä¸éœ€è¦å†åŽ»è€ƒè™‘å§”æ‰˜å…³è”æž„é€ è°ƒç”¨æ—¶çš„å‚æ•°é—®é¢˜,ä½¿ç”¨ç¬¬ä¸‰å‡½æ•°å¯¹è±¡,ä¹Ÿå°±æ˜¯Få‡½æ•°ä¸­è½¬æ‰¿æŽ¥;ç¬¬äºŒ,é€‚ç”¨äºŽå¼•ç”¨å¯¹è±¡ä¸Žä»»æ„å¯¹è±¡(æ™®é€šå¯¹è±¡ã€å‡½æ•°å¯¹è±¡)ä¹‹é—´çš„å§”æ‰˜å…³è”ã€‚ if(!Object.create) { Object.create = function(o) { function F() {} F.prototype = o; return new F(); }; } ä¾‹å­ä¸€ var a = { }; var b = { age: &quot;b&quot; }; a = Object.create(b); console.log(a.age); //åœ¨è¿™é‡Œæ‰“å°: //b ä¾‹å­äºŒ function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function () { console.log(`hello, I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; function Gary(name, age, hobby) { Person.call(this, name, age); this.hobby = hobby; } //ä»¥ä¸‹ä¸‰è¡Œå°±æ˜¯JSä¼ªç»§æ‰¿å§”æ‰˜å…³è”çš„ç²¾é«“ //å°†å­ç±»çš„æ˜¾å¼åŽŸåž‹çš„éšå¼åŽŸåž‹æŒ‡å‘çˆ¶ç±»çš„æ˜¾å¼åŽŸåž‹ Gary.prototype = Object.create(Person.prototype); Gary.prototype.hobbyMine = function () { console.log(`${this.name}, I love ${this.hobby}`); }; var gary = new Gary(&quot;wenkai.yin&quot;, 26, &quot;program&quot;); console.log(gary.name, gary.age, gary.hobby); gary.introduce(); gary.hobbyMine(); //åœ¨è¿™é‡Œæ‰“å°: //wenka.yin 26 program //hello, I&apos;m wenkai.yin, 26 year&apos;s old //wenkai.yin, I love program æ³¨æ„ç‚¹ instanceofé€šå¸¸æ˜¯æ£€æŸ¥å¼•ç”¨å¯¹è±¡æ˜¯å¦åœ¨æŸä¸€ä¸ªå‡½æ•°å¯¹è±¡çš„åŽŸåž‹é“¾ä¸Š,ä¸è¿‡ä¹Ÿåªæ˜¯ä½œç”¨äºŽå¼•ç”¨å¯¹è±¡å’Œå‡½æ•°å¯¹è±¡ä¹‹é—´,å¹¶ä¸èƒ½æ£€æŸ¥å¼•ç”¨å¯¹è±¡å’Œæ™®é€šå¯¹è±¡ä¹‹é—´çš„å§”æ‰˜å…³è”å…³ç³» ä¾‹å­ä¸€ function Person(name, age) { this.name = name; this.age = age; } var gary = new Person(&quot;wenkai.yin&quot;, 26); console.log(gary instanceof Person); console.log(gary instanceof Object); //åœ¨è¿™é‡Œæ‰“å°: //true //true ä¾‹å­äºŒ var a = { name: &quot;Gary&quot;, age: 26 }; var b = { name: &quot;wenkai.yin&quot;, age: 28 }; a = Object.create(b); console.log(Object.getPrototypeOf(a) === b); console.log(b.isPrototypeOf(a)); //åœ¨è¿™é‡Œæ‰“å°: //true //true //å½“é‡åˆ°æ£€æŸ¥å¼•ç”¨å¯¹è±¡å’Œæ™®é€šå¯¹è±¡ä¹‹é—´çš„å§”æ‰˜å…³è”,åˆ¤æ–­å¼•ç”¨å¯¹è±¡æ˜¯å¦åœ¨æ™®é€šå¯¹è±¡çš„åŽŸåž‹é“¾ä¸Šæ—¶, //å°±ä¸èƒ½ä½¿ç”¨instanceof,æˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯isPrototypeOf,b.isPrototypeOf(a) åŽŸåž‹é“¾çš„é¡¶éƒ¨,ä¹Ÿå°±æ˜¯Object.prototype,Objectå¯¹è±¡çš„æ˜¾å¼åŽŸåž‹,é‚£æŒ‰ç…§åŽŸåž‹é“¾çš„è§„åˆ™æ¥çœ‹,åŽŸåž‹é“¾çš„é¡¶éƒ¨Objectå¯¹è±¡çš„æ˜¾å¼åŽŸåž‹çš„éšå¼åŽŸåž‹æŒ‡å‘å“ªå„¿å‘¢? ç­”æ¡ˆæ˜¯null function Person(name, age) { this.name = name; this.age = age; } var gary = new Person(&quot;wenkai.yin&quot;, 26); console.log(Object.getPrototypeOf(gary) === Person.prototype); console.log(Object.getPrototypeOf(Person.prototype) === Object.prototype); console.log(Object.getPrototypeOf(Object.prototype) === null); console.log(Person.prototype.isPrototypeOf(gary)); console.log(Object.prototype.isPrototypeOf(Person.prototype)); //åœ¨è¿™é‡Œæ‰“å°: //true //true //true //true //true å››ã€å¯¹è±¡å®šä¹‰å¯¹è±¡æœ‰ä¸¤ç§æ–¹å¼,ä¸€ç§æ˜¯æž„é€ è°ƒç”¨è¿›è¡Œå®šä¹‰,è¿˜æœ‰ä¸€ç§æ˜¯ä½¿ç”¨å­—é¢é‡è¯­æ³•ç³–çš„å½¢å¼å®šä¹‰ã€‚ ä¾‹å­ä¸€ var obj = new Object(); obj.name = &quot;Gary&quot;; obj.age = 24; console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary&quot;, age: 24} //ä½¿ç”¨æž„é€ è°ƒç”¨å®šä¹‰,æ·»åŠ å±žæ€§æˆ–è€…æ–¹æ³•,å¿…é¡»ä½¿ç”¨.æˆ–è€…[å­—ç¬¦ä¸²]çš„å½¢å¼,ä¸€è¡Œä¸€è¡Œæ·»åŠ ,éžå¸¸ç¹ç ä¾‹å­äºŒ var obj = { name: &quot;Gary Yin&quot;, age: 26 }; console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary Yin&quot;, age: 26} //ä½¿ç”¨å­—é¢é‡è¯­æ³•ç³–å®šä¹‰,æ‰¹é‡æ·»åŠ å±žæ€§æˆ–è€…æ–¹æ³•,ä¸€èˆ¬å®šä¹‰å¯¹è±¡,åŸºæœ¬éƒ½è¿™æ ·ä½¿ç”¨ æ·»åŠ æˆ–è€…ä¿®æ”¹å¯¹è±¡å±žæ€§æˆ–è€…æ–¹æ³• ä¾‹å­ä¸€ var obj = { name: &quot;Gary Yin&quot;, age: 26 }; obj.name = &quot;wenkai.yin&quot;; obj.hobby = &quot;basketball&quot;; obj.sexy = &quot;men&quot;; console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;wenkai.yin&quot;, age: 26, hobby: &quot;basketball&quot;, sexy: &quot;men&quot;} //è¿™ç§.å½¢å¼æ·»åŠ æˆ–è€…ä¿®æ”¹å¯¹è±¡å±žæ€§æˆ–è€…æ–¹æ³•,å¼Šç«¯åœ¨äºŽå±žæ€§åæˆ–è€…æ–¹æ³•å,å¿…é¡»éµå®ˆå®šä¹‰å˜é‡åç§°çš„è§„åˆ™ //ä¹Ÿå°±æ˜¯å¿…é¡»ä»¥å­—æ¯ã€ä¸‹åˆ’çº¿æˆ–è€…$ç¬¦å·å¼€å¤´,ä¸”å±žæ€§åç§°æˆ–è€…æ–¹æ³•åç§°åªå…è®¸ä½¿ç”¨æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿å’Œ$ç¬¦å· ä¾‹å­äºŒ var obj = { name: &quot;Gary Yin&quot;, age: 26 }; obj[&quot;name&quot;] = &quot;wenkai.yin&quot;; obj[&quot;1hobby&quot;] = &quot;basketball&quot;; obj[&quot;sexy&quot;] = &quot;men&quot;; obj[&quot;@#$%&quot;] = &quot;@#$%&quot;; console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;wenkai.yin&quot;, age: 26, 1hobby: &quot;basketball&quot;, sexy: &quot;men&quot;, @#$%: &quot;@#$%&quot;} //è¿™ç§[å­—ç¬¦ä¸²]å½¢å¼æ·»åŠ æˆ–è€…ä¿®æ”¹å¯¹è±¡å±žæ€§æˆ–è€…æ–¹æ³•,å±žæ€§åæˆ–è€…æ–¹æ³•åå¯ä»¥ä½¿ç”¨ä»»æ„çš„å­—ç¬¦ä¸²è¿›è¡Œå®šä¹‰,æ²¡æœ‰ä»»ä½•çš„é™åˆ¶,å…¼å®¹æ‰€æœ‰çš„å­—ç¬¦ä¸²(åŒ…æ‹¬æ±‰å­—) ä¾‹å­ä¸‰ var obj = { }; Object.defineProperty(obj, &quot;name&quot;, { value: &quot;wenkai.yin&quot;, writable: true, enumerable: true, configurable: true }); console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;wenkai.yin&quot;} Object.defineProperties(obj, { age: { value: 26, writable: true, enumerable: true, configurable: true }, hobby: { value: &quot;program&quot;, writable: true, enumerable: true, configurable: true } }); console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;wenkai.yin&quot;, age: 26, hobby: &quot;program&quot;} //definePropertyå’ŒdefinePropertiesæ˜¯æ·»åŠ å’Œä¿®æ”¹é…ç½®å¯¹è±¡å±žæ€§æ–¹æ³•æœ€ç»†è‡´çš„ä¸¤ç§æ–¹å¼,definePropertyåªèƒ½æ·»åŠ å’Œä¿®æ”¹ä¸€é¡¹å±žæ€§å’Œæ–¹æ³•,è€ŒdefinePropertieså¯ä»¥æ‰¹é‡æ·»åŠ å’Œä¿®æ”¹å±žæ€§å’Œæ–¹æ³• èŽ·å–å¯¹è±¡å±žæ€§å’Œæ–¹æ³•çš„é…ç½®ä¿¡æ¯ ä¾‹å­ä¸€ var obj = { name: &quot;wenkai.yin&quot;, age: 26, hobby: &quot;program&quot; }; console.log(Object.getOwnPropertyDescriptors(obj)); //åœ¨è¿™é‡Œæ‰“å°: //{ // name: { // configurable: true, // enumerable: true, // value: &quot;wenkai.yin&quot;, // writable: true // }, // age: { // configurable: true, // enumerable: true, // value: 26, // writable: true // }, // hobby: { // configurable: true, // enumerable: true, // value: &quot;program&quot;, // writable: true // } //} //æ‰¹é‡èŽ·å–å¯¹è±¡å±žæ€§å’Œæ–¹æ³•çš„é…ç½®ä¿¡æ¯ console.log(Object.getOwnPropertyDescriptor(obj, &quot;age&quot;)); //åœ¨è¿™é‡Œæ‰“å°: //{ // configurable: true, // enumerable: true, // value: 26, // writable: true //} //èŽ·å–å¯¹è±¡å•ä¸ªå±žæ€§æˆ–è€…æ–¹æ³•çš„é…ç½®ä¿¡æ¯ èŽ·å–å¯¹è±¡çš„å±žæ€§å’Œæ–¹æ³•çš„é…ç½®ä¿¡æ¯åŽ,å°†è¦è§£é‡Šä¸€ä¸‹è¿™äº›é…ç½®ä¿¡æ¯çš„ä½œç”¨,valueå°±æ˜¯å±žæ€§å€¼,writableæ˜¯ç”¨æ¥æŽ§åˆ¶å±žæ€§æˆ–è€…æ–¹æ³•æ˜¯å¦å¯ä¿®æ”¹å€¼çš„å¼€å…³,configurableæ˜¯ç”¨æ¥æŽ§åˆ¶å±žæ€§æˆ–è€…æ–¹æ³•æ˜¯å¦å¯é…ç½®ã€å¯æ·»åŠ ä»¥åŠå¯åˆ é™¤,enumerableæ˜¯ç”¨æ¥æŽ§åˆ¶å±žæ€§æˆ–è€…æ–¹æ³•æ˜¯å¦å¯æžšä¸¾ ä¾‹å­ä¸€ var obj = { name: &quot;Gary&quot; }; Object.defineProperties(obj, { age: { value: 26, enumerable: false, writable: true, configurable: true }, hobby: { value: &quot;program&quot;, enumerable: true, writable: true, configurable: true } }); for(var key in obj) { console.log(key); } //åœ¨è¿™é‡Œæ‰“å°: //name //program //å±žæ€§çš„enumerableå¯æžšä¸¾å¦‚æžœä¸ºfalse,éåŽ†å¯¹è±¡çš„å±žæ€§åç§°,å°±ä¸ä¼šå‡ºçŽ° for(let key of Object.keys(obj)) { console.log(key); } //åœ¨è¿™é‡Œæ‰“å°: //name //program //å±žæ€§çš„enumerableå¯æžšä¸¾å¦‚æžœä¸ºfalse,éåŽ†å¯¹è±¡çš„å±žæ€§åç§°,å°±ä¸ä¼šå‡ºçŽ° console.log(Object.getOwnPropertyNames(obj)); //åœ¨è¿™é‡Œæ‰“å°: //[&quot;name&quot;, &quot;age&quot;, program&quot;] console.log(obj.hasOwnProperty(&quot;age&quot;)); //åœ¨è¿™é‡Œæ‰“å°: //true console.log(Reflect.ownKeys(obj)); //åœ¨è¿™é‡Œæ‰“å°: //[&quot;name&quot;, &quot;age&quot;, &quot;program&quot;] //ç”±æ­¤å¯å¾—å‡ºç»“è®º,é™¤äº†for...inã€Object.keys(obj)ã€Object.values(obj)å’ŒObject.entries(obj)å—æŽ§åˆ¶æ˜¯å¦å¯æžšä¸¾çš„å±žæ€§enumerableå½±å“ä¹‹å¤–,å…¶ä»–æ–¹å¼éƒ½å¯ä»¥èŽ·å–åˆ°æŽ§åˆ¶æ˜¯å¦å¯æžšä¸¾å±žæ€§enumerableä¸ºfalseçš„å±žæ€§åç§° //for...inã€Object.keys(obj)ã€Object.values(obj)å’ŒObject.entries(obj)è¿˜æ˜¯èƒ½èŽ·å–åŽŸåž‹é“¾ä¸Šçš„å±žæ€§å’Œæ–¹æ³•çš„éåŽ†æ–¹å¼ ä¾‹å­äºŒ var obj = { name: &quot;Gary&quot; }; Object.defineProperties(obj, { age: { value: 26, enumerable: true, writable: true, configurable: true }, hobby: { value: &quot;program&quot;, enumerable: true, writable: false, configurable: true } }); obj.name = &quot;wenkai.yin&quot;; obj.hobby = &quot;basketball&quot;; console.log(obj); //Object {name: &quot;wenkai.yin&quot;, age: 26, hobby: &quot;program&quot;} //å½“è®¾ç½®äº†æŽ§åˆ¶å±žæ€§å€¼æ˜¯å¦å¯ä¿®æ”¹çš„writableä¸ºfalseæ—¶,å±žæ€§å€¼ä¾¿ä¸å¯è¢«æ”¹å˜ //ä¸”å½“writableè®¾ç½®ä¸ºfalseæ—¶,ä¸å¯è¢«å†æ¬¡è®¾ç½®ä¸ºtrue Object.defineProperty(obj, &quot;hobby&quot;, { value: &quot;program&quot;, writable: true, configurable: true, enumerable: true }); //åœ¨è¿™é‡Œæ‰“å°: //ç›´æŽ¥æŠ¥é”™,property can not redefine: hobby ä¾‹å­ä¸‰ var obj = { name: &quot;Gary&quot; }; Object.defineProperties(obj, { age: { value: 26, enumerable: true, writable: true, configurable: true }, hobby: { value: &quot;program&quot;, enumerable: true, writable: true, configurable: false } }); delete obj.age; delete obj.program; console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary&quot;, hobby: &quot;program&quot;} Object.defineProperty(obj, &quot;hobby&quot;, { value: &quot;basketball&quot;, writable: true, enumerable: true, configurable: true }); //åœ¨è¿™é‡Œæ‰“å°: //ç›´æŽ¥æŠ¥é”™,property can not redefine: hobby ä¾‹å­å›› var obj = { name: &quot;Gary&quot;, age: 26, hobby: &quot;basketball&quot; }; Object.preventExtensions(obj); obj.sexy = &quot;men&quot;; obj.hobby = &quot;program&quot;; console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary&quot;, age: 26, hobby: &quot;program&quot;} //preventExtensionsæ–¹æ³•ä½¿å¾—objå¯¹è±¡ä¸å¯æ·»åŠ æ–°çš„å±žæ€§ ä¾‹å­äº” var obj = { name: &quot;Gary&quot;, age: 26, hobby: &quot;basketball&quot; }; Object.seal(obj); obj.sexy = &quot;men&quot;; obj.hobby = &quot;program&quot; delete obj.age; delete obj.name; console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary&quot;, age: 26, hobby: &quot;program&quot;} for(var key in obj) { console.log(key); } //åœ¨è¿™é‡Œæ‰“å°: //name //age //program Object.defineProperty(obj, &quot;name&quot;, { value: &quot;wenkai.yin&quot;, configurable: true, writable: true, enumerable: true }); console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //ç›´æŽ¥æŠ¥é”™: property can not redefine: name //ç”±æ­¤å¯ä»¥å¾—å‡ºç»“è®º: sealæ–¹æ³•ä½¿å¾—objå¯¹è±¡æ‰€æœ‰å±žæ€§ä¸å¯é…ç½®å¯¹è±¡å±žæ€§å’Œæ–¹æ³•ä¿¡æ¯ã€ä¸å¯åˆ é™¤å¯¹è±¡å±žæ€§,ä¸”ä¸å¯æ·»åŠ å¯¹è±¡å±žæ€§,ä½†æ˜¯å±žæ€§åç§°è¿˜æ˜¯å¯ä»¥æžšä¸¾çš„,åŽŸå±žæ€§å€¼è¿˜æ˜¯å¯ä»¥ä¿®æ”¹çš„,ä¹Ÿå°±æ˜¯è¯´sealæ–¹æ³•ä½¿å¾—objå¯¹è±¡æ‰€æœ‰å±žæ€§çš„configurableç½®ä¸ºfalse,æ‰€æœ‰å±žæ€§çš„writableå’Œenumerableè¿˜æ˜¯ç»´æŒåŽŸæ¥çš„çŠ¶æ€ ä¾‹å­å…­ var obj = { name: &quot;Gary&quot;, age: 26, hobby: &quot;basketball&quot; }; Object.freeze(obj); obj.sexy = &quot;men&quot;; obj.hobby = &quot;program&quot; delete obj.age; delete obj.name; console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary&quot;, age: 26, hobby: &quot;basketball&quot;} for(var key in obj) { console.log(key); } //åœ¨è¿™é‡Œæ‰“å° //name //age //hobby Object.defineProperty(obj, &quot;name&quot;, { value: &quot;wenkai.yin&quot;, configurable: true, writable: true, enumerable: true }); console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //ç›´æŽ¥æŠ¥é”™: property can not redefine: name //ç”±æ­¤å¯ä»¥å¾—å‡ºç»“è®º: freezeæ–¹æ³•ä½¿å¾—objå¯¹è±¡ä¸å¯é…ç½®å¯¹è±¡å±žæ€§å’Œæ–¹æ³•ä¿¡æ¯ã€ä¸å¯åˆ é™¤å¯¹è±¡å±žæ€§ã€ä¸å¯æ·»åŠ å¯¹è±¡å±žæ€§,ä¸”ä¸å¯ä¿®æ”¹å¯¹è±¡å±žæ€§å€¼,ä½†æ˜¯å±žæ€§åç§°è¿˜æ˜¯å¯ä»¥æžšä¸¾çš„,ä¹Ÿå°±æ˜¯è¯´freezeæ–¹æ³•ä½¿å¾—objå¯¹è±¡æ‰€æœ‰å±žæ€§çš„configurableå’Œwritableç½®ä¸ºfalse,æ‰€æœ‰å±žæ€§çš„enumerableè¿˜æ˜¯ç»´æŒåŽŸæ¥çš„çŠ¶æ€ å¯¹è±¡éåŽ† ES6è¯­æ³•ä¸­,æ–°å¢žäº†keysã€valuesã€entrieså’ŒReflect.OwnKeyséåŽ†å¯¹è±¡çš„å‡½æ•°æ–¹æ³•,å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨ES5è¯­æ³•ä¸­çš„forâ€¦inã€getOwnPropertyNamesç­‰å½¢å¼å¯¹å¯¹è±¡è¿›è¡ŒéåŽ†,è¿˜æœ‰ä¸€ç§ä½¿ç”¨è¿­ä»£å™¨(Symbol.iterator)çš„æ–¹å¼,è¿™ç§æ–¹å¼éœ€è¦å¼€å‘è€…æ‰‹å†™å¯¹è±¡çš„Symbol.iteratorè¿­ä»£å™¨æ–¹æ³•,å¹¶ä¸å¸¸è§ ä¾‹å­ä¸€ var obj = { name: &quot;wenkai.yin&quot;, age: 26, hobby: &quot;basketball&quot; }; for(let key of Object.keys(obj)) { console.log(key); } //åœ¨è¿™é‡Œæ‰“å°: //name //age //hobby for(let value of Object.values(obj)) { console.log(value); } //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin //26 //basketball for(let [key, value] of Object.entries(obj)) { console.log(key, value); } //åœ¨è¿™é‡Œæ‰“å°: //name wenkai.yin //age 26 //hobby basketball for(let key in obj) { console.log(key); } //åœ¨è¿™é‡Œæ‰“å°: //name //age //hobby ä¾‹å­äºŒ var obj = { name: &quot;wenkai.yin&quot;, age: 26, hobby: &quot;basketball&quot; }; var objNames = Object.getOwnPropertyNames(obj); for(let val of objNames) { console.log(val); } //åœ¨è¿™é‡Œæ‰“å°: //name //age //hobby var objOwnKeys = Reflect.ownKeys(obj); for(let val of objOwnKeys) { console.log(val); } //åœ¨è¿™é‡Œæ‰“å°: //name //age //hobby ä¾‹å­ä¸‰ var obj = { name: &quot;wenkai.yin&quot;, age: 26, hobby: &quot;basketball&quot;, [Symbol.iterator]() { var self = this, index = 0, objArr = Object.keys(self), length = objArr.length; return { next() { return { value: self[objArr[index++]], done: index &gt; length }; } }; } }; for(let val of obj) { console.log(val); } //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin //26 //basketball ç¬”è¯•è®­ç»ƒè‡ªæ­¤ä½ ä¸çŸ¥é“çš„Javascript&lt;ä¸Šç¯‡&gt;æ•´ç†: è¯æ³•ä½œç”¨åŸŸã€thisä»¥åŠåŽŸåž‹å¯¹è±¡é‡ç‚¹éƒ½å·²ç»åˆ’å®Œäº†,ä¸‹é¢æˆ‘ä»¬ä¼šè¿›å…¥ä¸Šç¯‡çš„ç¬”è¯•è®­ç»ƒé˜¶æ®µã€‚ ç¬”è¯•ä¸€ var a = 20; var foo = { a: 10, getA: function () { return this.a; } }; var _getA = foo.getA; console.log(_getA()); //åœ¨è¿™é‡Œæ‰“å°: //20 ç¬”è¯•äºŒ var timer1 = (cb, time) =&gt; { (function loop() { cb(); setTimeout(loop, time); })(); }; var timer2 = (cb, time) =&gt; { cb(); setInterval(cb, time); }; //1.timer1å’Œtimer2å®žçŽ°äº†ä»€ä¹ˆåŠŸèƒ½,æ‰§è¡Œç»“æžœä¸Šä¼šæœ‰ä»€ä¹ˆåŒºåˆ«? //å›žç­”: timer1å’Œtimer2å®žçŽ°äº†éš”æ—¶è½®è¯¢çš„åŠŸèƒ½,ä»Žæ‰§è¡Œç»“æžœä¸Šæ¥çœ‹å¹¶æ²¡æœ‰ä»»ä½•çš„åŒºåˆ« //2.æ¨¡æ‹ŸrequestAnimationFrameæ–¹æ³•çš„è¯åº”è¯¥å‚ç…§å“ªç§å®žçŽ°? //å›žç­”: åº”è¯¥å‚ç…§ç¬¬ä¸€ç§timer1çš„å®žçŽ°æ–¹æ³• //3.timer1ä¸­è°ƒæ¢cb()å’ŒsetTimeoutçš„å…ˆåŽé¡ºåºä¼šæœ‰ä»€ä¹ˆå½±å“? //å›žç­”: å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆå½±å“,ç”±äºŽJSè¯­è¨€æ˜¯å•çº¿ç¨‹è¯­è¨€,æ‰€ä»¥åŒä¸€æ—¶é—´åªèƒ½åšåŒä¸€ä»¶äº‹,å®ƒä¼šå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ,å½“é‡åˆ°å¼‚æ­¥ä»£ç æ—¶,ä¼šå…ˆæŠŠå¼‚æ­¥ä»£ç æ”¾è¿›å¼‚æ­¥é˜Ÿåˆ—ä¸­,ç­‰å¾…åŒæ­¥ä»£ç æ‰§è¡Œå®Œæ¯•ä¹‹åŽ,å†è½®è¯¢å¼‚æ­¥é˜Ÿåˆ—ä¸­çš„å¼‚æ­¥ä»£ç ,ç”±æ­¤ä¸ä¼šæœ‰ä»»ä½•çš„å½±å“ ç¬”è¯•ä¸‰ var a = 1; function f() { console.log(a); var = 2; } f(); //åœ¨è¿™é‡Œæ‰“å°: //undefined ç¬”è¯•å›› f(); g(); function f() { console.log(&apos;f&apos;); } var g = function() { console.log(&apos;g&apos;); }; //åœ¨è¿™é‡Œæ‰“å°: //f //TypeError: g is not a function ç¬”è¯•äº” var person = { name: &quot;Messi&quot; }; console.log(person.hasOwnProperty(&quot;name&quot;)); console.log(person.hasOwnProperty(&quot;hasOwnProperty&quot;)); console.log(Object.prototype.hasOwnProperty(&quot;hasOwnProperty&quot;)); //åœ¨è¿™é‡Œæ‰“å°: //true //false //true ç¬”è¯•å…­ function person(pname, page) { this.name = pname; this.age = page; } person.prototype.profession = &quot;football player&quot;; var person1 = new person(&quot;Messi&quot;, 29); var person2 = new person(&quot;Bale&quot;, 28); console.log(person1.hasOwnProperty(&quot;name&quot;)); console.log(person1.hasOwnProperty(&quot;hasOwnProperty&quot;)); console.log(person1.__proto__ === person.prototype); console.log(person.prototype.hasOwnProperty(&quot;hasOwnProperty&quot;)); console.log(person1.__proto__.__proto__ === person.prototype.__proto__); console.log(person.prototype.__proto__.hasOwnProperty(&quot;hasOwnProperty&quot;)); //åœ¨è¿™é‡Œæ‰“å°: //true //false //true //false //true //true ç¬”è¯•ä¸ƒ function shallowClone(o) { const obj = {}; for(let i in o) { obj[i] = o[i]; } return obj; } const oldObj = { a: 1, b: [&apos;e&apos;, &apos;f&apos;, &apos;g&apos;], c: {h: {i: 2}} }; const newObj = shallowClone(oldObj); console.log(newObj.c.h, oldObj.c.h); console.log(newObj.c.h === oldObj.c.h); newObj.c.h = &quot;change&quot;; console.log(newObj.c.h, oldObj.c.h); //åœ¨è¿™é‡Œæ‰“å°: //{i: 2} {i: 2} //true //&apos;change&apos; &apos;change&apos; è‡ªæ­¤ä½ ä¸çŸ¥é“çš„Javascript&lt;ä¸Šç¯‡&gt;æ•´ç†: è¯æ³•ä½œç”¨åŸŸã€thisä»¥åŠåŽŸåž‹å¯¹è±¡æ•´ç†ç»“æŸ &lt;èŠ±çµ®&gt;æ•´ç†polyfillå…¼å®¹æ¨¡æ‹Ÿçš„å‡½æ•°æ–¹æ³•ä»¥åŠå…ƒç´ è§†å›¾ç›’æ¨¡åž‹polyfillå…¼å®¹æ¨¡æ‹Ÿçš„å‡½æ•°æ–¹æ³• polyfillå…¼å®¹æ¨¡æ‹Ÿnewç»‘å®š function _new() { var obj = {}, args = Array.from(arguments), Collapse = args.shift(); obj.__proto__ = Collapse.prototype; var target = Collapse.apply(obj, args); return typeof target === &quot;object&quot; ? target : obj; } function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function() { console.log(`I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; var person = _new(Person, &quot;wenkai.yin&quot;, 26); console.log(person.name, person.age); person.introduce(); //åœ¨è¿™é‡Œæ‰“å°: //wenkai.yin 26 //I&apos;m wenkai.yin, 26 year&apos;s old polyfillå…¼å®¹æ¨¡æ‹Ÿbindç¡¬ç»‘å®š if(!Function.prototype.bind) { Function.prototype.bind = function(context) { if(typeof this !== &quot;function&quot;) { throw new TypeError(&quot;è¢«ç»‘å®šçš„å¯¹è±¡ç±»åž‹å¹¶ä¸æ˜¯å‡½æ•°~&quot;); } var self = this, args = Array.from(arguments) fBind; args.shift(); function F() {} fBind = function() { var innerArgs = Array.from(arguments); return self.apply(this instanceof fBind ? this : context, [...args, ...innerArgs]); } F.prototype = self.prototype; fBind.prototype = new F(); return fBind; } } function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function() { console.log(`I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; var obj = { name: &quot;Gary Yin&quot;, age: 26 }; var fBind = Person.bind(obj); var obj_ano = { name: &quot;wenkai.yin&quot;, age: 27, fBind }; obj_ano.fBind(&quot;one piece&quot;, 12); console.log(obj, obj_ano); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;one piece&quot;, age: 12} //Object {name: &quot;wenkai.yin&quot;, age: 27, fBind: f} var obj_empty = {}; fBind.apply(obj_empty, [&quot;Gary wenkai&quot;, 22]); console.log(obj, obj_empty); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary wenkai&quot;, age: 22} //Object {} polyfillå…¼å®¹æ¨¡æ‹ŸObject.create if(!Object.create) { Object.create = function(o) { function F() {} F.prototype = o; return new F(); }; } var gary = { name: &quot;Gary Yin&quot;, age: 24 }; var gary_ = Object.create(gary); console.log(gary_.name, gary_.age); console.log(gary.isPrototypeOf(gary_)); console.log(Object.getPrototypeOf(gary_) === gary); //åœ¨è¿™é‡Œæ‰“å°: //Gary Yin 24 //true //true polyfillå…¼å®¹æ¨¡æ‹Ÿå‡½æ•°æˆªæµä»¥åŠå‡½æ•°é˜²æŠ– //å‡½æ•°æˆªæµ var throttle = (function () { var firstTime = true, timer = null; return function(func, speed) { if(firstTime) { func(); firstTime = false; return false; } if(timer) { return false; } timer = setTimeout(function time() { clearTimeout(timer); timer = null; func(); }, speed); }; })(); window.onresize = function (event) { throttle(function () { console.log(event); }, 1000); }; //å¿«é€Ÿç¼©å°æˆ–è€…æ”¾å¤§æµè§ˆå™¨é•¿å®½æœ€å¤šä¼šæ‰“å°ä¸¤æ¡æ•°æ®,è¾“å‡ºçš„æ•°æ®ä¼šå¾ˆæ…¢: //Event {isTrusted: true, type: &quot;resize&quot;, target: Window, currentTarget: Window, eventPhase: 2, â€¦} //Event {isTrusted: true, type: &quot;resize&quot;, target: Window, currentTarget: Window, eventPhase: 2, â€¦} //å‡½æ•°é˜²æŠ– var debounce = (function () { var timer = null; return function (func, speed) { if(timer) { clearTimeout(timer); timer = null; } timer = setTimeout(function time() { func(); }, speed); } })(); window.onresize = function(event) { debounce(function() { console.log(event); }, 1000); }; //æŒç»­å¿«é€Ÿç¼©å°æˆ–è€…æ”¾å¤§æµè§ˆå™¨é•¿å®½1sä¹‹åŽ,åªä¼šæ‰“å°ä¸€æ¡æ•°æ®: //Event {isTrusted: true, type: &quot;resize&quot;, target: Window, currentTarget: Window, eventPhase: 2, â€¦} polyfillå…¼å®¹æ¨¡æ‹ŸsoftBindè½¯ç»‘å®š if(!Function.prototype.softBind) { Function.prototype.softBind = function(context) { if(typeof this !== &quot;function&quot;) { throw new TypeError(&quot;è¢«ç»‘å®šçš„å¯¹è±¡ç±»åž‹å¹¶ä¸æ˜¯å‡½æ•°~&quot;); } var self = this, args = Array.from(arguments), fSoftBind; args.shift(); function F() {} fBind = function() { var innerArgs = Array.from(arguments); return self.apply((!this || this === window) ? context : this, [...args, ...innerArgs]); }; F.prototype = self.prototype; fBind.prototype = new F(); return fBind; }; } function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function() { console.log(`I&apos;m ${this.name}, ${this.age} year&apos;s old`); }; var obj = { name: &quot;Gary Yin&quot;, age: 26 }; var fBind = Person.softBind(obj); var obj_ano = { name: &quot;wenkai.yin&quot;, age: 27, fBind }; obj_ano.fBind(&quot;one piece&quot;, 12); console.log(obj, obj_ano); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary Yin&quot;, age: 26} //Object {name: &quot;one piece&quot;, age: 12, fBind: f} var obj_empty = {}; fBind.apply(obj_empty, [&quot;Gary wenkai&quot;, 22]); console.log(obj, obj_empty); //åœ¨è¿™é‡Œæ‰“å°: //Object {name: &quot;Gary Yin&quot;, age: 26} //Object {name: &quot;Gary wenkai&quot;, age: 22} polyfillå…¼å®¹æ¨¡æ‹ŸisIntegeræ˜¯å¦ä¸ºæ•´æ•° if(!Number.isInteger) { Number.isInteger = function(num) { return typeof num === &quot;number&quot; &amp;&amp; (num % 1 === 0); }; } console.log(Number.isInteger(44.6)); console.log(Number.isInteger(Number.MAX_SAFE_INTEGER)); console.log(Number.isInteger(Infinity)); console.log(Number.isInteger(NaN)); console.log(Number.isInteger(99)); //åœ¨è¿™é‡Œæ‰“å°: //false //true //false //false //true polyfillå…¼å®¹æ¨¡æ‹ŸisNaNæ˜¯å¦ä¸ºNaN if(!Number.isNaN) { Number.isNaN = function(num) { return typeof num === &quot;number&quot; &amp;&amp; (num !== num); }; } console.log(Number.isNaN({})); console.log(Number.isNaN([])); console.log(Number.isNaN(NaN)); console.log(Number.isNaN(0 * Infinity)); console.log(Number.isNaN(1 / 0)); console.log(Number.isNaN(1 / Infinity)); console.log(Number.isNaN(Infinity / Infinity)); //åœ¨è¿™é‡Œæ‰“å°: //false //false //true //true //false //false //true polyfillå…¼å®¹æ¨¡æ‹ŸisNagetiveZeroæ˜¯å¦ä¸ºè´Ÿé›¶,è´Ÿå·ä¸€èˆ¬ä»£æŒ‡æ–¹å‘ if(!Number.isNagetiveZero) { Number.isNagetiveZero = function(num) { return typeof num === &quot;number&quot; &amp;&amp; (1 / num === -Infinity); }; } console.log(Number.isNagetiveZero(-0)); console.log(Number.isNagetiveZero(0)); console.log(Number.isNagetiveZero(1 / Infinity)); console.log(Number.isNagetiveZero(99 / -Infinity)); //åœ¨è¿™é‡Œæ‰“å°: //true //false //false //true polyfillå…¼å®¹æ¨¡æ‹ŸisEpsilonæ¥åˆ¤æ–­0.1 + 0.2 === 0.3 if(!Number.isEpsilon) { Number.isEpsilon = function(num) { return num &lt; Number.EPSILON; }; } console.log(Number.isEpsilon(0.1 + 0.2 - 0.3)); //åœ¨è¿™é‡Œæ‰“å°: //true å…ƒç´ è§†å›¾ç›’æ¨¡åž‹//èŽ·å–æµè§ˆå™¨å±å¹•çš„å¯è§†å®½åº¦ä»¥åŠé«˜åº¦ console.log(window.innerWidth, window.innerHeight); //èŽ·å–é¡µé¢å…ƒç´ çš„æ— è¾¹æ¡†å®½åº¦ä»¥åŠé«˜åº¦ var box = document.getElementById(&quot;box&quot;); console.log(box.clientWidth, box.clientHeight); //èŽ·å–é¡µé¢å…ƒç´ çš„æœ‰è¾¹æ¡†å®½åº¦ä»¥åŠé«˜åº¦ console.log(box.offsetWidth, box.offsetHeight); //èŽ·å–é¡µé¢æ–‡æ¡£çš„é«˜åº¦ console.log(document.body.clientHeight || document.documentElement.clientHeight); //èŽ·å–æ»‘å—æ»‘åŠ¨åŽè·ç¦»é¡¶éƒ¨çš„é«˜åº¦ console.log(document.body.scrollTop || document.documentElement.scrollTop); //èŽ·å–å…ƒç´ åœ¨é¡µé¢çš„ç›¸å¯¹ä½ç½® var position = box.getBoundingClientRect(); console.log(position.top, position.left, position.right, position.bottom); //èŽ·å–å…ƒç´ åœ¨é¡µé¢çš„ç»å¯¹ä½ç½® var scrollTop = document.body.scrollTop || document.documentElement.scrollTop; var absoluteTop = position.top + scrollTop, absoluteBottom = position.bottom + scrollTop; console.log(absoluteTop, absoluteBottom); //èŽ·å–å…ƒç´ çš„æ»‘å—æ»‘åŠ¨é«˜åº¦ console.log(box.scrollHeight); &lt;ä¸­ç¯‡&gt;æ•´ç†: ç±»åž‹ã€è¯­æ³•ç±»åž‹ åŸºæœ¬ç±»åž‹ Javascriptä¸­åŸºæœ¬ç±»åž‹åˆ†ä¸º: numberã€stringã€booleanã€undefinedå’Œnull,nullç±»åž‹ç”±äºŽJSæœ€åˆæ—¶çš„ä¸€ä¸ªbugå¯¼è‡´å®ƒçš„typeofç±»åž‹ä¸ºobject å¼•ç”¨ç±»åž‹ Javascriptä¸­å¼•ç”¨ç±»åž‹åˆ†ä¸º: objectä»¥åŠfunction å†…ç½®å‡½æ•°å’Œå†…ç½®å¯¹è±¡ Javascriptä¸­å­˜åœ¨å†…ç½®å‡½æ•°å’Œå†…ç½®å¯¹è±¡,å®ƒä»¬åˆ†åˆ«æ˜¯: Stringã€Numberã€Booleanã€Objectã€Arrayã€Functionã€RegExpã€Mathã€JSONã€Symbolå’ŒError,å½“ä½ åŽ»æž„é€ è°ƒç”¨ä¸€ä¸ªå†…ç½®å‡½æ•°æ—¶,ä½ å°±å¯ä»¥ä½¿ç”¨è¿™äº›å†…ç½®å‡½æ•°æ‰€æ‹¥æœ‰çš„å±žæ€§æˆ–è€…æ–¹æ³•,è­¬å¦‚è¯´toString,valueOf,toFixedç­‰ç­‰,ä½†æ˜¯ä½ å¯èƒ½ä¼šé—®,ä¸ºä»€ä¹ˆé‚£äº›å¸¸é‡,æ¯”å¦‚è¯´var string = â€œstringâ€;string.toString();ä¹Ÿå¯ä»¥è°ƒç”¨æž„é€ è°ƒç”¨çš„å¼•ç”¨å¯¹è±¡æ‰èƒ½è°ƒç”¨çš„å±žæ€§æˆ–è€…æ–¹æ³•å‘¢?å›žç­”: è¿™äº›å¸¸é‡æœ¬èº«å¹¶æ²¡æœ‰è¿™äº›å±žæ€§å’Œæ–¹æ³•,è€Œæ˜¯å®ƒä»¬åœ¨è°ƒç”¨å±žæ€§æˆ–è€…æ–¹æ³•çš„æ—¶å€™,æµè§ˆå™¨å¼•æ“Žä¼šå°†å®ƒä»¬å°è£…æˆç†åº”åŒ¹é…çš„æž„é€ è°ƒç”¨å†…ç½®å‡½æ•°æˆ–è€…å†…ç½®æ–¹æ³•,è¿™æ ·è¿™äº›å¸¸é‡å°±å¯ä»¥è°ƒç”¨äº† ä¾‹å­ var string_obj = new String(&quot;I&apos;m Gary&quot;), string = &quot;I&apos;m Seven&quot;; console.log(string_obj.slice(0, 5)); console.log(string.slice(0, 6)); //åœ¨è¿™é‡Œæ‰“å°: //I&apos;m G //I&apos;m Se var number_obj = new Number(10), number = 22; console.log(number_obj.toFixed(2)); console.log(number.toFixed(2)); //ä½¿ç”¨æ•°å­—å¸¸é‡åŽ»è°ƒç”¨æ•°å­—æž„é€ è°ƒç”¨çš„å±žæ€§æˆ–è€…æ–¹æ³•æ—¶,å¿…é¡»ä½¿ç”¨ä¸¤ä¸ªç‚¹è°ƒç”¨,ç¬¬ä¸€ä¸ªç‚¹æµè§ˆå™¨ä¼šè®¤ä¸ºæ˜¯æ•°å­—å¸¸é‡æµ®ç‚¹ç±»åž‹çš„ç¬¬ä¸€ä¸ªç‚¹,ç¬¬äºŒç‚¹æ‰æ˜¯è°ƒç”¨æ•°å­—æž„é€ è°ƒç”¨çš„å±žæ€§æˆ–è€…æ–¹æ³•çš„ç‚¹ console.log(40..toFixed(2)); //åœ¨è¿™é‡Œæ‰“å°: //10.00 //22.00 //40.00 0.1 + 0.2 !== 0.3 å¤§å®¶éƒ½æ¸…æ¥š,åœ¨JSé‡Œ,0.1+0.2!==0.3,è€Œæ˜¯ç­‰äºŽ0.30000000000000004,åŽŸå› :æµ®ç‚¹æ•°åè¿›åˆ¶åœ¨åº•å±‚è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æœºå™¨ç è¿›è¡Œè¿ç®—,ç”±äºŽJSçš„æµ®ç‚¹æ•°å¹¶ä¸æ˜¯å¾ˆç²¾ç¡®,æ‰€ä»¥è¿ç®—ä¹‹åŽ,è½¬åŒ–ä¸ºåè¿›åˆ¶ä¹‹åŽ,å¹¶ä¸æ˜¯0.3,è€Œæ˜¯0.30000000000000004é‚£è¯¥æ€Žä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜,ä½¿å¾—0.1+0.2===0.3å‘¢? ES6åœ¨Numberå†…ç½®å‡½æ•°ä¸Šæä¾›äº†ä¸€ä¸ªå±žæ€§EPSILON,å®ƒå¯ä»¥è¿›è¡Œç”„åˆ«0.1+0.2ç›¸åŠ è¿ç®—ä¹‹åŽçš„å€¼æ˜¯å¦æ˜¯åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å†…,å¦‚æžœæ˜¯,å°±è¿”å›žtrue,å¦‚æžœä¸æ˜¯,å°±è¿”å›žfalse ä¾‹å­ function isEpsilon(num) { return num &lt; Number.EPSILON } console.log(isEpsilon(0.1 + 0.2 - 0.3)); //åœ¨è¿™é‡Œæ‰“å°: //true //è¯´æ˜Ž0.1 + 0.2 - 0.3æ˜¯åœ¨è¿™ä¸ªåŒºé—´ä¹‹å†…çš„,è¯´æ˜Ž0.1 + 0.2 === 0.3 //è€Œè¿™ä¸ªNumber.EPSILONçš„åŒºé—´èŒƒå›´æ˜¯:2.220446049250313e-16 å†…ç½®æ•°å­—å‡½æ•°Numberå¤„ç† ä¸‹é¢æ˜¯Numberå†…ç½®æ•°å­—å‡½æ•°å¯¹å„ä¸ªç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡å¤„ç†çš„ç»“æžœ,å½“å¤„ç†åŸºæœ¬ç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡æ—¶,é‡åˆ°nullã€falseã€0ã€â€â€ã€â€ â€œå’Œâ€0â€æ—¶,ä¼šå¤„ç†æˆ0;é‡åˆ°true,ä¼šå¤„ç†æˆ1;é‡åˆ°undefinedã€NaNã€å­—ç¬¦ä¸²ä¸­å«æœ‰å­—æ¯æ—¶,ä¼šå¤„ç†æˆNaN;å½“å¤„ç†å¼•ç”¨ç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡æ—¶,ä¼šæ ¹æ®å¯¹è±¡çš„ToNumberã€ToStringå’ŒToPremitiveè¿›è¡Œå¤„ç†,å½“é‡åˆ°Numberå†…ç½®æ•°å­—å‡½æ•°è¿›è¡Œå¤„ç†æ—¶,ä¼šç›´æŽ¥è°ƒç”¨å¯¹è±¡çš„ToNumberä¹Ÿå°±æ˜¯valueOf,é‡åˆ°ç©ºæ•°ç»„æ—¶,ä¼šå¤„ç†æˆ0;é‡åˆ°æœ‰ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„æ•°ç»„æ—¶,ä¼šå¤„ç†æˆè¿™ä¸€ä¸ªæ•°ç»„å…ƒç´ äº§ç”Ÿçš„ç»“æžœ;é‡åˆ°æœ‰ä¸¤ä¸ªæ•°ç»„çš„æ•°ç»„æ—¶,ä¼šå¤„ç†æˆNaN;é‡åˆ°å¯¹è±¡æ—¶,ä¼šå¤„ç†æˆNaN ä¾‹å­ console.log(Number(undefined)); console.log(Number(null)); console.log(Number(NaN)); console.log(Number(0)); console.log(Number(&quot;0&quot;)); console.log(Number(&quot;0n0&quot;)); console.log(Number(&quot;&quot;)); console.log(Number(&quot; &quot;)); console.log(Number({})); console.log(Number([])); console.log(Number([44])); console.log(Number([&quot;4N4&quot;])); console.log(Number([44, 99])); console.log(Number(true)); console.log(Number(false)); //åœ¨è¿™é‡Œæ‰“å°: //NaN //0 //NaN //0 //0 //NaN //0 //0 //NaN //0 //44 //NaN //NaN //1 //0 å†…ç½®å­—ç¬¦ä¸²å‡½æ•°Stringå¤„ç† ä¸‹é¢æ˜¯Stringå†…ç½®å­—ç¬¦ä¸²å‡½æ•°å¯¹å„ä¸ªç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡å¤„ç†çš„ç»“æžœ,å½“å¤„ç†åŸºæœ¬ç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡æ—¶,é‡åˆ°undefinedã€nullã€NaNã€trueã€falseã€1ã€0æ—¶,ä¼šå¤„ç†æˆâ€undefinedâ€,â€nullâ€,â€NaNâ€,â€trueâ€,â€falseâ€,â€trueâ€,â€falseâ€,â€1â€,â€0â€;å½“å¤„ç†å¼•ç”¨ç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡æ—¶,ä¼šæ ¹æ®å¯¹è±¡çš„ToNumberã€ToStringå’ŒToPremitiveè¿›è¡Œå¤„ç†,å½“é‡åˆ°Stringå†…ç½®å­—ç¬¦ä¸²å‡½æ•°è¿›è¡Œå¤„ç†æ—¶,ä¼šç›´æŽ¥è°ƒç”¨å¯¹è±¡çš„ToStringä¹Ÿå°±æ˜¯toString,é‡åˆ°ç©ºæ•°ç»„æ—¶,ä¼šå¤„ç†æˆâ€â€;é‡åˆ°æœ‰ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„æ•°ç»„æ—¶,ä¼šå¤„ç†æˆè¿™ä¸ªæ•°ç»„å…ƒç´ çš„å­—ç¬¦ä¸²å½¢å¼;é‡åˆ°æœ‰å¤šä¸ªæ•°ç»„çš„æ•°ç»„æ—¶,ä¼šå¤„ç†æˆæ¯ä¸ªæ•°ç»„å…ƒç´ çš„å­—ç¬¦ä¸²å½¢å¼å¹¶åœ¨ä¸­é—´åŠ ä¸Šé€—å·;é‡åˆ°å¯¹è±¡æ—¶,ä¼šå¤„ç†æˆå…¶åŽŸåž‹é“¾ä¸ŠtoStringåŽæ˜¾ç¤ºçš„ç»“æžœ[object Object] ä¾‹å­ console.log(String(undefined)); console.log(String(null)); console.log(String(0)); console.log(String(NaN)); console.log(String(true)); console.log(String(false)); console.log(String([])); console.log(String({})); console.log(String([44])); console.log(String([66, 99])); console.log(String(&quot; &quot;)); //åœ¨è¿™é‡Œæ‰“å°: //&quot;undefined&quot; //&quot;null&quot; //&quot;0&quot; //&quot;NaN&quot; //&quot;true&quot; //&quot;false&quot; //&quot;&quot; //[object Object] //&quot;44&quot; //&quot;66,99&quot; //&quot; &quot; å­—ç¬¦ä¸²toStringæ–¹æ³•å¤„ç† ä¸‹é¢æ˜¯toStringå­—ç¬¦ä¸²æ–¹æ³•å¯¹å„ä¸ªç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡å¤„ç†çš„ç»“æžœ,å½“å¤„ç†åŸºæœ¬ç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡æ—¶,é‡åˆ°undefinedã€nullæ—¶,ä¼šç›´æŽ¥æŠ¥TypeErroré”™è¯¯,è¡¨æ˜Žundefinedå’Œnullå¹¶ä¸å­˜åœ¨toStringæ–¹æ³•;å½“é‡åˆ°NaNã€trueã€falseã€1ã€0æ—¶,ä¼šç›´æŽ¥å¤„ç†æˆâ€NaNâ€,â€trueâ€,â€falseâ€,â€1â€,â€0â€;å½“å¤„ç†å¼•ç”¨ç±»åž‹çš„å¸¸é‡æˆ–è€…å˜é‡æ—¶,ä¼šæ ¹æ®å¯¹è±¡çš„ToNumberã€ToStringå’ŒToPremitiveè¿›è¡Œå¤„ç†,å½“é‡åˆ°toStringå­—ç¬¦ä¸²æ–¹æ³•è¿›è¡Œå¤„ç†æ—¶,é‡åˆ°ç©ºæ•°ç»„æ—¶,ä¼šå¤„ç†æˆâ€â€;é‡åˆ°æœ‰ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„æ•°ç»„æ—¶,ä¼šå¤„ç†æˆè¿™ä¸ªæ•°ç»„å…ƒç´ çš„å­—ç¬¦ä¸²å½¢å¼;é‡åˆ°æœ‰å¤šä¸ªæ•°ç»„çš„æ•°ç»„æ—¶,ä¼šå¤„ç†æˆæ¯ä¸ªæ•°ç»„å…ƒç´ çš„å­—ç¬¦ä¸²å½¢å¼å¹¶åœ¨ä¸­é—´åŠ ä¸Šé€—å·;é‡åˆ°å¯¹è±¡æ—¶,ä¼šå¤„ç†æˆå…¶åŽŸåž‹é“¾ä¸ŠtoStringåŽæ˜¾ç¤ºçš„ç»“æžœ[object Object] ä¾‹å­ console.log(undefined.toString()); console.log(null.toString()); console.log(0..toString()); console.log(1..toString()); console.log(true.toString()); console.log(false.toString()); console.log(NaN.toString()); console.log([].toString()); console.log({}.toString()); console.log([44].toString()); console.log([&quot;4n4&quot;].toString()); console.log([44, 89].toString()); console.log(&quot; &quot;.toString()); //åœ¨è¿™é‡Œæ‰“å°: //TypeError: Cannot read property &apos;toString&apos; of undefined //TypeError: Cannot read property &apos;toString&apos; of null //&quot;0&quot; //&quot;1&quot; //&quot;true&quot; //&quot;false&quot; //&quot;NaN&quot; //&quot;&quot; //[object Object] //&quot;44&quot; //&quot;4n4&quot; //&quot;44, 89&quot; //&quot; &quot; polyfillå…¼å®¹æ¨¡æ‹Ÿåˆ¤æ–­ä¸€ä¸ªå¸¸é‡æˆ–è€…ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºNaN é€šå¸¸æˆ‘ä»¬ä½¿ç”¨å†…ç½®æ•°å­—å‡½æ•°Numberä¸Šçš„isNaNé™æ€æ–¹æ³•æ¥åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æˆ–è€…ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºNaN,å½“ç„¶å½“é‡åˆ°ä¸å…¼å®¹Number.isNaNæ–¹æ³•çš„æµè§ˆå™¨æ—¶,æˆ‘ä»¬å¯ä»¥æ‰‹å†™ä¸€ä¸ªpolyfillå…¼å®¹ç‰ˆçš„é™æ€æ–¹æ³•,åˆ©ç”¨NaNçš„ç‰¹æ€§:NaNè‡ªå·±ä¸ç­‰äºŽå…¶æœ¬èº« ä¾‹å­ console.log(Number.isNaN(NaN)); //åœ¨è¿™é‡Œæ‰“å°: //true if(!Number.isNaN) { Number.isNaN = function(num) { return num !== num; }; } console.log(Number.isNaN(NaN)); console.log(Number.isNaN(0)); console.log(Number.isNaN({})); console.log(Number.isNaN([])); console.log(Number.isNaN([44])); //åœ¨è¿™é‡Œæ‰“å°: //true //false //false //false //false å†…ç½®æ•°å­—å‡½æ•°Numberä¸Šçš„å±žæ€§æˆ–è€…æ–¹æ³• Numberå†…ç½®æ•°å­—å‡½æ•°çš„MAX_VALUEå’ŒMIN_VALUEå±žæ€§ä»£è¡¨çš„æ˜¯JSé‡Œæ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°å€¼å’Œæœ€å°æ•°å€¼;è€ŒMAX_SAFE_INTEGERå’ŒMIN_SAFE_INTEGERä»£è¡¨çš„æ˜¯JSé‡Œé¢æœ€å¤§çš„å’Œæœ€å°çš„å®‰å…¨æ•´æ•°;isIntegeræ˜¯åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æˆ–è€…ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æ•´æ•°;è€ŒisSafeIntegeråˆ™æ˜¯åˆ¤æ–­ä¸€ä¸ªå¸¸é‡æˆ–è€…ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯å®‰å…¨æ•´æ•°;å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥polyfillå…¼å®¹æ¨¡æ‹Ÿåˆ¤æ–­ä¸€ä¸ªå¸¸é‡æˆ–è€…ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºæ•´æ•°isInteger ä¾‹å­ console.log(Number.MAX_VALUE); console.log(Number.MIN_VALUE); console.log(Number.MAX_SAFE_INTEGER); console.log(Number.MIN_SAFE_INTEGER); console.log(Number.isInteger(Number.MAX_VALUE)); console.log(Number.isInteger(Infinity)); console.log(Number.isInteger(44.7)); console.log(Number.isInteger(1.7976931348623157e+308)); console.log(Number.isSafeInteger(1.7976931348623157e+308)); console.log(Number.isSafeInteger(9007199254740991)); console.log(Number.isSafeInteger(Number.MAX_SAFE_INTEGER + 1)); //åœ¨è¿™é‡Œæ‰“å°: //1.7976931348623157e+308 //5e-324 //9007199254740991 //-9007199254740991 //true //false //false //true //false //true //false //polyfillæ¨¡æ‹Ÿåˆ¤æ–­ä¸€ä¸ªå¸¸é‡æˆ–è€…ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºæ•´æ•°isInteger if(!Number.isInteger) { Number.isInteger = function (num) { return typeof num === &quot;number&quot; &amp;&amp; (num % 1 === 0); }; } console.log(Number.isInteger(Number.MAX_VALUE)); console.log(Number.isInteger(Infinity)); console.log(Number.isInteger(44.7)); console.log(Number.isInteger(1.7976931348623157e+308)); console.log(Number.isInteger(44)); //åœ¨è¿™é‡Œæ‰“å°: //true //false //false //true //true Infinityã€-Infinityã€0ä¸Ž-0 é™¤äº†0ä¸Ž-0ä¹‹å¤–,ä»»ä½•ä¸ŽInfinityè¿›è¡Œè¿ç®—(é™¤äº†é™¤æ³•è¿ç®—)çš„æ•°å€¼ç»“æžœå…¨éƒ½ä¸ºInfinityæˆ–è€…-Infinity,ä»»ä½•ä¸Ž-Infinityè¿›è¡Œè¿ç®—(é™¤äº†é™¤æ³•è¿ç®—)çš„æ•°å€¼ç»“æžœå…¨éƒ½ä¸ºInfinityæˆ–è€…-Infinity,ä»»ä½•ä¸ŽInfinityæˆ–è€…-Infinityè¿›è¡Œè¿ç®—çš„éžæ•°å€¼ç»“æžœæ ¹æ®éšå¼ç±»åž‹è½¬æ¢(valueOf)åŽå†³å®š;0ä¸ŽInfinityè¿›è¡Œä¹˜æ³•è¿ç®—çš„ç»“æžœä¸ºNaN,è¿›è¡ŒåŠ å‡è¿ç®—çš„ç»“æžœä¸ºInfinityæˆ–è€…-Infinity;-0ä¸ŽInfinityè¿›è¡Œä¹˜æ³•è¿ç®—çš„ç»“æžœä¸ºNaN,è¿›è¡ŒåŠ å‡è¿ç®—çš„ç»“æžœä¸ºInfinityæˆ–è€…-Infinity;ä»»ä½•ä¸ŽInfinityè¿›è¡Œé™¤æ³•è¿ç®—çš„æ•°å€¼ç»“æžœå…¨éƒ½ä¸º0æˆ–è€…-0;ä»»ä½•ä¸Ž-Infinityè¿›è¡Œé™¤æ³•è¿ç®—çš„æ•°å€¼ç»“æžœå…¨éƒ½ä¸º0æˆ–è€…-0;é™¤äº†0ä¸Ž-0ä¹‹å¤–,ä»»ä½•ä¸Ž0è¿›è¡Œé™¤æ³•è¿ç®—çš„æ•°å€¼ç»“æžœå…¨éƒ½ä¸ºInfinityæˆ–è€…-Infinity;ä»»ä½•ä¸Ž-0è¿›è¡Œé™¤æ³•è¿ç®—çš„æ•°å€¼ç»“æžœå…¨éƒ½ä¸ºInfinityæˆ–è€…-Infinity;0, -0ä¸Ž0, -0è¿›è¡Œé™¤æ³•è¿ç®—çš„ç»“æžœä¸ºNaN; ä¾‹å­ console.log(1 * Infinity); console.log(-1 * Infinity); console.log(1 / Infinity); console.log(-1 / Infinity); console.log(199 * Infinity); console.log(-199 * Infinity); console.log(&quot;1ab&quot; * Infinity); console.log(Infinity * Infinity); console.log(-Infinity * Infinity); console.log(-Infinity * -Infinity); console.log([44] * Infinity); console.log([&quot;4n4&quot;] * Infinity); console.log([99, 77, 29] * Infinity); console.log({} * Infinity); console.log([] * Infinity); console.log(NaN + Infinity); console.log(0 * Infinity); console.log(-0 * Infinity); console.log(0 - Infinity); console.log(-0 - Infinity); console.log(0 / Infinity); console.log(-0 / Infinity); console.log(Infinity / Infinity); console.log(-Infinity / Infinity); console.log(1 / 0); console.log(-1 / 0); console.log(0 / 0); console.log(-0 / 0); console.log(-0 / -0); //åœ¨è¿™é‡Œæ‰“å°: //Infinity //-Infinity //0 //-0 //Infinity //-Infinity //NaN //Infinity //-Infinity //Infinity //Infinity //NaN //NaN //NaN //NaN //NaN //NaN //NaN //-Infinity //-Infinity //0 //-0 //NaN //NaN //Infinity //-Infinity //NaN //NaN //NaN polyfillå…¼å®¹æ¨¡æ‹Ÿåˆ¤æ–­ä¸€ä¸ªæ•°å€¼æ˜¯-0 ä¾‹å­ if(!Number.isNagetiveZero) { Number.isNagetiveZero = function(num) { return typeof num === &quot;number&quot; &amp;&amp; (1 / num === -Infinity); }; } console.log(Number.isNagetiveZero(0)); console.log(Number.isNagetiveZero(-0)); console.log(Number.isNagetiveZero(1 / Infinity)); console.log(Number.isNagetiveZero(-99 / Infinity)); console.log(Number.isNagetiveZero(Infinity / Infinity)); //åœ¨è¿™é‡Œæ‰“å°: //false //true //false //true //false parseIntæ˜¯ä»Žå­—ç¬¦ä¸²é¦–éƒ¨å¼€å§‹æˆªå–å­—ç¬¦ä¸ºæ•°å€¼å¹¶è½¬åŒ–ä¸ºæ•°å€¼çš„å‡½æ•°æ–¹æ³• parseIntå‡½æ•°æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è¿›è¡Œé¦–éƒ¨å¼€å§‹æˆªå–å­—ç¬¦ä¸ºæ•°å€¼å¹¶è½¬åŒ–ä¸ºæ•°å€¼çš„å­—ç¬¦ä¸²,è€Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯è½¬åŒ–çš„è¿›åˆ¶æ•°;parseIntå‡½æ•°æ–¹æ³•å½“é‡åˆ°å¹¶ä¸æ˜¯å­—ç¬¦ä¸²çš„å¸¸é‡æˆ–è€…å˜é‡æ—¶,å®ƒä¼šå…ˆå°†å…¶éšå¼ç±»åž‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²,å†è¿›è¡Œé¦–éƒ¨å¼€å§‹æˆªå–å­—ç¬¦ä¸ºæ•°å€¼å¹¶è½¬åŒ–ä¸ºæ•°å€¼ ä¾‹å­ console.log(parseInt(&quot;468Gary743&quot;)); console.log(parseInt(&quot;Gary468743&quot;)); console.log(parseFloat(&quot;48.6Gary733.4&quot;)); console.log(parseFloat(&quot;Gary48.6733.4&quot;)); console.log([&quot;1&quot;, &quot;2&quot;, &quot;3&quot;].map((item, index) =&gt; parseInt(item, index))); console.log(parseInt([])); console.log(parseInt([44])); console.log(parseInt([89, 96, 44])); console.log(parseInt(function() {})); console.log(parseInt({})); console.log(parseInt(function() {}, 16)); console.log(parseInt(true)); console.log(parseInt(false, 16)); console.log(parseInt(true, 16)); console.log(parseInt(1/0, 19)); console.log(parseInt(function() {}, 8)); console.log(parseInt(1/-0, 19)); console.log(parseInt([1/0, &quot;68&quot;, false, true], 19)); //åœ¨è¿™é‡Œæ‰“å°: //468 //NaN //48.6 //NaN //[1, NaN, NaN] //NaN //44 //89 //NaN //NaN //15 //NaN //250 //NaN //18 //NaN //NaN //18 try {} catch(err) {} finally {} åœ¨ES6çš„letã€constå—çº§ä½œç”¨åŸŸä¹‹å‰,Googleçš„Tracerå›¢é˜Ÿå°±æ˜¯ä½¿ç”¨try {} catch(a) {}è¿™ç§æ–¹å¼æ¥æ¨¡æ‹Ÿå—çº§ä½œç”¨åŸŸ,æµè§ˆå™¨ç¼–è¯‘åŽåŸºæœ¬ä¸Šæ˜¯ä»¥ä¸‹è¡¨è¾¾å¼å½¢å¼: ä¾‹å­ function foo() { try { throw undefined; } catch(a) { a = 2; console.log(a); } console.log(a); } foo(); //åœ¨è¿™é‡Œæ‰“å°: //2 //ReferrenceError: a is not defined ä½¿ç”¨tryâ€¦catch()â€¦finallyäº†ä¹‹åŽ,tryè¡¨è¾¾å¼ä¸­çš„returnè¿”å›žè¡¨è¾¾å¼è¯­å¥ä¸ä¼šè¢«æ‰§è¡Œ,ä¼šç›´æŽ¥è·³è¿‡,æ‰§è¡Œfinallyä¸­çš„è¿”å›žè¡¨è¾¾å¼è¯­å¥: ä¾‹å­ function foo(num) { try { console.log(668); console.log(num + 1); return 100; } catch(error) { console.log(error); } finally { return num; } } console.log(foo(999)); //åœ¨è¿™é‡Œæ‰“å°: //668 //1000 //999 == ä¸Ž === çš„åŒºåˆ« åœ¨åˆå­¦è€…é˜¶æ®µ,è¢«é—®åˆ° == ä¸Ž === çš„åŒºåˆ«,æˆ‘ä¸€èˆ¬éƒ½ä¼šå›žç­”==ä¸æ ¡éªŒç±»åž‹,åªæ ¡éªŒå€¼,===æ—¢æ ¡éªŒç±»åž‹,è¿˜æ ¡éªŒå€¼;è€ŒçŽ°åœ¨çš„ç†è§£æ˜¯,==è¿›è¡Œéšå¼å¼ºåˆ¶ç±»åž‹è½¬æ¢,è€Œ===ä¸è¿›è¡Œå¼ºåˆ¶ç±»åž‹è½¬æ¢ã€‚ ä¾‹å­ console.log(1 == &quot;1&quot;); console.log(22 === &quot;22&quot;); console.log(true == 1); console.log(false === 0); //åœ¨è¿™é‡Œæ‰“å°: //true //false //true //false &amp;&amp; ä¸Ž ||çš„ä¼˜å…ˆçº§ &amp;&amp;ä¸Ž||æ˜¯æœ‰ä¼˜å…ˆçº§åŒºåˆ†çš„,&amp;&amp;çš„ä¼˜å…ˆçº§æ˜¯å¤§äºŽ||çš„ã€‚ ä¾‹å­ var a = true, b = false, c = true; console.log(b &amp;&amp; a || c); //åœ¨è¿™é‡Œæ‰“å°: //true //è¯´æ˜Žè¡¨è¾¾å¼æ˜¯æ‰§è¡Œ(b &amp;&amp; a) || c,è€Œä¸æ˜¯b &amp;&amp; (a || c),å¦‚æžœæ˜¯åŽè€…,é‚£è¿”å›žå°±åº”è¯¥æ˜¯false JSON.stringifyå°†JSå¯¹è±¡è½¬åŒ–ä¸ºJSONå­—ç¬¦ä¸² JSON.stringifyè¿›è¡Œè½¬åŒ–æ—¶,é‡åˆ°éžJSONè¯­æ³•çš„è¡¨è¾¾å¼è¯­å¥,ä¼šè½¬åŒ–æˆundefinedæˆ–è€…null,å½“é‡åˆ°undefinedæˆ–è€…function() {}æ—¶,ä¼šè½¬åŒ–ä¸ºundefined;å½“é‡åˆ°NaNæ—¶,ä¼šè½¬åŒ–ä¸ºnull;å½“é‡åˆ°åœ¨æ•°ç»„å¯¹è±¡ä¸­çš„éžJSONè¯­æ³•çš„è¡¨è¾¾å¼è¯­å¥,ä¼šå…¨éƒ¨è½¬åŒ–ä¸ºnull;å½“é‡åˆ°å¯¹è±¡ä¸­çš„éžJSONè¯­æ³•çš„è¡¨è¾¾å¼è¯­å¥æ—¶,ä¼šåˆ é™¤æŽ‰éžæ³•çš„å±žæ€§æˆ–è€…å±žæ€§å€¼ ä¾‹å­ console.log(JSON.stringify(undefined)); console.log(JSON.stringify(null)); console.log(JSON.stringify(function() {})); console.log(JSON.stringify(NaN)); console.log(JSON.stringify([])); console.log(JSON.stringify([function() {}, NaN, null, true, {}, 66, undefined])); console.log(JSON.stringify({})); console.log(JSON.stringify({a: function() {}, b: NaN, c: null, d: true, e: 88, f: undefined, g: [], h: [undefined, NaN, function() {}]})); //åœ¨è¿™é‡Œæ‰“å°: //undefined //null //undefined //null //[] //[null, null, null, true, {}, 66, null] //{b: null, c: null, d: true, e: 88, g: [], h: [null, null, null]}]]></content>
      <categories>
        <category>ä½ ä¸çŸ¥é“çš„Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­¦ä¹ å›¾è§£HTTPä¸€ä¹¦ç¬”è®°]]></title>
    <url>%2F2019%2F02%2F03%2F%E5%AD%A6%E4%B9%A0%E5%9B%BE%E8%A7%A3HTTP%E4%B8%80%E4%B9%A6%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[HTTPåè®®: è¶…æ–‡æœ¬ä¼ è¾“åè®®URI:ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦URL:ç»Ÿä¸€èµ„æºå®šä½ç¬¦ä»Žå®¢æˆ·ç«¯åº”ç”¨å±‚ä¼ è¾“åˆ°æœåŠ¡å™¨æ®µåº”ç”¨å±‚çš„è¿‡ç¨‹: å®¢æˆ·ç«¯åº”ç”¨å±‚å‘å‡ºHTTPè¯·æ±‚,å°†æ•°æ®åŒ…åŠ ä¸Šåº”ç”¨å±‚çš„é¦–éƒ¨å‘é€ç»™ä¼ è¾“å±‚(TCP), TCPåè®®å°†æ•°æ®åŒ…è¿›è¡Œåˆ†å‰²,åˆ†å‰²æˆå¤šä¸ªå°æ•°æ®åŒ…,å¹¶æŠŠå°æ•°æ®åŒ…è¿›è¡Œæ ‡å·(ç”¨åœ¨æœåŠ¡å™¨ç«¯ä¼ è¾“å±‚ä»¥æŽ’åºæ•´åˆ),ä¹‹åŽå°†è¿™äº›è¿›è¡Œæ ‡å·çš„å°æ•°æ®åŒ…åŠ ä¸Šä¼ é€å±‚çš„é¦–éƒ¨å‘é€ç»™ç½‘ç»œå±‚(IP), IPæ ¹æ®åœ°å€,è¿›è¡ŒæŸ¥è¯¢å¹¶åŠ ä¸Šç½‘ç»œå±‚çš„é¦–éƒ¨å‘é€è‡³æœåŠ¡å™¨ç«¯çš„ç½‘ç»œå±‚(IP)ã€‚ æŽ¥ç€æœåŠ¡å™¨ç«¯çš„ç½‘ç»œå±‚å¯¹å®¢æˆ·ç«¯ç½‘ç»œå±‚é¦–éƒ¨è¿›è¡ŒåŽ»æŽ‰çš„å·¥ä½œ,å¹¶å‘é€ç»™ä¼ è¾“å±‚, ä¼ è¾“å±‚å¯¹å®¢æˆ·ç«¯ä¼ è¾“å±‚çš„é¦–éƒ¨è¿›è¡ŒåŽ»æŽ‰,å¹¶ä¸”å°†æ ‡å·çš„å°æ•°æ®åŒ…æ ¹æ®æ ‡å·è¿›è¡ŒæŽ’åºæ•´åˆ,å½¢æˆå¤§æ•°æ®åŒ…,å‘é€è‡³æœåŠ¡å™¨çš„åº”ç”¨å±‚, æœåŠ¡å™¨çš„åº”ç”¨å±‚å°†å¤§æ•°æ®åŒ…çš„å®¢æˆ·ç«¯åº”ç”¨å±‚çš„é¦–éƒ¨è¿›è¡ŒåŽ»æŽ‰çš„å·¥ä½œ,è¿™æ ·åˆ™çœ‹åˆ°äº†åŽŸæ•°æ®ã€‚]]></content>
      <categories>
        <category>å›¾è§£HTTP</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
        <tag>å›¾è§£</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2019-02-03 åè¨€åå¥]]></title>
    <url>%2F2019%2F02%2F03%2F%E5%90%8D%E8%A8%80%E5%90%8D%E5%8F%A5%2F</url>
    <content type="text"><![CDATA[åŽ†å²ä¸æ‡‚å¾—æ”¹å˜ä¸»æ„çš„äºº,ä»€ä¹ˆéƒ½æ”¹å˜ä¸äº†ã€‚ â€”â€” æ¸©æ–¯é¡¿ ä¸˜å‰å°”ä¸Šå¸è¦æ¯ç­ä¸€ä¸ªäºº,å¿…å…ˆä½¿å…¶å‘ç‹‚ã€‚ â€”â€” è¥¿æ–¹è°šè¯­å¦‚æžœä½ é—®ä¸˜å‰å°”,ä¸ºä»€ä¹ˆè¦åšè®®å‘˜,ä»–ä¸€å®šä¼šè¯´,â€å› ä¸ºæˆ‘è¦åšå¤§è‡£â€;å¦‚æžœä½ å†é—®ä¸˜å‰å°”,ä¸ºä»€ä¹ˆè¦åšå¤§è‡£,ä»–ä¼šæ–©é’‰æˆªé“çš„è¯´,â€å› ä¸ºæˆ‘è¦åšé¦–ç›¸â€ã€‚ â€”â€”è‹±å›½åª’ä½“,å¤§æ¦‚æ˜¯ã€Šæ³°æ™¤å£«æŠ¥ã€‹ äººç”Ÿäººä»¬æ€»æ˜¯å®¹æ˜“è®°å¾—è‡ªå·±æ˜¯åœ¨ä¸€æ¡èˆ¹ä¸Š,äººä»¬æ€»æ˜¯å®¹æ˜“å¿˜è®°è‡ªå·±æ˜¯åœ¨ä¸€æ¡æ²³ä¸Šã€‚ â€”â€”é©¬ä¸œè‹Ÿåˆ©å›½å®¶ç”Ÿæ­»ä»¥, å²‚å› ç¥¸ç¦é¿è¶‹ä¹‹ã€‚ â€”â€”æž—åˆ™å¾æœ‰æ—¶å€™è°ˆç†æƒ³,åœ¨ç¤¾ä¼šä¸Šæ™®éè®¤çŸ¥æ˜¯å†’å‚»æ°”,æ‰€ä»¥æˆ‘ä»¬ä¸è¦è°ˆç†æƒ³,è€Œå¿ƒä¸­æœ‰ç†æƒ³,æˆ‘ä»¬éœ€è¦ä¸è°ˆç†æƒ³çš„ç†æƒ³ã€‚ â€”â€”è®¸å­ä¸œ æ–‡å­¦æˆ‘ä»¬æ­£åœ¨åŸ¹å…»ä¸€æ‰¹ç»å¯¹çš„ã€ç²¾è‡´çš„åˆ©å·±ä¸»ä¹‰è€…ã€‚ â€”â€”é’±ç†ç¾¤æˆ‘æ€•ä¸å†æœ‰äººç›¸ä¿¡è§„åˆ™èƒ½æˆ˜èƒœæ½œè§„åˆ™,æˆ‘æ€•ä¸å†æœ‰äººç›¸ä¿¡å­¦åœºæœ‰åˆ«äºŽå®˜åœº,æˆ‘æ€•ä¸å†æœ‰äººç›¸ä¿¡å­¦æœ¯ä¸ç­‰äºŽæƒæœ¯,æˆ‘æ€•ä¸å†æœ‰äººç›¸ä¿¡é£Žéª¨è¿œèƒœäºŽåªšéª¨ã€‚ â€”â€”å¢æ–°å®]]></content>
      <categories>
        <category>ä¸–ç•Œè§‚</category>
      </categories>
      <tags>
        <tag>ä¸–ç•Œè§‚</tag>
        <tag>åŽ†å²</tag>
        <tag>å†›äº‹</tag>
        <tag>ç»æµŽ</tag>
        <tag>æ–‡å­¦</tag>
        <tag>äººç”Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2019-02-03 å…³äºŽè¯¥ä¸è¯¥è®©å¥³ä¼´ä¾£åœ¨è‡ªå·±æˆ¿æœ¬ä¸ŠåŠ åå­—çš„ç†è§£]]></title>
    <url>%2F2019%2F02%2F03%2F%E5%85%B3%E4%BA%8E%E8%AF%A5%E4%B8%8D%E8%AF%A5%E8%AE%A9%E4%BC%B4%E4%BE%A3%E5%9C%A8%E8%87%AA%E5%B7%B1%E6%88%BF%E6%9C%AC%E4%B8%8A%E5%8A%A0%E5%90%8D%E5%AD%97%E7%9A%84%E7%90%86%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[å…³äºŽè¯¥ä¸è¯¥è®©å¥³ä¼´ä¾£åœ¨è‡ªå·±æˆ¿æœ¬ä¸ŠåŠ åå­—çš„ç†è§£å…³äºŽè¿™ä¸ªé—®é¢˜,æˆ‘è®¤ä¸ºç”·å¥³åŒæ–¹ç»“å©š,å°±æ˜¯åœ¨å¼€ä¸€å®¶å…¬å¸,ç»è¥ä¸€å®¶å…¬å¸çš„ä¸šåŠ¡,å¼€å…¬å¸,ä¸ºäº†å…¬å¸å¯ä»¥æŒ‰ç…§åŒæ–¹ä¸€è‡´çš„ç›®æ ‡å‰è¡Œ,å°±è¦æœ‰ä¿éšœå¼±åŠ¿ã€å…ˆä»˜å‡ºä¸€æ–¹çš„åˆ¶åº¦åœ¨ã€‚å¾ˆæ˜Žæ˜¾,åœ¨ä¸€æ®µå©šå§»ä¸­,æ˜¯å¥³æ–¹å…ˆä»˜å‡º,ç”·æ–¹åŽä»˜å‡º,åŒ…æ‹¬å¥³æ–¹çš„é’æ˜¥ã€ç”Ÿå­©å­ã€ç…§é¡¾å®¶åº­ã€‚è€Œåœ¨çŽ°æœ‰çš„ç¤¾ä¼šå¤§ä½“åˆ¶åº¦ä¸‹,è¿˜è¿œè¿œæ²¡æœ‰å½¢æˆç”·å¥³å¹³ç­‰çš„å½¢åŠ¿,å¥³æ€§è¿˜æ˜¯å¤„äºŽåŠ£åŠ¿çš„,æ‰€ä»¥åœ¨å©šå§»ä¸­,å¥³æ–¹ä¹Ÿè‡ªç„¶è€Œç„¶çš„æ˜¯åŠ£åŠ¿çš„,æ‰€ä»¥æ—¢ç„¶ç”·å¥³åŒæ–¹è¦å…±åŒç»è¥ä¸€ä¸ªå®¶åº­ã€ä¸€ä¸ªå…±åŒä½“,éœ€è¦é¦–å…ˆä¿éšœåŠ£åŠ¿å’Œå…ˆä»˜å‡ºçš„ä¸€æ–¹ã€‚æ‰€ä»¥æˆ‘è®¤ä¸ºæ˜¯è¯¥è®©å¥³ä¼´ä¾£åœ¨è‡ªå·±æˆ¿æœ¬ä¸ŠåŠ åå­—çš„ã€‚]]></content>
      <categories>
        <category>ç»æµŽå­¦æ”¹å˜ä¸–ç•Œè§‚</category>
      </categories>
      <tags>
        <tag>ç»æµŽå­¦</tag>
        <tag>ä¸–ç•Œè§‚</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-08-25 Javascriptè®¾è®¡æ¨¡å¼]]></title>
    <url>%2F2018%2F08%2F25%2FJavascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[å•ä¾‹æ¨¡å¼ å•ä¾‹æ¨¡å¼æœ‰ä¸¤ä¸ªç‰¹ç‚¹: å…¨å±€æ€§å’Œå”¯ä¸€æ€§.å…¨å±€å”¯ä¸€æ€§æ˜¯æŒ‡åœ¨å…¨å±€çŽ¯å¢ƒä¸­,åªåˆ›å»ºå¯¹è±¡ä¸€æ¬¡ä¸”ä¿è¯å¯¹è±¡åœ¨åˆ›å»ºè¿‡åŽä¸è¢«å†æ¬¡åˆ›å»º.ä¸‹é¢æˆ‘ä»¬å°±æ¥æ¼”ç¤ºä¸€ä¸‹Javascriptè¯­è¨€çš„æ™®é€šç±»å•ä¾‹æ¨¡å¼å’Œé€æ˜Žå•ä¾‹æ¨¡å¼ æ™®é€šç±»å•ä¾‹æ¨¡å¼function GetSingleton(name) { this.name = name; this.instance = null; } GetSingleton.prototype.getName = function() { return this.name; }; GetSingleton.prototype.Singleton = function(name) { return this.instance || (this.instance = new GetSingleton(name)); }; let gary_one = GetSingleton.prototype.Singleton(&quot;gary_one&quot;); let gary_two = GetSingleton.prototype.Singleton(&quot;gary_two&quot;); //åœ¨è¿™é‡Œæ‰“å°: //true console.log(gary_one === gary_two); æ™®é€šç±»å•ä¾‹æ¨¡å¼(é—­åŒ…ç‰ˆæœ¬)function GetSingleton(name) { this.name = name; } GetSingleton.prototype.getName = function() { return this.name; }; let Singleton = (function() { let instance; return function(name) { return instance || (instance = new GetSingleton(name)); } })(); let gary_one = Singleton(&quot;gary_one&quot;); let gary_two = Singleton(&quot;gary_two&quot;); //åœ¨è¿™é‡Œæ‰“å°: //true console.log(gary_one === gary_two); é€æ˜Žå•ä¾‹æ¨¡å¼let GetSingleton = (function() { let instance; return function(html) { if(instance) { return instance; } this.html = html; this.init(); return instance = this; } })(); GetSingleton.prototype.init = function() { let div = document.createElement(&quot;div&quot;); div.innerHTML = this.html; document.body.appendChild(div); return div; }; let gary_one = new GetSingleton(&quot;gary_one&quot;); let gary_two = new GetSingleton(&quot;gary_two&quot;); //é¡µé¢ä¸Šåªæœ‰åˆ›é€ äº†ä¸€ä¸ªDIV DOMèŠ‚ç‚¹,å†…å®¹æ˜¯&quot;gary_one&quot; //åœ¨è¿™é‡Œæ‰“å°: //true console.log(gary_one === gary_two); é€æ˜Žå•ä¾‹æ¨¡å¼(ä»£ç†æ¨¡å¼ç‰ˆæœ¬)function GetSingleton(html) { this.html = html; this.init(); } GetSingleton.prototype.init = function() { let div = document.createElement(&quot;div&quot;); div.innerHTML = this.html; document.body.appendChild(div); } let Singleton = (function() { let instance; return function(html) { return instance || (instance = new GetSingleton(html)); } })(); let gary_one = new Singleton(&quot;gary_one&quot;); let gary_two = new Singleton(&quot;gary_two&quot;); //é¡µé¢ä¸Šåªæœ‰åˆ›é€ äº†ä¸€ä¸ªDIV DOMèŠ‚ç‚¹,å†…å®¹æ˜¯&quot;gary_one&quot; //åœ¨è¿™é‡Œæ‰“å°: //true console.log(gary_one === gary_two); Javascriptå•ä¾‹æ¨¡å¼ â€”â€”â€” å•ä¸€å¯¹è±¡let obj_only = { a() { console.log(&quot;a&quot;); }, b() { console.log(&quot;b&quot;); } }; //åœ¨è¿™é‡Œæ‰“å°: //a obj_only.a(); //åœ¨è¿™é‡Œæ‰“å°: //b obj_only.b(); //åŠ¨æ€ç©ºé—´å¯¹è±¡ let MyApp = {}; MyApp.namespace = function(model) { let parts = model.split(&quot;.&quot;), prototype = MyApp; for(let [key, value] of parts.entries()) { if(!prototype[value]) { prototype[value] = {}; } prototype = prototype[value]; } }; MyApp.namespace(&quot;model&quot;); MyApp.namespace(&quot;div.style&quot;); //åœ¨è¿™é‡Œæ‰“å°: //{model: {}, div: {style: {}}} console.log(MyApp); //é—­åŒ… function Person() { let _name = &quot;Gary&quot;, _age = 26; return function() { return `name: ${_name}, age: ${_age}`; } } let Gary = Person(); //åœ¨è¿™é‡Œæ‰“å°: //name: Gary, age: 26 console.log(Gary()); æƒ°æ€§å•ä¾‹æ¨¡å¼//é¦–å…ˆæ¼”ç¤ºçš„ä¸æ˜¯æƒ°æ€§å•ä¾‹æ¨¡å¼,è€Œæ˜¯å¯¹äºŽåˆ›é€ å•ä¸ªå¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼ let GetSingleton = (function (){ let div = document.createElement(&quot;div&quot;); div.innerHTML = &quot;Gary&quot;; div.style.display = &quot;none&quot;; document.body.appendChild(div); return div; })(); function Singleton() { document.getElementById(&quot;open&quot;).onclick = function(e) { let singletonDiv = GetSingleton; singletonDiv.style.display = &quot;block&quot;; //å–æ¶ˆå†’æ³¡äº‹ä»¶ e.stopImmediatePropagation(); }; } //è¿™ç§æƒ…å†µä¸‹,æ— è®ºè°ƒä¸è°ƒç”¨Singletonæ–¹æ³•,ç•Œé¢åœ¨æœ€å¼€å§‹åŠ è½½æ—¶,å°±å·²ç»è¿›è¡Œäº†DOMæ“ä½œ,æ·»åŠ äº†ä¸€ä¸ªDIV DOMèŠ‚ç‚¹,å¹¶æŠŠè¿™ä¸ªèŠ‚ç‚¹çš„å†…å®¹è®¾ç½®ä¸ºGary,æ˜¾ç¤ºæ–¹å¼è®¾ç½®ä¸ºnone,è¿™ç§æ–¹å¼çš„ç¡®æ—¶åˆ›é€ äº†å•ä¸ªå¯¹è±¡ä¸”ä¸å¯å†æ¬¡åˆ›é€ ,ä½†æ˜¯ç¼ºç‚¹è¿˜æ˜¯æ¯”è¾ƒæ˜Žæ˜¾çš„,åˆ›é€ ä¸åˆ›é€ å•ä¸ªå¯¹è±¡è·Ÿç»‘å®šäº‹ä»¶å¹¶æ²¡æœ‰å…³ç³»,å‡å¦‚æˆ‘åœ¨é¡µé¢ä¸Šå¹¶æ²¡æœ‰è§¦å‘ç»‘å®šçš„äº‹ä»¶,é¡µé¢ä¸Šåœ¨ä¸€å¼€å§‹è¿˜æ˜¯å…·æœ‰å·²ç»åˆ›é€ å¥½çš„DIV DOMèŠ‚ç‚¹çš„ Singleton(); function GetSingleton() { let div = document.createElement(&quot;div&quot;); div.innerHTML = &quot;Gary&quot;; div.style.display = &quot;none&quot;; document.body.appendChild(div); return div; } function Singleton() { document.getElementById(&quot;open&quot;).onclick = function(e) { let singletonDiv = GetSingleton(); singletonDiv.style.display = &quot;block&quot;; //å–æ¶ˆå†’æ³¡ e.stopImmediatePropagation(); }; } //è¿™ç§æƒ…å†µä¸‹,æ»¡è¶³äº†è°ƒç”¨æ—¶å†åˆ›é€ å•ä¸ªå¯¹è±¡çš„æ¡ä»¶,ä½†æ˜¯å¹¶ä¸æ»¡è¶³åˆ›é€ äº†å•ä¸ªå¯¹è±¡å¹¶ä¸å¯å†æ¬¡åˆ›é€ çš„æ¡ä»¶,åœ¨è¿™ç§æƒ…å†µä¸‹,æ¯ç‚¹å‡»ä¸€æ¬¡idä¸ºopençš„æŒ‰é’®ä¸€æ¬¡,å°±ä¼šåˆ›é€ ä¸€ä¸ªå¯¹è±¡,è¿™æ˜¾ç„¶æ˜¯ä¸ç¬¦åˆå•ä¾‹æ¨¡å¼çš„ç‰¹ç‚¹çš„ Singleton(); let GetSingleton = (function() { let res; return function() { if(!res) { res = document.createElement(&quot;div&quot;); res.innerHTML = &quot;Gary&quot;; res.style.display = &quot;none&quot;; document.body.appendChild(res); } return res; } })(); function Singleton() { document.getElementById(&quot;open&quot;).onclick = function(e) { let singletonDiv = GetSingleton(); singletonDiv.style.display = &quot;block&quot;; //å–æ¶ˆå†’æ³¡ e.stopImmediatePropagation(); }; } //è¿™ç§æ‰æ˜¯çœŸæ­£çš„æƒ°æ€§å•ä¾‹æ¨¡å¼,åœ¨è°ƒç”¨ç»‘å®šäº‹ä»¶æ—¶æ‰åˆ›é€ å•ä¸ªå¯¹è±¡,ä¸”ä¹Ÿæ»¡è¶³åˆ›é€ äº†å•ä¸ªå¯¹è±¡å¹¶ä¸å¯å†æ¬¡åˆ›é€ çš„æ¡ä»¶,ä½†æ˜¯è¿˜æ˜¯æœ‰ä¼˜åŒ–çš„ç©ºé—´çš„ Singleton(); æƒ°æ€§å•ä¾‹æ¨¡å¼(ä¼˜åŒ–ç‰ˆæœ¬)function GetSingleton(func) { let res; return function() { return res || (res = func.apply(this, arguments)); } } let singleton = GetSingleton(function() { let div = document.createElement(&quot;div&quot;); div.innerHTML = &quot;Gary&quot;; div.style.display = &quot;none&quot;; document.body.appendChild(div); return div; }); function Singleton() { document.getElementById(&quot;open&quot;).onclick = function(e) { let singletonDiv = singleton(); singletonDiv.style.display = &quot;block&quot;; //å–æ¶ˆå†’æ³¡äº‹ä»¶ e.stopImmediatePropagation(); }; } //è¿™æ˜¯æƒ°æ€§å•ä¾‹æ¨¡å¼çš„æœ€ç»ˆä¼˜åŒ–ç‰ˆæœ¬,æœ€æ˜¾è‘—çš„ç‰¹ç‚¹æ—¶å®ƒçš„å¤ç”¨æ€§,æ— è®ºæ˜¯åˆ›é€ ä»»ä½•çš„DOMèŠ‚ç‚¹,åªç”¨GetSingletonå‡½æ•°æ–¹æ³•,å¤–éƒ¨ä¼ å…¥ä¸€ä¸ªfuncå‡½æ•°å³å¯,ç«‹å³æ»¡è¶³åˆ›é€ å•ä¸€å¯¹è±¡ä¹‹åŽä¸å¯å†æ¬¡åˆ›å»ºçš„ç‰¹ç‚¹ Singleton(); æƒ°æ€§å•ä¾‹æ¨¡å¼çš„åº”ç”¨ è¿˜è®°å¾—jQueryå·¥å…·åº“çš„.oneå‡½æ•°æ–¹æ³•å˜›,å®ƒå°±æ˜¯æœ€ç»å…¸çš„å•ä¾‹æ¨¡å¼ä¾‹å­,æˆ‘ä»¬ä»Šå¤©æ¥æ¨¡æ‹Ÿä¸€ä¸‹ function GetSingleton(func) { let res; return function() { return res || (res = func.apply(this, arguments)); } } let bindEvent = GetSingleton(function () { document.getElementById(&quot;open&quot;).onclick = function(e) { alert(&quot;Gary&quot;); //å–æ¶ˆå†’æ³¡ e.stopImmediatePropagation(); }; console.log(&quot;bind~&quot;); return true; }); function render() { console.log(&quot;å¼€å§‹æ¸²æŸ“~&quot;); bindEvent(); } //åˆ‡å®žçš„å®žçŽ°äº†å•ä¾‹æ¨¡å¼&quot;ä¸€æœç»‘å®š,ç»ˆç”Ÿæ”¶ç›Š&quot;çš„ç‰¹æ€§ //åœ¨è¿™é‡Œæ‰“å°: //å¼€å§‹æ¸²æŸ“~ //bind~ //å¼€å§‹æ¸²æŸ“~ //å¼€å§‹æ¸²æŸ“~ render(); render(); render(); ç­–ç•¥æ¨¡å¼ ç­–ç•¥æ¨¡å¼çš„ä¸»è¦æ¡ä»¶æœ‰ä¸‰ä¸ª: å¯æ‰©å±•ã€å¯å¤ç”¨å’Œå¯æ›¿æ¢,å°±è®©æˆ‘ä»¬å…ˆæ¼”ç¤ºä¸€ä¸ªéžç­–ç•¥æ¨¡å¼ä¸‹çš„ä¾‹å­,æˆ‘ä»¬è¦è®¡ç®—å¹´ç»ˆå¥–,é¦–å…ˆè¦çŸ¥æ™“æœˆè–ªåŸºæ•°,ç„¶åŽå†çŸ¥é“å¥–åŠ±å€æ•°,å°±å¯ä»¥è®¡ç®—å‡ºæœ€åŽçš„å¹´ç»ˆå¥–,ä¸€èˆ¬æˆ‘ä»¬ä¼šè¿™ä¹ˆå†™ function getPerformance(performance, salary) { if(performance === &quot;S&quot;) { return salary * 4; } if(performance === &quot;A&quot;) { return salary * 3; } if(performance === &quot;B&quot;) { return salary * 2; } } //åœ¨è¿™é‡Œæ‰“å°: //80000 console.log(getPerformance(&quot;S&quot;, 20000)); //åœ¨è¿™é‡Œæ‰“å°: //120000 console.log(getPerformance(&quot;A&quot;, 40000)); éžç­–ç•¥æ¨¡å¼çš„ä¾‹å­,å­˜åœ¨å¾ˆå¤šç¼ºç‚¹,é¦–å…ˆ,ç­–ç•¥å¯¹è±¡ä¸å¯å¤ç”¨,ç­–ç•¥å¯¹è±¡é€»è¾‘å…¨éƒ½å†™åœ¨ä¸€ä¸ªå‡½æ•°å¯¹è±¡é‡Œé¢,å¹¶ä¸èƒ½æ‹¿å‡ºè¿›è¡Œå¤ç”¨,å…¶æ¬¡,æ‰©å±•å¾ˆä¸æ–¹ä¾¿,æ¯ä¸€æ¬¡æ‰©å±•éƒ½å¿…é¡»åŽ»æ”¹å˜ç­–ç•¥å¯¹è±¡æ‰€å¤„çš„é€»è¾‘å‡½æ•°å¯¹è±¡,æœ€åŽæ–°çš„ç­–ç•¥å¯¹è±¡ä¸å¯æ›¿æ¢æ–°çš„ç­–ç•¥å¯¹è±¡,æŽ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ä¼ ç»Ÿçš„ç­–ç•¥æ¨¡å¼è¿›è¡Œè§£å†³,é¦–å…ˆå°†ç­–ç•¥å¯¹è±¡æŠ½å–åˆ°å¤–é¢,å½¢æˆä¸€ä¸ªæŠ½è±¡çš„å¯¹è±¡ function PerformanceS() { } PerformanceS.prototype.getSalary = function(salary) { return salary * 4; }; function PerformanceA() { } PerformanceA.prototype.getSalary = function(salary) { return salary * 3; }; function PerformanceB() { } PerformanceB.prototype.getSalary = function(salary) { return salary * 2; }; function GetPerformanceSalary() { this.performance = null; this.salary = null; } GetPerformanceSalary.prototype.setPerformance = function(performance) { this.performance = performance; }; GetPerformanceSalary.prototype.setSalary = function(salary) { this.salary = salary; }; GetPerformanceSalary.prototype.getBonus = function() { return this.performance.getSalary(this.salary); }; let getPerformanceSalary = new GetPerformanceSalary(); getPerformanceSalary.setSalary(20000); getPerformanceSalary.setPerformance(new PerformanceS()); //åœ¨è¿™é‡Œæ‰“å°: //80000 console.log(getPerformanceSalary.getBonus()); getPerformanceSalary.setSalary(40000); getPerformanceSalary.setPerformance(new PerformanceA()); //åœ¨è¿™é‡Œæ‰“å°: //120000 console.log(getPerformanceSalary.getBonus()); ç­–ç•¥æ¨¡å¼ä¸‹çš„ç­–ç•¥å¯¹è±¡,å¤ç”¨æ€§ã€æ‰©å±•æ€§å’Œæ›¿æ¢æ€§éƒ½å¾ˆå¼º,ç­–ç•¥å¯¹è±¡çŽ°åœ¨æ˜¯ä»¥æŠ½è±¡å‡½æ•°çš„å½¢å¼è¿›è¡Œçš„å®šä¹‰,å¯ä»¥ç›´æŽ¥æ‹¿åŽŸæœ‰çš„æŠ½è±¡å‡½æ•°å¯¹è±¡è¿›è¡Œå¤ç”¨,ä¹Ÿå¯ä»¥å®šä¹‰æ–°çš„æŠ½è±¡å‡½æ•°å¯¹è±¡è¿›è¡Œæ‰©å±•,åœ¨æ›¿æ¢æ€§æ–¹é¢,è–ªé…¬åŸºæ•°å’Œç­–ç•¥å¯¹è±¡æ¨¡å¼éƒ½å¯æ ¹æ®setâ€¦æ–¹æ³•çš„æ–¹å¼è¿›è¡Œæ›¿æ¢,å¹¶ä¸”å¾—åˆ°ä¸åŒçš„ç»“æžœ Javascriptç­–ç•¥æ¨¡å¼let categories = { S(salary) { return salary * 4; }, A(salary) { return salary * 3; }, B(salary) { return salary * 2; } }; function getPerformance(performance, salary) { return categories[performance](salary); } //åœ¨è¿™é‡Œæ‰“å°: //80000 console.log(getPerformance(&quot;S&quot;, 20000)); //åœ¨è¿™é‡Œæ‰“å°: //120000 console.log(getPerformance(&quot;A&quot;, 40000)); ç­–ç•¥æ¨¡å¼ â€”â€” è¡¨å•éªŒè¯ ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥è¿›è¡Œè¡¨å•éªŒè¯,ä¹Ÿæ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•,é¦–å…ˆæˆ‘ä»¬å…ˆä¸ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥ç¼–å†™è¡¨å•éªŒè¯ function validate() { let userAgent = document.getElementById(&quot;user-agent&quot;); if(userAgent.username.value === &quot;&quot;) { return &quot;ç”¨æˆ·åä¸å¯ä¸ºç©º&quot;; } if(userAgent.password.value.length !== 6) { return &quot;å¯†ç é•¿åº¦å¿…é¡»ä¸º6ä½&quot;; } if(!/^1(3|5|8)[\d]{9}$/.test(userAgent.phone.value)) { return &quot;æ‰‹æœºå·ç ä¸ç¬¦åˆè§„èŒƒ&quot;; } } let userAgent = document.getElementById(&quot;user-agent&quot;); userAgent.onsubmit = function(e) { let errMsg = validate(); if(errMsg) { console.log(errMsg); } //å–æ¶ˆå†’æ³¡äº‹ä»¶ e.stopImmediatePropagation(); //å–æ¶ˆé»˜è®¤äº‹ä»¶ e.preventDefault(); }; ç­–ç•¥å¯¹è±¡ä¸å¯å¤ç”¨,å…¨éƒ½å¤„åœ¨validateå‡½æ•°ä½œç”¨åŸŸä¸‹,ä¸”ä¸å¯æ‰©å±•,æ‰©å±•å¿…é¡»åŽ»æ›´æ”¹validateæºä»£ç ,ä¸ç¬¦åˆå¼€æ”¾å°é—­åŽŸåˆ™,æ›´ä¸èƒ½æ›¿æ¢åœ¨ä»»ä½•çš„è¡¨å•æ ¡éªŒä¸Šé¢,åªèƒ½é’ˆå¯¹ç‰¹å®šçš„è¡¨å•(nameä¸ºusername,password,phoneçš„è¡¨å•)è¿›è¡Œæ ¡éªŒ,æ‰€ä»¥ä¸ä½¿ç”¨ç­–ç•¥æ¨¡å¼,æ•ˆæžœæžå·®,ä¸‹é¢æˆ‘ä»¬å°±ä½¿ç”¨ç­–ç•¥æ¨¡å¼æ¥è¿›è¡Œè¡¨å•æ ¡éªŒ let categories = { isNonUsername(value, errMsg) { if(value === &quot;&quot;) { return errMsg; } }, minLength(value, length, errMsg) { if(value.length !== parseInt(length)) { return errMsg; } }, isMobile(value, errMsg) { if(!/^1(3|5|8)[\d]{9}$/.test(value)) { return errMsg; } } }; function Validate() { this.cache = []; } Validate.prototype.add = function(dom, condition, errMsg) { this.cache.push(function() { let parts = condition.split(&quot;:&quot;); let categories_condition = parts.shift(); parts.unshift(dom.value); parts = [...parts, errMsg]; return categories[categories_condition].apply(dom, parts); }); }; Validate.prototype.start = function() { for(let [key, value] of this.cache.entries()) { let validateFunc = value; let errMsg = validateFunc(); if(errMsg) { return errMsg; } } }; function validate() { let userAgent = document.getElementById(&quot;user-agent&quot;), new_validate = new Validate(); new_validate.add(userAgent.username, &quot;isNonUsername&quot;, &quot;ç”¨æˆ·åä¸å¯ä¸ºç©º&quot;); new_validate.add(userAgent.password, &quot;minLength:6&quot;, &quot;å¯†ç é•¿åº¦å¿…é¡»ä¸º6ä½&quot;); new_validate.add(userAgent.phone, &quot;isMobile&quot;, &quot;æ‰‹æœºå·ç ä¸ç¬¦åˆè§„èŒƒ&quot;); let errMsg = new_validate.start(); if(errMsg) { return errMsg; } } let userAgent = document.getElementById(&quot;user-agent&quot;); userAgent.onsubmit = function(e) { let errMsg = validate(); if(errMsg) { console.log(errMsg); } //å–æ¶ˆå†’æ³¡äº‹ä»¶ e.stopImmediatePropagation(); //å–æ¶ˆé»˜è®¤äº‹ä»¶ e.preventDefault(); }; è¿™æ ·å°±åˆ©ç”¨ç­–ç•¥æ¨¡å¼çš„å¤ç”¨æ€§ã€æ‰©å±•æ€§ä»¥åŠæ›¿æ¢æ€§å®Œç¾Žçš„è§£å†³äº†è¡¨å•éªŒè¯,ä½ è¿™æ—¶å¯èƒ½ä¼šæœ‰ç–‘é—®,å‡å¦‚è¡¨å•é‡Œé¢ä¸€ä¸ªè¡¨å•é¡¹æœ‰å¤šä¸ªéªŒè¯æ¡ä»¶æ€Žä¹ˆåŠž,è¿™å¥—ç­–ç•¥æ¨¡å¼çš„æ–¹å¼ä¸å°±ä¸å¥½ä½¿äº†å˜›,åˆ«æ€¥,åªè¦ä¿®æ”¹ä¸€ä¸‹Validate.prototype.addå‡½æ•°æ–¹æ³•,å°±å¯ä»¥æ—¢å…¼å®¹ä¸€ä¸ªè¿˜å…¼å®¹å¤šä¸ªéªŒè¯æ¡ä»¶ let categories = { isNonUsername(value, errMsg) { if(value === &quot;&quot;) { return errMsg; } }, minLength(value, length, errMsg) { if(value.length !== parseInt(length)) { return errMsg; } }, isMobile(value, errMsg) { if(!/^1(3|5|8)[\d]{9}$/.test(value)) { return errMsg; } } }; function Validate() { this.cache = []; } Validate.prototype.add = function(dom, rules) { for(let [key, value] of rules.entries()) { this.cache.push((function() { let condition = value[&quot;condition&quot;], errMsg = value[&quot;errMsg&quot;]; return function() { let parts = condition.split(&quot;:&quot;); let categories_condition = parts.shift(); parts.unshift(dom.value); parts = [...parts, errMsg]; return categories[categories_condition].apply(dom, parts); } })()); } }; Validate.prototype.start = function() { for(let [key, value] of this.cache.entries()) { let validateFunc = value; let errMsg = validateFunc(); if(errMsg) { return errMsg; } } }; function validate() { let userAgent = document.getElementById(&quot;user-agent&quot;), new_validate = new Validate(); new_validate.add(userAgent.username, [{ condition: &quot;isNonUsername&quot;, errMsg: &quot;ç”¨æˆ·åä¸å¯ä¸ºç©º&quot; }, { condition: &quot;minLength:10&quot;, errMsg: &quot;ç”¨æˆ·åé•¿åº¦å¿…é¡»ä¸º10ä½&quot; }]); new_validate.add(userAgent.password, [{ condition: &quot;minLength:6&quot;, errMsg: &quot;å¯†ç é•¿åº¦å¿…é¡»ä¸º6ä½&quot; }]); new_validate.add(userAgent.phone, [{ condition: &quot;isMobile&quot;, errMsg: &quot;æ‰‹æœºå·ç ä¸å’Œè§„èŒƒ&quot; }]); let errMsg = new_validate.start(); if(errMsg) { return errMsg; } } let userAgent = document.getElementById(&quot;user-agent&quot;); userAgent.onsubmit = function(e) { let errMsg = validate(); if(errMsg) { console.log(errMsg); } //å–æ¶ˆå†’æ³¡äº‹ä»¶ e.stopImmediatePropagation(); //å–æ¶ˆé»˜è®¤äº‹ä»¶ e.preventDefault(); }; è¿™æ ·å°±å®Œç¾Žè§£å†³äº†å¤šä¸ªéªŒè¯æ¡ä»¶çš„é—®é¢˜,è¿™ç§ç­–ç•¥æ¨¡å¼å¯å¤ç”¨,å¯æ‰©å±•,å¯æ›¿æ¢,ååˆ†å®Œç¾Ž ä»£ç†æ¨¡å¼ ä¸‹é¢æˆ‘ä»¬è¦ä»‹ç»çš„æ˜¯ä»£ç†æ¨¡å¼,é¡¾åæ€ä¹‰,ä»£ç†æ¨¡å¼å°±æ˜¯é€šè¿‡ä»£ç†å±‚åŽ»æ›¿ä»£å®žä½“å¯¹è±¡å¤„ç†ä¸€äº›ä¿¡æ¯,å…¶å®žå°±æ˜¯åœ¨ä¿æŠ¤å®žä½“å¯¹è±¡,å‡å°‘å®žä½“å¯¹è±¡çš„èŒè´£,åœ¨è¿‡æ»¤ã€å¤„ç†ã€æ•´åˆä¿¡æ¯ä¹‹åŽå†äº¤ç»™å®žä½“å¯¹è±¡,è¿™æ ·ä¼šä½¿å¾—å®žä½“å¯¹è±¡å¾ˆè½»ä¾¿,å¯¹äºŽå®žä½“å¯¹è±¡çš„æ‰©å±•æ€§ã€ç»´æŠ¤æ€§ä»¥åŠæ›¿æ¢æ€§æœ‰å¾ˆå¤§çš„å¸®åŠ© function Flower() { } let xiaoming = { sendFlower(target) { let flower = new Flower(); target.receiveFlower(flower); } }; let A = { receiveFlower(flower) { console.log(&quot;å·²æ”¶åˆ°èŠ±æœµ: &quot; + flower); } }; let B = { receiveFlower(flower) { A.receiveFlower(flower); } }; //åœ¨è¿™é‡Œæ‰“å°: //å·²æ”¶åˆ°èŠ±æœµ: [object Object] xiaoming.sendFlower(B); è¿™æ ·å°±å½¢æˆäº†ä¸€ä¸ªå°æ˜Žé€ç»™å¥³ç¥žAèŠ±æœµè¡¨è¾¾æƒ³å’Œå¥¹æ‹çˆ±çš„å¿ƒæ„,åˆä¸å¤ªå¥½æ„æ€äº²è‡ªé€,åªå¥½è®©ä»–è·ŸAå…±åŒçš„å¥½å‹Bæ¥è¿›è¡Œä»£ç†é€,è¿™å°±æ˜¯ä¸€ä¸ªå…¸åž‹çš„ä»£ç†æ¨¡å¼çš„ä¾‹å­,ä½ å¯èƒ½ä¼šé—®,è¿™æ ·åšæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢,åªä¸è¿‡å¤šäº†ä¸€å±‚ç½¢äº†,çš„ç¡®è¿™æ ·åªæ˜¯å¤šæ·»åŠ äº†ä¸€å±‚è€Œå·²,ä½†æ˜¯å‡å¦‚æˆ‘ä»¬å†æ”¹ç¼–ä¸€ä¸‹å‰§æƒ…,ä½ å°±ä¼šæ„Ÿè§‰å¾ˆæœ‰æ„ä¹‰ function Flower() { } let xiaoming = { sendFlower(target) { let flower = new Flower(); target.receiveFlower(flower); } }; let A = { receiveFlower(flower) { console.log(&quot;å·²æ”¶åˆ°èŠ±æœµ: &quot; + flower); }, listenerBeHappy(func) { let self = this; setTimeout(function() { func.apply(self); }, 1000); } }; let B = { receiveFlower(flower) { A.listenerBeHappy(function () { this.receiveFlower(flower); }); } }; //åœ¨è¿™é‡Œæ‰“å°: //å·²æ”¶åˆ°èŠ±æœµ: [object Object] xiaoming.sendFlower(B); æ•…äº‹çš„å‰§æƒ…è½¬å˜æˆäº†è¿™æ ·,å°æ˜Žé€ç»™å¥³ç¥žAèŠ±æœµè¡¨è¾¾æƒ³å’Œå¥¹æ‹çˆ±çš„å¿ƒæ„,åˆä¸å¤ªå¥½æ„æ€äº²è‡ªé€,åªå¥½è®©ä»–è·ŸAå…±åŒçš„å¥½å‹Bæ¥è¿›è¡Œä»£ç†é€,Bæ¸…æ¥šAä»€ä¹ˆæ—¶é—´å¿ƒæƒ…æœ€å¥½,ä»€ä¹ˆæ—¶é—´å¯ä»¥æŽ¥å—åˆ«äººå¯¹å¥¹çš„è¡¨ç™½,æ‰€ä»¥Båœ¨Aå¿ƒæƒ…å¾ˆå¥½çš„æ—¶å€™å°†å°æ˜Žçš„èŠ±æœµè½¬äº¤ç»™å¥³ç¥žA,è™½ç„¶ä¹Ÿä¸è§å¾—å°æ˜Žçš„è¿½æ±‚ä¼šæˆåŠŸ,ä½†æ˜¯Bçš„ä»£ç†å·¥ä½œå……åˆ†è¡¨æ˜Žäº†ä»£ç†æ¨¡å¼ è™šæ‹Ÿä»£ç† æˆ‘ä»¬ä½¿ç”¨è™šæ‹Ÿä»£ç†æ¥å†™ä¸€ä¸ªæ‡’åŠ è½½å›¾ç‰‡çš„ä¾‹å­,é€šå¸¸æˆ‘ä»¬ä½¿ç”¨Jså†™åŠ è½½å›¾ç‰‡æ—¶,ä¸€èˆ¬ä¼šè¿™ä¹ˆåš let loadImage = (function () { let Image = document.createElement(&quot;img&quot;); document.body.appendChild(Image); return { setSrc(src) { Image.src = src; } } })(); loadImage.setSrc(&quot;https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png&quot;); ä½†æ˜¯è¿™æ ·åšæœ‰ä¸€ä¸ªç”¨æˆ·ä½“éªŒçš„äº¤äº’é—®é¢˜,å›¾ç‰‡è¿˜æ²¡æœ‰å®Œå…¨æ¸²æŸ“çš„æ—¶å€™,å›¾ç‰‡åŒºåŸŸæ˜¯ç©ºç™½çš„,è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»£ç†æ¥è™šæ‹Ÿåœ¨å›¾ç‰‡è¿˜æ²¡æœ‰å®Œå…¨æ¸²æŸ“å®Œæ¯•çš„æ—¶å€™,å…ˆåœ¨æ‰€åœ¨åŒºåŸŸå±•ç¤ºloadingåŠ è½½å›¾,å½“å›¾ç‰‡å®Œå…¨æ¸²æŸ“å®Œæ¯•ä¹‹åŽ,å†å°†æ‰€åœ¨åŒºåŸŸæ›¿æ¢æˆå›¾ç‰‡ let loadImage = (function () { let Image = document.createElement(&quot;img&quot;); document.body.appendChild(Image); return { setSrc(src) { Image.src = src; } } })(); let proxyLoadImage = (function () { let img = new Image(); img.onload = function() { loadImage.setSrc(this.src); }; return { setSrc(src) { loadImage.setSrc(&quot;../img/zy.jpeg&quot;); img.src = src; } } })(); proxyLoadImage.setSrc(&quot;https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png&quot;); è™šæ‹Ÿä»£ç†æ¨¡å¼å¯¹äºŽç”¨æˆ·æ˜¯æ— æ„Ÿçš„,ç”¨æˆ·ä¸ä¼šçŸ¥é“ä½ ä½¿ç”¨çš„æ˜¯å®žä½“å¯¹è±¡æŽ¥å£è¿˜æ˜¯è™šæ‹Ÿä»£ç†å¯¹è±¡æŽ¥å£,ä¸”è™šæ‹Ÿä»£ç†å¯¹è±¡çš„å¤ç”¨æ€§ã€æ‰©å±•æ€§ä»¥åŠå¯æ›¿æ¢æ€§éƒ½æ˜¯å¾ˆå®Œç¾Žçš„,å®Œå…¨ä¸ä¼šç ´ååŽŸæœ‰çš„å®žä½“å¯¹è±¡çš„ä»£ç ç»“æž„,ä¸‹é¢æˆ‘ä»¬æ¥å†™ä¸€ä¸ªä½¿ç”¨è™šæ‹Ÿä»£ç†æ¨¡å¼å®žçŽ°æ‰¹é‡æäº¤æ–‡ä»¶,èŠ‚çœæµè§ˆå™¨å’ŒåŽå°æœåŠ¡å™¨èµ„æºçš„ä¾‹å­ function syncReadFile(id) { console.log(&quot;å¼€å§‹ä¸Šä¼ æ–‡ä»¶: &quot; + id); } let checkbox = document.getElementsByName(&quot;checkbox&quot;); for(let i = 0; i &lt; checkbox.length; i ++) { checkbox[i].onclick = function(e) { if(this.checked) { syncReadFile(this.id); } //å–æ¶ˆå†’æ³¡äº‹ä»¶ e.stopImmediatePropagation(); }; } è¿™ä¸ªä¾‹å­,æˆ‘æ¯ç‚¹ä¸€æ¬¡å¤é€‰æ¡†,ä¸”å¤é€‰æ¡†é€‰ä¸­,å°±ä¼šä¸Šä¼ æ–‡ä»¶,åœ¨çŸ­æ—¶é—´å†…é€‰ä¸­å¤šä¸ªå¤é€‰æ¡†,ä¼šé€ æˆå¤§é‡çš„ä¸Šä¼ è¯·æ±‚å‘å‡º,é¢‘ç¹çš„è°ƒç”¨ä¸Šä¼ æŽ¥å£,ä¼šå¤§é‡æµªè´¹æµè§ˆå™¨å’ŒåŽå°æœåŠ¡å™¨èµ„æº,æ‰€ä»¥æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå‡½æ•°èŠ‚æµå‡½æ•°æ¥æ¨¡æ‹ŸsyncReadFileå‡½æ•°,ç›¸å½“äºŽæ˜¯ä¸€ä¸ªè™šæ‹Ÿä»£ç†æ¨¡å¼çš„å‡½æ•°,èŠ‚çœæµè§ˆå™¨å’ŒåŽå°æœåŠ¡å™¨èµ„æº function syncReadFile(id) { console.log(&quot;å¼€å§‹ä¸Šä¼ æ–‡ä»¶: &quot; + id); } let proxySyncReadFile = (function() { let cache = [], timer = null; return function (id) { let self = this; cache = [...cache, id]; if(timer) { return false; } timer = setTimeout(function () { let id_transform = cache.join(&quot;,&quot;); syncReadFile.call(self, id_transform); clearTimeout(timer); timer = null; cache.length = 0; }, 2000); } })(); let checkbox = document.getElementsByName(&quot;checkbox&quot;); for(let i = 0; i &lt; checkbox.length; i ++) { checkbox[i].onclick = function (e) { if(this.checked) { proxySyncReadFile(this.id); } //å–æ¶ˆå†’æ³¡äº‹ä»¶ e.stopImmediatePropagation(); }; } ç¼“å­˜ä»£ç† æˆ‘ä»¬å…ˆæ¥å†™ä¸€ä¸ªç¼“å­˜ä»£ç†è®¡ç®—ä¹˜ç§¯çš„ä¾‹å­,å½“ä¼ å…¥çš„å‚æ•°ä¸Žä¸Šä¸€æ¬¡ä¼ å…¥çš„å‚æ•°ç›¸åŒæ—¶,å°±ä½¿ç”¨ç¼“å­˜ä¸­çš„ä¹˜ç§¯ç»“æžœ,ä¸éœ€è¦å†æ¬¡è¿›è¡Œè®¡ç®— function getMultiple() { let cache = {}; function multiple() { let a = 1; for(let i = 0; i &lt; arguments.length; i ++) { a *= arguments[i]; } return a; } return function() { let cache_prototype = Array.prototype.join.call(arguments, &quot;_&quot;); if(cache[cache_prototype]) { return cache[cache_prototype]; } console.log(&quot;again&quot;); return cache[cache_prototype] = multiple.apply(this, arguments); } } let multipleForReal = getMultiple(); //åœ¨è¿™é‡Œæ‰“å°: //again //168 console.log(multipleForReal(4, 6, 7)); //åœ¨è¿™é‡Œæ‰“å°: //168 console.log(multipleForReal(4, 6, 7)); è®©æˆ‘ä»¬å°†äº‹æƒ…å˜å¾—æ›´æœ‰è¶£ä¸€äº› function plus() { let a = 0; for(let i = 0; i &lt; arguments.length; i ++) { a += arguments[i]; } return a; } function multiple() { let a = 1; for(let i = 0; i &lt; arguments.length; i ++) { a *= arguments[i]; } return a; } function getMethod(func) { let cache = {}; return function () { let cache_prototype = Array.prototype.join.call(arguments, &quot;_&quot;); if(cache[cache_prototype]) { return cache[cache_prototype]; } console.log(&quot;again&quot;); return cache[cache_prototype] = func.apply(this, arguments); } } let getMethodResult = getMethod(plus); //åœ¨è¿™é‡Œæ‰“å°: //again //20 console.log(getMethodResult(4, 8, 8)); //åœ¨è¿™é‡Œæ‰“å°: //20 console.log(getMethodResult(4, 8, 8)); let getMethodResult_multiple = getMethod(multiple); //åœ¨è¿™é‡Œæ‰“å°: //again //256 console.log(getMethodResult_multiple(4, 8, 8)); //åœ¨è¿™é‡Œæ‰“å°: //256 console.log(getMethodResult_multiple(4, 8, 8)); è¿­ä»£å™¨æ¨¡å¼ é™¤äº†æŸä¸€äº›å¤ä»£çš„è¯­è¨€,çŽ°ä»£çš„ç¨‹åºè¯­è¨€éƒ½å®žçŽ°äº†å†…ç½®è¿­ä»£å™¨,è¿­ä»£å™¨æ¨¡å¼æˆ–è®¸ä»Žæ¥éƒ½æ²¡æœ‰è¢«äººæ‰€å¬è¯´è¿‡,æˆ‘ä»¬ä»Šå¤©å°±ç”¨JavaScriptæ¥æ¨¡æ‹Ÿè¿­ä»£å™¨æ¨¡å¼ function each(arr, func) { for(let [key, value] of arr.entries()) { func.call(this, key, value); } } //åœ¨è¿™é‡Œæ‰“å°: //0 2 //1 6 //2 8 each([2, 6, 8], function (index, item) { console.log(index, item); }); è¿™åªæ˜¯å†…éƒ¨è¿­ä»£å™¨æ¨¡å¼,å°†è¿­ä»£é€»è¾‘æ”¾åœ¨å†…éƒ¨å®žçŽ°,ä½†æ˜¯è¿™æ ·åšå¾ˆä¸çµæ´»,æ¯”å¦‚æˆ‘è¦å®žçŽ°ä¸€ä¸ªä¿©æ•°ç»„æ˜¯å¦ç›¸ç­‰çš„å‡½æ•°compare,ä½ ä¼šå‘çŽ°compareçš„å®žçŽ°æ–¹å¼å¹¶ä¸ç¾Žè§‚,ä¸”å¾ˆä¸çµæ´» function each(arr, func) { for(let [key, value] of arr.entries()) { func.call(this, key, value); } } function compare(arr, arrAno) { if(arr.length !== arrAno.length) { throw new Error(&quot;ä¸¤ä¸ªæ•°ç»„ä¸ç›¸åŒ&quot;); } each(arr, function (index, item) { if(item !== arrAno[index]) { throw new Error(&quot;ä¸¤ä¸ªæ•°ç»„ä¸ç›¸åŒ&quot;); } }); console.log(&quot;ä¸¤ä¸ªæ•°ç»„æ˜¯ç›¸åŒçš„&quot;); } //åœ¨è¿™é‡Œæ‰“å°: //ä¸¤ä¸ªæ•°ç»„æ˜¯ç›¸åŒçš„ compare([1, 2, 5], [1, 2, 5]); //åœ¨è¿™é‡ŒæŠ¥é”™: //ä¸¤ä¸ªæ•°ç»„ä¸ç›¸åŒ compare([1, 2, 8], [1, 3, 6]); å¤–éƒ¨è¿­ä»£æ¨¡å¼ åŽæ¥å‡ºçŽ°äº†å¤–éƒ¨è¿­ä»£æ¨¡å¼,ä»£ç å¦‚ä¸‹,è¿™ç§è¿­ä»£æ¨¡å¼,çµæ´»çš„è§£å†³äº†å¤–éƒ¨ä¼ å…¥è¿­ä»£å™¨æ—¶,ä¸€äº›æ¯”è¾ƒå¤æ‚çš„éœ€æ±‚,ç»´æŠ¤æ€§ã€æ‰©å±•æ€§ã€çµæ´»æ€§éƒ½å¾ˆé«˜,ä¸”é’ˆå¯¹å¯¹è±¡å’Œæ•°ç»„,åªè¦æ‹¥æœ‰lengthå±žæ€§çš„å¯¹è±¡éƒ½å¯ä»¥è¿›è¡Œè¿­ä»£ function Iterator(obj) { let index = 0, length = obj.length; function next() { index++; } function isDone() { return index &lt; length; } function getCurrentItem() { return obj[index]; } return { length, next, isDone, getCurrentItem } } let iterator_arr = Iterator([55, 66, 99, 10, 1, 11, 28, 32]); //åœ¨è¿™é‡Œæ‰“å°: //55 //66 //99 //10 //1 //11 //28 //32 while(iterator_arr.isDone()) { console.log(iterator_arr.getCurrentItem()); iterator_arr.next(); } è¿™æ ·çš„è¯,æˆ‘ä»¬æ¥ç¼–å†™compareå‡½æ•°è¿›è¡Œä¸¤ä¸ªå‡½æ•°æ¯”å¯¹æ—¶,å°±ä¼šçµæ´»,æ›´å¯ç»´æŠ¤çš„å¤š function Iterator(obj) { let index = 0, length = obj.length; function next() { index++; } function getCurrentItem() { return obj[index]; } function isDone() { return index &gt;= length; } return { length, isDone, getCurrentItem, next }; } function compare(arr, arrAno) { if(arr.length !== arrAno.length) { throw new Error(&quot;ä¸¤ä¸ªæ•°ç»„ä¸ç›¸åŒ&quot;); } while(!arr.isDone() &amp;&amp; !arrAno.isDone()) { if(arr.getCurrentItem() !== arrAno.getCurrentItem()) { throw new Error(&quot;ä¸¤ä¸ªæ•°ç»„ä¸ç›¸åŒ&quot;); } arr.next(); arrAno.next(); } console.log(&quot;ä¸¤ä¸ªæ•°ç»„æ˜¯ç›¸åŒçš„&quot;); } let iterator = Iterator([1, 6, 8, 10, 55, 25, 36, 96]); let iterator_ano = Iterator([1, 6, 8, 10, 55, 25, 36, 96]); let iterator_diff = Iterator([1, 6, 8, 10, 55, 25, 36, 96]); let iterator_diff_ano = Iterator([1, 6, 8, 10, 55, 28, 36, 96]); //åœ¨è¿™é‡Œæ‰“å°: //ä¸¤ä¸ªæ•°ç»„æ˜¯ç›¸åŒçš„ compare(iterator, iterator_ano); //åœ¨è¿™é‡ŒæŠ¥é”™: //ä¸¤ä¸ªæ•°ç»„ä¸ç›¸åŒ compare(iterator_diff, iterator_diff_ano); jQueryä¸­çš„eachæ–¹æ³•,å°±æä¾›äº†è¿­ä»£çš„åŠŸèƒ½,ä½†æ˜¯eachæ–¹æ³•ä¸ä»…å¯ä»¥è¿­ä»£æ•°ç»„,è¿˜å¯ä»¥è¿­ä»£å¯¹è±¡,æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹eachæ–¹æ³•çš„æºä»£ç å®žçŽ°æ–¹å¼ $.each = function (obj, func) { let value, i = 0, length = obj.length; if(Object.prototype.toString.call(obj) === &quot;[object Array]&quot;) { for(; i &lt; length; i++) { value = func.call(this, i, obj[i]); if(value === false) { break; } } } else { for(i in obj) { value = func.call(this, i, obj[i]); if(value === false) { break; } } } } //åœ¨è¿™é‡Œæ‰“å°: //0 5 //1 8 //2 10 $.each([5, 8, 10, 3, 66], function (index, item) { if(item === 3) { return false; } console.log(index, item); }); è¿™æœŸé—´è¿˜ä½¿ç”¨äº†ä¸­æ–­è¿­ä»£å™¨æ¨¡å¼çš„åˆ¤æ–­è¯­å¥ if(value === false) break;å½“å‡½æ•°è¿”å›žfalseçš„æ—¶å€™,å°±å°†è¿­ä»£å™¨ç»ˆæ­¢æŽ‰,ç›´æŽ¥breakå‡ºforå¾ªçŽ¯,ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»åå‘è¿­ä»£å‡½æ•°,æˆ‘ä»¬åˆ†åˆ†é’Ÿæžå®š function reverseEach(obj, func) { let value; for(let l = obj.length - 1; l &gt;=0; l--) { value = func.call(this, l, obj[l]); if(value === false) { break; } } } //åœ¨è¿™é‡Œæ‰“å°: //4 101 //3 99 //2 66 reverseEach([10, 88, 66, 99, 101], function (index, item) { if(item === 88) { return false; } console.log(index, item); });]]></content>
      <categories>
        <category>Javascriptè®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-05-21 ä½¿ç”¨Canvasç»˜åˆ¶åœ†è§’æŒ‰é’®]]></title>
    <url>%2F2018%2F05%2F21%2F%E4%BD%BF%E7%94%A8Canvas%E7%BB%98%E5%88%B6%E5%9C%86%E8%A7%92%E6%8C%89%E9%92%AE%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨Canvaså¯è§†åŒ–å·¥å…·ç»˜åˆ¶åœ†è§’æŒ‰é’® æœ€è¿‘åˆšæŽ¥è§¦äº†Canvaså¯è§†åŒ–å·¥å…·,ä¸‹é¢é€šè¿‡ä¸€ä¸ªä½¿ç”¨Canvasç»˜åˆ¶çš„åœ†è§’æŒ‰é’®çš„ä¾‹å­,æ¥å®žè·µå­¦åˆ°çš„Canvasç»éªŒ //å¯¹åŠ è½½å®Œæˆäº‹ä»¶çš„å°è£…,åœ¨æœ¬äººå†™çš„æ—¥å¿—2018-05-06-å°è£…çš„ä¸€äº›å°å·¥å…·ä¸­æœ‰è¯¦ç»†æè¿°,åœ¨è¿™é‡Œä¸å†åšæ›´å¤šçš„èµ˜è¿° let addEvent = (eventLoad) =&gt; { let load = window.onload; if(typeof load !== &quot;function&quot;) { window.onload = eventLoad; } else { window.onload = function() { load(); eventLoad(); }; } }; //Canvasç»˜åˆ¶åœ†è§’æŒ‰é’®çš„å‡½æ•° let canvasRadiusButton = () =&gt; { //å‡å¦‚DOM-Coreä¸­ä¸å­˜åœ¨getElementByIdæ–¹æ³•,åˆ™è¿”å›žfalse,é€€å‡ºå‡½æ•° if(!document.getElementById) return false; //å‡å¦‚DOM-Coreä¸­ä¸å­˜åœ¨createElementæ–¹æ³•,åˆ™è¿”å›žfalse,é€€å‡ºå‡½æ•° if(!document.createElement) return false; //å‡å¦‚DOMä¸­ä¸å­˜åœ¨idåä¸ºhomeçš„å…ƒç´ èŠ‚ç‚¹,åˆ™è¿”å›žfalse,é€€å‡ºå‡½æ•° if(!document.getElementById(&quot;home&quot;)) return false; //èŽ·å–idåä¸ºhomeçš„å…ƒç´ èŠ‚ç‚¹ let home = document.getElementById(&quot;home&quot;), //åˆ›é€ å‡ºcanvaså…ƒç´ èŠ‚ç‚¹æ ‡ç­¾ canvas = document.createElement(&quot;canvas&quot;); //è®¾ç½®canvaså…ƒç´ èŠ‚ç‚¹æ ‡ç­¾çš„å®½åº¦å’Œé«˜åº¦éƒ½ä¸º200px canvas.width = 200; canvas.height = 200; //è®¾ç½®canvasç»˜åˆ¶ç”»å¸ƒçš„ç±»åž‹ä¸º: 2d(å¹³é¢ç”»å¸ƒ) let ctx = canvas.getContext(&quot;2d&quot;); //ç»˜åˆ¶ç”»å¸ƒå¼€å§‹ç»˜åˆ¶è·¯å¾„ ctx.beginPath(); //è®¾ç½®ç»˜åˆ¶ç”»å¸ƒçš„èµ·ç‚¹åæ ‡ä¸º: (12, 20) ctx.moveTo(12, 20); //ä½¿ç”¨è´å¡žå°”æ›²çº¿åŽ»ç»˜åˆ¶åœ†è§’ //bezierCurveToæ–¹æ³•æœ‰ä¸‰ç»„åæ ‡å‚æ•°,å‰é¢ä¸¤ç»„ä¸ºä¸¤ä¸ªæŽ§åˆ¶ç‚¹ä½ç½®,åˆ©ç”¨è¿™ä¸¤ä¸ªæŽ§åˆ¶ç‚¹å¯ä»¥å®Œç¾Žçš„ç”»å‡ºåŠåœ†ã€æ¤­åœ†ç”šè‡³æ˜¯åœ†è§’,æœ€åŽä¸€ç»„ä¸ºæ›²çº¿ç»ˆç‚¹çš„ä½ç½® ctx.bezierCurveTo(12, 16, 15, 14, 19, 14); //ç»˜åˆ¶ç›´çº¿è‡³ç”»å¸ƒçš„(129, 14)åæ ‡ ctx.lineTo(129, 14); //ç»§ç»­ä½¿ç”¨è´å¡žå°”æ›²çº¿ç»˜åˆ¶åœ†è§’ ctx.bezierCurveTo(133, 14, 136, 16, 136, 20); //ç»˜åˆ¶ç›´çº¿è‡³ç”»å¸ƒçš„(136, 45)åæ ‡ ctx.lineTo(136, 45); //ç»§ç»­ä½¿ç”¨è´å¡žå°”æ›²çº¿ç»˜åˆ¶åœ†è§’ ctx.bezierCurveTo(136, 49, 133, 51, 129, 51); //ç»˜åˆ¶ç›´çº¿è‡³ç”»å¸ƒçš„(19, 51)åæ ‡ ctx.lineTo(19, 51); //ç»§ç»­ä½¿ç”¨è´å¡žå°”æ›²çº¿ç»˜åˆ¶åœ†è§’ ctx.bezierCurveTo(15, 51, 12, 49, 12, 45); //ç»˜åˆ¶ç›´çº¿è‡³ç”»å¸ƒçš„(12, 20)åæ ‡ ctx.lineTo(12, 20); //ç»˜åˆ¶ç”»å¸ƒç»“æŸç»˜åˆ¶è·¯å¾„ ctx.closePath(); //è®¾ç½®ç”»å¸ƒè·¯å¾„çš„å¡«å……æ ·å¼ä¸º: rgba(255, 255, 0, 0.8) ctx.fillStyle = &quot;rgba(255, 255, 0, 0.8)&quot;; //è¿›è¡Œç”»å¸ƒå¡«å…… ctx.fill(); //è®¾ç½®ç”»å¸ƒè·¯å¾„çš„coloræ ·å¼ä¸º: rgba(255, 0, 0, 0.5) ctx.strokeStyle = &quot;rgba(255, 0, 0, 0.5)&quot;; //ç”»å¸ƒè·¯å¾„ç»˜åˆ¶å®Œæ¯•,å®žçŽ°ç»˜åˆ¶æ¨¡åž‹ ctx.stroke(); //å°†canvaså…ƒç´ èŠ‚ç‚¹æ·»åŠ åˆ°homeå…ƒç´ èŠ‚ç‚¹é‡Œé¢,ä½œä¸ºhomeå…ƒç´ èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ home.appendChild(canvas); }; addEvent(canvasRadiusButton);]]></content>
      <categories>
        <category>Canvas</category>
      </categories>
      <tags>
        <tag>Canvas</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-05-21 Javascriptæ•°æ®ç»“æž„ä¸Žç®—æ³•]]></title>
    <url>%2F2018%2F05%2F21%2FJavascript%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[æ ˆ Stack æ ˆæ˜¯æ•°æ®ç»“æž„ä¸­æ¯”è¾ƒç®€å•çš„é¡ºåºæ•°æ®ç»“æž„,ç‰¹ç‚¹æ˜¯: åŽè¿›å…ˆå‡º,æ–°çš„å…ƒç´ æˆ–è€…ä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºå¾…åˆ é™¤çš„å…ƒç´ æ›´æŽ¥è¿‘ä¸Žæ ˆé¡¶,è€Œæ—§çš„å…ƒç´ æ›´æŽ¥è¿‘äºŽæ ˆåº•,ç”Ÿæ´»ä¸­æœ‰å¾ˆå¤šæ ˆçš„ä¾‹å­,æ¯”å¦‚è¯´å †åœ¨ä¸€èµ·çš„ä¹¦,å†æ¯”å¦‚è¯´ç‰¹åˆ«æ‹¥æŒ¤çš„åœ°é“,ä½ å¯ä»¥ç†è§£ä¸ºä»»ä½•åªæœ‰ä¸€ä¸ªå‡ºå£çš„äº‹ç‰©,éƒ½å¯ä»¥ä½œä¸ºæ ˆæ¥ä½¿ç”¨,åœ¨Javascriptä¸­,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿæ ˆçš„å®žçŽ°,é¦–å…ˆæ˜¯ES5ç‰ˆæœ¬ //å…¨å±€å£°æ˜Žä¸€ä¸ªæ•°ç»„å˜é‡: stack_mock let stack_mock = []; //å£°æ˜Žä¸€ä¸ªå‡½æ•°,è¿™é‡Œå½“ä½œæ ˆStackçš„ç±» function Stack (){ } //å‘æ ˆå†…æ·»åŠ å…ƒç´  Stack.prototype.push = function(element) { return stack_mock.push(element); }; //æ ˆé¡¶åˆ é™¤å…ƒç´  Stack.prototype.pop = function() { return stack_mock.pop(); }; //æ ¡éªŒæ ˆæ˜¯å¦ä¸ºç©º Stack.prototype.isEmpty = function() { return stack_mock.length === 0; }; //èŽ·å–æ ˆé¡¶çš„å…ƒç´  Stack.prototype.peek = function() { let len = stack_mock.length; return stack_mock[len - 1]; }; //èŽ·å–æ ˆå†…å…ƒç´ çš„ä¸ªæ•° Stack.prototype.size = function() { return stack_mock.length; }; //å¯¹æ ˆå†…æ‰€æœ‰å…ƒç´ è¿›è¡Œæ‰“å° Stack.prototype.print = function() { return stack_mock.toString(); }; //å¯¹æ ˆè¿›è¡Œæ¸…ç©º Stack.prototype.clear = function() { stack_mock = []; }; //å£°æ˜Žä¸€ä¸ªæ ˆStackç±»çš„å®žä¾‹ let stack = new Stack(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //å‘æ ˆä¸­æ·»åŠ å…ƒç´  stack.push(&quot;Gary&quot;); stack.push(&quot;Lily&quot;); stack.push(&quot;Frank&quot;); stack.push(&quot;Simon&quot;); //åœ¨è¿™é‡Œæ‰“å°æ·»åŠ å…ƒç´ ä¹‹åŽçš„è¿”å›žå€¼ //è¿™é‡Œæ‰“å°æ ˆå†…çš„å…ƒç´ ä¸ªæ•°: //5 console.log(stack.push(&quot;Aaron&quot;)); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //false console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //5 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;Aaron&quot; console.log(stack.peek()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…æ‰€æœ‰çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //Gary,Lily,Frank,Simon,Aaron console.log(stack.print()); //åœ¨è¿™é‡Œå¯¹æ ˆå†…å…ƒç´ ä»Žæ ˆé¡¶è¿›è¡Œåˆ é™¤ //è¿™é‡Œæ‰“å°: //Aaron console.log(stack.pop()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //4 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;Simon&quot; console.log(stack.peek()); //å¯¹æ ˆè¿›è¡Œæ¸…ç©º stack.clear(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); è¿™ç§æ–¹å¼stack_mockæ•°ç»„å˜é‡æš´éœ²åœ¨å…¨å±€ä¸­,å…¶ä»–äººå¯ä»¥éšæ„ä¿®æ”¹,å¾ˆä¸å®‰å…¨,ä¸”ä¸€ä¸ªç±»çš„å®žä¾‹åªèƒ½å¯¹åº”ä¸€ä¸ªç±»ä¼¼stack_mockçš„æ•°ç»„å˜é‡,å¾ˆä¸æ–¹ä¾¿,æ‰€ä»¥æœ€å¥½æ”¾åœ¨ç±»çš„å†…éƒ¨æˆ–è€…ä¸Žç±»è¿›è¡Œæ˜ å°„,ä¸‹é¢æ˜¯æ”¹è¿›ä¹‹åŽçš„ES6ç‰ˆæœ¬ //å£°æ˜Žä¸€ä¸ªç±»å‡½æ•°,è¿™é‡Œå½“ä½œæ ˆStackçš„ç±» class Stack { constructor() { //åœ¨ç±»å‡½æ•°å†…éƒ¨å®šä¹‰stack_mockå±žæ€§,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ this[&quot;stack_mock&quot;] = []; } //å‘æ ˆå†…æ·»åŠ å…ƒç´  push(element) { return this[&quot;stack_mock&quot;].push(element); } //æ ˆé¡¶åˆ é™¤å…ƒç´  pop() { return this[&quot;stack_mock&quot;].pop(); } //æ ¡éªŒæ ˆæ˜¯å¦ä¸ºç©º isEmpty() { return this[&quot;stack_mock&quot;].length === 0; } //èŽ·å–æ ˆé¡¶å…ƒç´  peek() { let len = this[&quot;stack_mock&quot;].length; return this[&quot;stack_mock&quot;][len - 1]; } //èŽ·å–æ ˆå†…å…ƒç´ çš„ä¸ªæ•° size() { return this[&quot;stack_mock&quot;].length; } //å¯¹æ ˆå†…æ‰€æœ‰å…ƒç´ è¿›è¡Œæ‰“å° print() { return this[&quot;stack_mock&quot;].toString(); } //å¯¹æ ˆè¿›è¡Œæ¸…ç©º clear() { this[&quot;stack_mock&quot;] = []; } } //å£°æ˜Žä¸€ä¸ªæ ˆStackç±»çš„å®žä¾‹ let stack = new Stack(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //å‘æ ˆä¸­æ·»åŠ å…ƒç´  stack.push(&quot;Gary&quot;); stack.push(&quot;Lily&quot;); stack.push(&quot;Frank&quot;); stack.push(&quot;Simon&quot;); //åœ¨è¿™é‡Œæ‰“å°æ·»åŠ å…ƒç´ ä¹‹åŽçš„è¿”å›žå€¼ //è¿™é‡Œæ‰“å°æ ˆå†…çš„å…ƒç´ ä¸ªæ•°: //5 console.log(stack.push(&quot;Aaron&quot;)); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //false console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //5 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;Aaron&quot; console.log(stack.peek()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…æ‰€æœ‰çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //Gary,Lily,Frank,Simon,Aaron console.log(stack.print()); //åœ¨è¿™é‡Œå¯¹æ ˆå†…å…ƒç´ ä»Žæ ˆé¡¶è¿›è¡Œåˆ é™¤ //è¿™é‡Œæ‰“å°: //Aaron console.log(stack.pop()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //4 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;Simon&quot; console.log(stack.peek()); //å¯¹æ ˆè¿›è¡Œæ¸…ç©º stack.clear(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); è¿™ç§æ–¹å¼ä¸ä»…é¿å…äº†æ•°ç»„å˜é‡æš´éœ²åœ¨å…¨å±€è¢«éšæ„ä¿®æ”¹çš„é£Žé™©,è¿˜é¿å…äº†ä¸€ä¸ªæ•°ç»„å˜é‡åªèƒ½å¯¹åº”ä¸€ä¸ªç±»çš„å®žä¾‹çš„çª˜å¢ƒ,ä½†æ˜¯åœ¨ç±»å‡½æ•°å†…éƒ¨çš„å±žæ€§,é€šè¿‡å®žä¾‹æ˜¯å¯ä»¥è¿›è¡ŒèŽ·å–å’Œä¿®æ”¹çš„,æ‰€ä»¥å†…éƒ¨å±žæ€§è¢«éšæ„ä¿®æ”¹çš„é—®é¢˜åˆæš´éœ²äº†å‡ºæ¥,ç±»ä¼¼äºŽè¿™æ · //å£°æ˜Žä¸€ä¸ªæ ˆStackç±»çš„å®žä¾‹ let stack = new Stack(); //èŽ·å–åˆ°ç±»å‡½æ•°å†…éƒ¨å±žæ€§&quot;stack_mock&quot; let stack_mock = stack[&quot;stack_mock&quot;]; //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //å‘æ ˆä¸­æ·»åŠ å…ƒç´  stack.push(&quot;Gary&quot;); stack.push(&quot;Lily&quot;); stack.push(&quot;Frank&quot;); stack.push(&quot;Simon&quot;); //åœ¨è¿™é‡Œæ‰“å°æ·»åŠ å…ƒç´ ä¹‹åŽçš„è¿”å›žå€¼ //è¿™é‡Œæ‰“å°æ ˆå†…çš„å…ƒç´ ä¸ªæ•°: //5 console.log(stack.push(&quot;Aaron&quot;)); //è®¾ç½®ç±»å‡½æ•°å†…éƒ¨å±žæ€§&quot;stack_mock&quot;ä¸ºç©ºæ•°ç»„ stack[&quot;stack_mock&quot;] = []; //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //undefined console.log(stack.peek()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…æ‰€æœ‰çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;&quot; console.log(stack.print()); //åœ¨è¿™é‡Œå¯¹æ ˆå†…å…ƒç´ ä»Žæ ˆé¡¶è¿›è¡Œåˆ é™¤ //è¿™é‡Œæ‰“å°: //undefined console.log(stack.pop()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //undefined console.log(stack.peek()); //å¯¹æ ˆè¿›è¡Œæ¸…ç©º stack.clear(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); æ˜Žæ˜Žå·²ç»æ·»åŠ åˆ°æ ˆå†…çš„å…ƒç´ ,ç›´æŽ¥è¢«å¤–éƒ¨è®¾ç½®å†…éƒ¨å±žæ€§ä¸ºç©ºæ•°ç»„,ç»™åˆ é™¤æŽ‰äº†,è¿™å²‚ä¸æ˜¯å¾ˆå°´å°¬,æ‰€ä»¥æƒ³è¦åˆ©ç”¨Symbol ES6ä¸­è¿™ç§æžšä¸¾æ–°è¯­æ³•è¿›è¡Œæ”¹è¿› //å£°æ˜Žä¸€ä¸ªå¯å…¬ç”¨çš„Symbolçš„æžšä¸¾å˜é‡: stack_mock //ä¸ºäº†é¿å…æ­¤å˜é‡åœ¨å…¨å±€ä¸­å¯ä»¥è½»æ˜“æ‹¿åˆ°å¹¶è¿›è¡Œéšæ„ä¿®æ”¹,åœ¨å¤–åŒ…ä¸€å±‚è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ç”¨å‡½æ•°ä½œç”¨åŸŸæ¥ä¿è¯å®ƒåœ¨å…¨å±€ä¸­æ‹¿ä¸åˆ°,ä¸”ä¹Ÿä¿®æ”¹ä¸äº† let Stack = (function (){ let stack_mock = Symbol(); //å£°æ˜Žä¸€ä¸ªç±»å‡½æ•°,è¿™é‡Œå½“ä½œæ ˆStackçš„ç±» class Stack { constructor() { //åœ¨ç±»å‡½æ•°å†…éƒ¨å®šä¹‰stack_mock Symbolå±žæ€§,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ this[stack_mock] = []; } //å‘æ ˆå†…æ·»åŠ å…ƒç´  push(element) { return this[stack_mock].push(element); } //æ ˆé¡¶åˆ é™¤å…ƒç´  pop() { return this[stack_mock].pop(); } //æ ¡éªŒæ ˆæ˜¯å¦ä¸ºç©º isEmpty() { return this[stack_mock].length === 0; } //èŽ·å–æ ˆé¡¶å…ƒç´  peek() { let len = this[stack_mock].length; return this[stack_mock][len - 1]; } //èŽ·å–æ ˆå†…å…ƒç´ çš„ä¸ªæ•° size() { return this[stack_mock].length; } //å¯¹æ ˆå†…æ‰€æœ‰å…ƒç´ è¿›è¡Œæ‰“å° print() { return this[stack_mock].toString(); } //å¯¹æ ˆè¿›è¡Œæ¸…ç©º clear() { this[stack_mock] = []; } } //è¿”å›žç±»å‡½æ•°Stack return Stack; })(); //å£°æ˜Žä¸€ä¸ªæ ˆStackç±»çš„å®žä¾‹ let stack = new Stack(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //å‘æ ˆä¸­æ·»åŠ å…ƒç´  stack.push(&quot;Gary&quot;); stack.push(&quot;Lily&quot;); stack.push(&quot;Frank&quot;); stack.push(&quot;Simon&quot;); //åœ¨è¿™é‡Œæ‰“å°æ·»åŠ å…ƒç´ ä¹‹åŽçš„è¿”å›žå€¼ //è¿™é‡Œæ‰“å°æ ˆå†…çš„å…ƒç´ ä¸ªæ•°: //5 console.log(stack.push(&quot;Aaron&quot;)); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //false console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //5 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;Aaron&quot; console.log(stack.peek()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…æ‰€æœ‰çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //Gary,Lily,Frank,Simon,Aaron console.log(stack.print()); //åœ¨è¿™é‡Œå¯¹æ ˆå†…å…ƒç´ ä»Žæ ˆé¡¶è¿›è¡Œåˆ é™¤ //è¿™é‡Œæ‰“å°: //Aaron console.log(stack.pop()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //4 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;Simon&quot; console.log(stack.peek()); //å¯¹æ ˆè¿›è¡Œæ¸…ç©º stack.clear(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); è¿™æ—¶å€™å¤–éƒ¨ç±»çš„å®žä¾‹,çœ‹æ ·å­å¥½æƒ³å®Œå…¨æ‹¿ä¸åˆ°å†…éƒ¨çš„Symbolæžšä¸¾å±žæ€§,å…¶å®žæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®Œå…¨æ‹¿åˆ°:getOwnPropertySymbols(ä»…å¯ä»¥æ‹¿åˆ°å¯¹è±¡çš„Symbolæžšä¸¾å±žæ€§,åŒ…å«ç»§æ‰¿)å’ŒReflect.ownKeys(æ— è®ºæ˜¯Symbolæžšä¸¾å±žæ€§è¿˜æ˜¯å¯¹è±¡è‡ªèº«æ‰€æ‹¥æœ‰çš„å±žæ€§éƒ½å¯ä»¥æ‹¿åˆ°,ä¹ŸåŒ…å«ç»§æ‰¿),è¿™æ—¶å€™åŽ»èŽ·å–åˆ°Symbolæžšä¸¾å±žæ€§,å¹¶è¿›è¡Œè®¾ç½®ä¸ºç©ºæ•°ç»„,ä¾ç„¶å¯ä»¥åœ¨å¤–éƒ¨åˆ é™¤å†…éƒ¨æžšä¸¾å±žæ€§æ•°ç»„çš„å…ƒç´ ,ç±»ä¼¼äºŽè¿™æ · //å£°æ˜Žä¸€ä¸ªæ ˆStackç±»çš„å®žä¾‹ let stack = new Stack(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //å‘æ ˆä¸­æ·»åŠ å…ƒç´  stack.push(&quot;Gary&quot;); stack.push(&quot;Lily&quot;); stack.push(&quot;Frank&quot;); stack.push(&quot;Simon&quot;); //åœ¨è¿™é‡Œæ‰“å°æ·»åŠ å…ƒç´ ä¹‹åŽçš„è¿”å›žå€¼ //è¿™é‡Œæ‰“å°æ ˆå†…çš„å…ƒç´ ä¸ªæ•°: //5 console.log(stack.push(&quot;Aaron&quot;)); //èŽ·å–å†…éƒ¨çš„Symbolæžšä¸¾å±žæ€§ //ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ //let stack_mock = Object.getOwnPropertySymbols(stack)[0]; let stack_mock = Reflect.ownKeys(stack)[0]; //è®¾ç½®å†…éƒ¨çš„Symbolæžšä¸¾å±žæ€§å€¼ä¸ºç©ºæ•°ç»„ stack[stack_mock] = []; //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //undefined console.log(stack.peek()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…æ‰€æœ‰çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;&quot; console.log(stack.print()); //åœ¨è¿™é‡Œå¯¹æ ˆå†…å…ƒç´ ä»Žæ ˆé¡¶è¿›è¡Œåˆ é™¤ //è¿™é‡Œæ‰“å°: //undefined console.log(stack.pop()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //undefined console.log(stack.peek()); //å¯¹æ ˆè¿›è¡Œæ¸…ç©º stack.clear(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); é’ˆå¯¹è¿™ç§æƒ…å†µ,å°è¯•ä½¿ç”¨WeakMapé›†åˆæ¥è§£å†³,WeakMapæ˜¯Mapçš„ä¸€ç§å½¢å¼,å®ƒåªèƒ½è®¾ç½®keyä¸ºå¯¹è±¡çš„å±žæ€§,ä¸”åœ¨æ— æ³•é€šè¿‡ç±»å®žä¾‹çš„ä»»ä½•æ–¹æ³•æ¥èŽ·å–å¹¶è®¾ç½® let Stack = (function (){ //å£°æ˜Žä¸€ä¸ªå¯å…¬ç”¨çš„WeakMapçš„é›†åˆå˜é‡: stack_mock //ä¸ºäº†é¿å…æ­¤å˜é‡åœ¨å…¨å±€ä¸­å¯ä»¥è½»æ˜“æ‹¿åˆ°å¹¶è¿›è¡Œéšæ„ä¿®æ”¹,åœ¨å¤–åŒ…ä¸€å±‚è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ç”¨å‡½æ•°ä½œç”¨åŸŸæ¥ä¿è¯å®ƒåœ¨å…¨å±€ä¸­æ‹¿ä¸åˆ°,ä¸”ä¹Ÿä¿®æ”¹ä¸äº† let stack_mock = new WeakMap(); //å£°æ˜Žä¸€ä¸ªç±»å‡½æ•°,è¿™é‡Œå½“ä½œæ ˆStackçš„ç±» class Stack { constructor() { //åœ¨ç±»å‡½æ•°å†…éƒ¨é€šè¿‡WeakMapé›†åˆå˜é‡è®¾ç½®æœ¬ç±»,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ stack_mock.set(this, []); } //å‘æ ˆå†…æ·»åŠ å…ƒç´  push(element) { let stack_arr = stack_mock.get(this); let stack_index = stack_arr.push(element); stack_mock.set(this, stack_arr); return stack_index; } //æ ˆé¡¶åˆ é™¤å…ƒç´  pop() { let stack_arr = stack_mock.get(this); let stack_item = stack_arr.pop(); stack_mock.set(this, stack_arr); return stack_item; } //æ ¡éªŒæ ˆæ˜¯å¦ä¸ºç©º isEmpty() { let stack_arr = stack_mock.get(this); return stack_arr.length === 0; } //èŽ·å–æ ˆé¡¶å…ƒç´  peek() { let stack_arr = stack_mock.get(this), len = stack_arr.length; return stack_arr[len - 1]; } //èŽ·å–æ ˆå†…å…ƒç´ çš„ä¸ªæ•° size() { let stack_arr = stack_mock.get(this); return stack_arr.length; } //å¯¹æ ˆå†…æ‰€æœ‰å…ƒç´ è¿›è¡Œæ‰“å° print() { let stack_arr = stack_mock.get(this); return stack_arr.toString(); } //å¯¹æ ˆè¿›è¡Œæ¸…ç©º clear() { stack_mock.set(this, []); } } //è¿”å›žç±»å‡½æ•°Stack return Stack; })(); //å£°æ˜Žä¸€ä¸ªæ ˆStackç±»çš„å®žä¾‹ let stack = new Stack(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //å‘æ ˆä¸­æ·»åŠ å…ƒç´  stack.push(&quot;Gary&quot;); stack.push(&quot;Lily&quot;); stack.push(&quot;Frank&quot;); stack.push(&quot;Simon&quot;); //åœ¨è¿™é‡Œæ‰“å°æ·»åŠ å…ƒç´ ä¹‹åŽçš„è¿”å›žå€¼ //è¿™é‡Œæ‰“å°æ ˆå†…çš„å…ƒç´ ä¸ªæ•°: //5 console.log(stack.push(&quot;Aaron&quot;)); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //false console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //5 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;Aaron&quot; console.log(stack.peek()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…æ‰€æœ‰çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //Gary,Lily,Frank,Simon,Aaron console.log(stack.print()); //åœ¨è¿™é‡Œå¯¹æ ˆå†…å…ƒç´ ä»Žæ ˆé¡¶è¿›è¡Œåˆ é™¤ //è¿™é‡Œæ‰“å°: //Aaron console.log(stack.pop()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //4 console.log(stack.size()); //åœ¨è¿™é‡Œæ‰“å°æ ˆé¡¶çš„å…ƒç´  //è¿™é‡Œæ‰“å°: //&quot;Simon&quot; console.log(stack.peek()); //å¯¹æ ˆè¿›è¡Œæ¸…ç©º stack.clear(); //åœ¨è¿™é‡Œæ‰“å°æ ˆæ˜¯å¦ä¸ºç©º //è¿™é‡Œæ‰“å°: //true console.log(stack.isEmpty()); //åœ¨è¿™é‡Œæ‰“å°æ ˆå†…å…ƒç´ çš„ä¸ªæ•° //è¿™é‡Œæ‰“å°: //0 console.log(stack.size()); è¿™æ ·å°±å®Œç¾Žçš„å†™å‡ºäº†ä¸€ä¸ªæ ˆ Stackç±»å‡½æ•°,å†…éƒ¨WeakMapé›†åˆå±žæ€§è®¾ç½®ç±»çš„æ•°ç»„,ä¸å¯èŽ·å–ä¸”ä¿®æ”¹,å…¨å±€ä¸‹ä¹Ÿä¸å¯è½»æ˜“çš„æ‹¿åˆ°ä¸”è¿›è¡Œéšæ„çš„ä¿®æ”¹,å…·æœ‰è‰¯å¥½çš„å°è£…æ€§ã€å®‰å…¨æ€§ã€æ‰©å±•æ€§ä»¥åŠå¯ç»´æŠ¤æ€§ ä½¿ç”¨æ ˆè§£å†³è®¡ç®—æœºç§‘å­¦ä¸­çš„ç»å…¸ç®—æ³•é—®é¢˜åè¿›åˆ¶è½¬åŒ–ä¸ºäºŒè¿›åˆ¶ é¦–å…ˆä½ è¦çŸ¥é“åè¿›åˆ¶è½¬åŒ–äºŒè¿›åˆ¶çš„åŽŸç†,å…ˆä»ŽäºŒè¿›åˆ¶è½¬åŒ–ä¸ºåè¿›åˆ¶è¯´èµ·,äºŒè¿›åˆ¶ä¸­åªæœ‰0å’Œ1,åœ¨ç›¸åŠ æ—¶å°±æ˜¯è¶³2è¿›1,æ¯”å¦‚è¯´10è¿™ä¸ªåè¿›åˆ¶æ•´æ•°,è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å°±æ˜¯1010,äºŒè¿›åˆ¶åˆ†ç¦»è½¬åŒ–åè¿›åˆ¶:1 * 2^3 + 0 * 2^2 + 1 * 2^1 + 0 * 2^0ç›¸åŠ å°±æ˜¯10è¿™ä¸ªåè¿›åˆ¶æ•´æ•°,æ‰€ä»¥åè¿›åˆ¶è½¬åŒ–ä¸ºäºŒè¿›åˆ¶,å°±éœ€è¦å¯¹2å–ä½™,å–ä½™ä¹‹åŽå†é™¤ä»¥2åˆ°è¾¾ä¸‹ä¸€ä½æ•°,ä¾æ¬¡å°†ä½™æ•°æ·»åŠ è¿›æ ˆä¸­,å†ä¾æ¬¡ä»Žæ ˆé¡¶å–å‡ºå¹¶åˆ é™¤æ ˆé¡¶å…ƒç´ ,åè¿›åˆ¶è½¬åŒ–ä¸ºäºŒè¿›åˆ¶æ˜¯éµä»Žæ ˆåŽè¿›å…ˆå‡ºçš„ç‰¹ç‚¹çš„ let Stack = (function (){ //å£°æ˜Žä¸€ä¸ªå¯å…¬ç”¨çš„WeakMapçš„é›†åˆå˜é‡: stack_mock //ä¸ºäº†é¿å…æ­¤å˜é‡åœ¨å…¨å±€ä¸­å¯ä»¥è½»æ˜“æ‹¿åˆ°å¹¶è¿›è¡Œéšæ„ä¿®æ”¹,åœ¨å¤–åŒ…ä¸€å±‚è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ç”¨å‡½æ•°ä½œç”¨åŸŸæ¥ä¿è¯å®ƒåœ¨å…¨å±€ä¸­æ‹¿ä¸åˆ°,ä¸”ä¹Ÿä¿®æ”¹ä¸äº† let stack_mock = new WeakMap(); //å£°æ˜Žä¸€ä¸ªç±»å‡½æ•°,è¿™é‡Œå½“ä½œæ ˆStackçš„ç±» class Stack { constructor() { //åœ¨ç±»å‡½æ•°å†…éƒ¨é€šè¿‡WeakMapé›†åˆå˜é‡è®¾ç½®æœ¬ç±»,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ stack_mock.set(this, []); } //å‘æ ˆå†…æ·»åŠ å…ƒç´  push(element) { let stack_arr = stack_mock.get(this); let stack_index = stack_arr.push(element); stack_mock.set(this, stack_arr); return stack_index; } //æ ˆé¡¶åˆ é™¤å…ƒç´  pop() { let stack_arr = stack_mock.get(this); let stack_item = stack_arr.pop(); stack_mock.set(this, stack_arr); return stack_item; } //æ ¡éªŒæ ˆæ˜¯å¦ä¸ºç©º isEmpty() { let stack_arr = stack_mock.get(this); return stack_arr.length === 0; } //èŽ·å–æ ˆé¡¶å…ƒç´  peek() { let stack_arr = stack_mock.get(this), len = stack_arr.length; return stack_arr[len - 1]; } //èŽ·å–æ ˆå†…å…ƒç´ çš„ä¸ªæ•° size() { let stack_arr = stack_mock.get(this); return stack_arr.length; } //å¯¹æ ˆå†…æ‰€æœ‰å…ƒç´ è¿›è¡Œæ‰“å° print() { let stack_arr = stack_mock.get(this); return stack_arr.toString(); } //å¯¹æ ˆè¿›è¡Œæ¸…ç©º clear() { stack_mock.set(this, []); } } //è¿”å›žç±»å‡½æ•°Stack return Stack; })(); /**è¿›è¡Œåè¿›åˆ¶è½¬åŒ–ä¸ºäºŒè¿›åˆ¶çš„å‡½æ•° * @params decimal ä¼ è¿›åŽ»çš„åè¿›åˆ¶å‚æ•° */ let DecimalConversionBinary = (decimal)=&gt; { //å£°æ˜Žä¸€ä¸ªæ ˆStackç±»çš„å®žä¾‹ let stack = new Stack(), //å£°æ˜Žä¸€ä¸ªæ‰¿æŽ¥%2ä¹‹åŽçš„ä½™æ•°çš„å˜é‡ decimal_remainder, //å£°æ˜Žä¸€ä¸ªæ‰¿æŽ¥æœ€ç»ˆäºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²å˜é‡,åˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸² result_binary = &quot;&quot;, //å£°æ˜Žä¸€ä¸ªæ‰¿æŽ¥åè¿›åˆ¶çš„å˜é‡ decimal_integer = decimal; //åœ¨åè¿›åˆ¶çš„å˜é‡é™¤ä»¥2è¿˜ä¸ä¸º0æ—¶,ç»§ç»­æ‰§è¡Œå¾ªçŽ¯ while(decimal_integer / 2){ //å°†åè¿›åˆ¶çš„å˜é‡å¯¹2è¿›è¡Œå–ä½™,ä½™æ•°èµ‹å€¼ç»™æ‰¿æŽ¥ä½™æ•°çš„å˜é‡ decimal_remainder = decimal_integer % 2; //å°†ä½™æ•°æ·»åŠ è¿›æ ˆä¸­ stack.push(decimal_remainder); //åè¿›åˆ¶çš„å˜é‡å–ä½™åŽ,å†é™¤ä»¥2å‘ä¸‹å–æ•´,åˆ°è¾¾ä¸‹ä¸€ä½æ•°,å¤åˆ¶ç»™åè¿›åˆ¶çš„å˜é‡ decimal_integer = Math.floor(decimal_integer / 2); } //æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©º,å¦‚æžœä¸ä¸ºç©º,åˆ™ç»§ç»­æ‰§è¡Œå¾ªçŽ¯ while(!stack.isEmpty()){ //æ‰¿æŽ¥äºŒè¿›åˆ¶å­—ç¬¦ä¸²çš„å˜é‡ä¸æ–­çš„æ‹¼æŽ¥æ ˆé¡¶çš„å…ƒç´ ,è€Œæ ˆé¡¶å…ƒç´ ä¹Ÿä¸æ–­åœ¨è¢«åˆ é™¤ result_binary += stack.pop(); } //å¾…åˆ°æ ˆé¡¶å…ƒç´ å½»åº•åˆ é™¤å®Œæ¯•,æ ˆä¸ºç©ºæ ˆäº†,å°±è¿”å›žæœ€ç»ˆçš„äºŒè¿›åˆ¶å˜é‡ return result_binary; }; let binary = DecimalConversionBinary(10); //åœ¨è¿™é‡Œæ‰“å°: //1010 console.log(binary); åè¿›åˆ¶è½¬åŒ–ä¸ºä»»ä½•è¿›åˆ¶ åè¿›åˆ¶è½¬åŒ–ä¸ºä»»ä½•è¿›åˆ¶çš„åŽŸç†è·ŸäºŒè¿›åˆ¶æ˜¯ä¸€æ ·çš„,åªä¸è¿‡é™¤ä»¥çš„æ•°å€¼å˜äº†,æ‰€ä»¥éœ€è¦å¤–éƒ¨ä¼ å…¥,è¿™æ ·åšçš„æ¯”è¾ƒé€šç”¨ let Stack = (function (){ //å£°æ˜Žä¸€ä¸ªå¯å…¬ç”¨çš„WeakMapçš„é›†åˆå˜é‡: stack_mock //ä¸ºäº†é¿å…æ­¤å˜é‡åœ¨å…¨å±€ä¸­å¯ä»¥è½»æ˜“æ‹¿åˆ°å¹¶è¿›è¡Œéšæ„ä¿®æ”¹,åœ¨å¤–åŒ…ä¸€å±‚è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ç”¨å‡½æ•°ä½œç”¨åŸŸæ¥ä¿è¯å®ƒåœ¨å…¨å±€ä¸­æ‹¿ä¸åˆ°,ä¸”ä¹Ÿä¿®æ”¹ä¸äº† let stack_mock = new WeakMap(); //å£°æ˜Žä¸€ä¸ªç±»å‡½æ•°,è¿™é‡Œå½“ä½œæ ˆStackçš„ç±» class Stack { constructor() { //åœ¨ç±»å‡½æ•°å†…éƒ¨é€šè¿‡WeakMapé›†åˆå˜é‡è®¾ç½®æœ¬ç±»,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ stack_mock.set(this, []); } //å‘æ ˆå†…æ·»åŠ å…ƒç´  push(element) { let stack_arr = stack_mock.get(this); let stack_index = stack_arr.push(element); stack_mock.set(this, stack_arr); return stack_index; } //æ ˆé¡¶åˆ é™¤å…ƒç´  pop() { let stack_arr = stack_mock.get(this); let stack_item = stack_arr.pop(); stack_mock.set(this, stack_arr); return stack_item; } //æ ¡éªŒæ ˆæ˜¯å¦ä¸ºç©º isEmpty() { let stack_arr = stack_mock.get(this); return stack_arr.length === 0; } //èŽ·å–æ ˆé¡¶å…ƒç´  peek() { let stack_arr = stack_mock.get(this), len = stack_arr.length; return stack_arr[len - 1]; } //èŽ·å–æ ˆå†…å…ƒç´ çš„ä¸ªæ•° size() { let stack_arr = stack_mock.get(this); return stack_arr.length; } //å¯¹æ ˆå†…æ‰€æœ‰å…ƒç´ è¿›è¡Œæ‰“å° print() { let stack_arr = stack_mock.get(this); return stack_arr.toString(); } //å¯¹æ ˆè¿›è¡Œæ¸…ç©º clear() { stack_mock.set(this, []); } } //è¿”å›žç±»å‡½æ•°Stack return Stack; })(); /**è¿›è¡Œåè¿›åˆ¶è½¬åŒ–ä¸ºä»»ä½•è¿›åˆ¶çš„å‡½æ•° * @params decimal ä¼ è¿›åŽ»çš„åè¿›åˆ¶å‚æ•° * @params radix è¡¨ç¤ºåè¿›åˆ¶è¦è½¬åŒ–çš„è¿›åˆ¶ç±»åž‹ */ let DecimalConversionRadix = (decimal, radix)=&gt; { //å£°æ˜Žä¸€ä¸ªæ ˆStackç±»çš„å®žä¾‹ let stack = new Stack(), //å£°æ˜Žä¸€ä¸ªæ‰¿æŽ¥%radixä¹‹åŽçš„ä½™æ•°çš„å˜é‡ decimal_remainder, //å£°æ˜Žä¸€ä¸ªæ‰¿æŽ¥æœ€ç»ˆå¤–éƒ¨ä¼ å…¥è¿›åˆ¶çš„å­—ç¬¦ä¸²å˜é‡,åˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸² result_radix = &quot;&quot;, //å£°æ˜Žä¸€ä¸ªæ‰¿æŽ¥åè¿›åˆ¶çš„å˜é‡ decimal_integer = decimal, //å„ä¸ªè¿›åˆ¶æ ˆä¸­çš„è¿›åˆ¶ä½æ•°æ‰€å¯¹åº”çš„å­—ç¬¦æ–‡æœ¬,æœ€å¤šåå…­è¿›åˆ¶,æœ€å°‘äºŒè¿›åˆ¶ radix_formatter = &quot;0123456789ABCDEF&quot;; //åœ¨åè¿›åˆ¶çš„å˜é‡é™¤ä»¥radixè¿˜ä¸ä¸º0æ—¶,ç»§ç»­æ‰§è¡Œå¾ªçŽ¯ while(decimal_integer / radix){ //å°†åè¿›åˆ¶çš„å˜é‡å¯¹radixè¿›è¡Œå–ä½™,ä½™æ•°èµ‹å€¼ç»™æ‰¿æŽ¥ä½™æ•°çš„å˜é‡ decimal_remainder = decimal_integer % radix; //å°†ä½™æ•°æ·»åŠ è¿›æ ˆä¸­ stack.push(decimal_remainder); //åè¿›åˆ¶çš„å˜é‡å–ä½™åŽ,å†é™¤ä»¥radixå‘ä¸‹å–æ•´,åˆ°è¾¾ä¸‹ä¸€ä½æ•°,å¤åˆ¶ç»™åè¿›åˆ¶çš„å˜é‡ decimal_integer = Math.floor(decimal_integer / radix); } //æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©º,å¦‚æžœä¸ä¸ºç©º,åˆ™ç»§ç»­æ‰§è¡Œå¾ªçŽ¯ while(!stack.isEmpty()){ //æ‰¿æŽ¥å¤–éƒ¨ä¼ å…¥è¿›åˆ¶å­—ç¬¦ä¸²çš„å˜é‡ä¸æ–­çš„æ‹¼æŽ¥æ ˆé¡¶çš„å…ƒç´ æ‰€å¯¹åº”çš„å­—ç¬¦æ–‡æœ¬,è€Œæ ˆé¡¶å…ƒç´ ä¹Ÿä¸æ–­åœ¨è¢«åˆ é™¤ result_radix += radix_formatter[stack.pop()]; } //å¾…åˆ°æ ˆé¡¶å…ƒç´ å½»åº•åˆ é™¤å®Œæ¯•,æ ˆä¸ºç©ºæ ˆäº†,å°±è¿”å›žæœ€ç»ˆçš„å¤–éƒ¨ä¼ å…¥è¿›åˆ¶å˜é‡ return result_radix; }; //è¿™é‡Œä¼ å…¥çš„è¿›åˆ¶ç±»åž‹æ˜¯äºŒè¿›åˆ¶ let radix = DecimalConversionRadix(10, 2); //åœ¨è¿™é‡Œæ‰“å°: //1010 console.log(radix); //è¿™é‡Œä¼ å…¥çš„è¿›åˆ¶ç±»åž‹æ˜¯åå…­è¿›åˆ¶ let radix_ano = DecimalConversionRadix(100, 16); //åœ¨è¿™é‡Œæ‰“å°: //64 console.log(radix_ano); é˜Ÿåˆ— Queue é˜Ÿåˆ—ä¹Ÿæ˜¯æ•°æ®ç»“æž„ä¸­æ¯”è¾ƒç®€å•çš„é¡ºåºæ•°æ®ç»“æž„,å’Œæ ˆç›¸ä¼¼,ç‰¹ç‚¹æ˜¯: å…ˆè¿›å…ˆå‡º,æ–°çš„å…ƒç´ éƒ½ä¼šæ·»åŠ åˆ°é˜Ÿåˆ—çš„æœ«å°¾,ç­‰å¾…é˜Ÿåˆ—ä¸­ä¹‹å‰å·²ç»æ·»åŠ çš„å…ƒç´ åˆ é™¤æŽ‰,çŽ°å®žç”Ÿæ´»ä¸­ä¹Ÿæœ‰å¥½å¤šé˜Ÿåˆ—çš„ä¾‹å­,æŽ’é˜Ÿå°±æ˜¯å¾ˆå¸¸è§çš„ä¾‹å­,åœ¨åŒ»é™¢æŽ’é˜ŸæŒ‚å·ã€åœ¨é£Ÿå ‚æŽ’é˜Ÿæ‰“é¥­ã€åœ¨æŠ¢ç¥¨è½¯ä»¶ä¸­æŽ’é˜ŸæŠ¢ç¥¨ç­‰ç­‰ä¸€ç³»åˆ—éƒ½æ˜¯é˜Ÿåˆ—çš„è¡¨çŽ°,ç»è¿‡æ ˆStackä¸€ç³»åˆ—çš„å¯¹ç±»å‡½æ•°Stackçš„ä¼˜åŒ–æ”¹è¿›,åœ¨å’Œæ ˆStackç›¸ä¼¼çš„é˜Ÿåˆ—Queueè¿™é‡Œå°±ä¸å†èµ˜è¿°,æˆ‘ä»¬ç›´æŽ¥å†™æœ€ç»ˆçš„ä¼˜åŒ–æ”¹è¿›çš„ES6ç‰ˆæœ¬ let Queue = (function() { //å£°æ˜Žä¸€ä¸ªå¯å…¬ç”¨çš„WeakMapçš„é›†åˆå˜é‡: queue_mock //ä¸ºäº†é¿å…æ­¤å˜é‡åœ¨å…¨å±€ä¸­å¯ä»¥è½»æ˜“æ‹¿åˆ°å¹¶è¿›è¡Œéšæ„ä¿®æ”¹,åœ¨å¤–åŒ…ä¸€å±‚è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ç”¨å‡½æ•°ä½œç”¨åŸŸæ¥ä¿è¯å®ƒåœ¨å…¨å±€ä¸­æ‹¿ä¸åˆ°,ä¸”ä¹Ÿä¿®æ”¹ä¸äº† let queue_mock = new WeakMap(); //å£°æ˜Žä¸€ä¸ªç±»å‡½æ•°,è¿™é‡Œå½“ä½œé˜Ÿåˆ—Queueçš„ç±» class Queue { constructor(){ //åœ¨ç±»å‡½æ•°å†…éƒ¨é€šè¿‡WeakMapé›†åˆå˜é‡è®¾ç½®æœ¬ç±»,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ queue_mock.set(this, []); } //å‘é˜Ÿåˆ—æœ«å°¾ä¸­æ·»åŠ æ–°çš„å…ƒç´  enqueue(element) { let queue_arr = queue_mock.get(this); let queue_index = queue_arr.push(element); queue_mock.set(this, queue_arr); return queue_index; } //å°†é˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´ åˆ é™¤æŽ‰ dequeue() { let queue_arr = queue_mock.get(this); let queue_item = queue_arr.shift(); queue_mock.set(this, queue_arr); return queue_item; } //æ£€æµ‹é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º isEmpty() { return queue_mock.get(this).length === 0; } //èŽ·å–é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° size() { return queue_mock.get(this).length; } //å°†é˜Ÿåˆ—æ¸…ç©º clear() { queue_mock.set(this, []); } //å°†é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„å…ƒç´ è¿›è¡Œæ‰“å° print() { return queue_mock.get(this).toString(); } //èŽ·å–é˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´  front() { return queue_mock.get(this)[0]; } } })(); //å£°æ˜Žä¸€ä¸ªé˜Ÿåˆ—Queueç±»å®žä¾‹ let queue = new Queue(); //è¿™é‡Œåˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //true console.log(queue.isEmpty()); //å‘é˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´  queue.enqueue(&quot;Gary&quot;); queue.enqueue(&quot;Lily&quot;); queue.enqueue(&quot;Simon&quot;); queue.enqueue(&quot;Aaron&quot;); //è¿™é‡Œæ‰“å°é˜Ÿåˆ—æ·»åŠ å…ƒç´ çš„è¿”å›žå€¼ //åœ¨è¿™é‡Œæ‰“å°é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•°: //5 console.log(queue.enqueue(&quot;Frank&quot;)); //è¿™é‡Œåˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //false console.log(queue.isEmpty()); //è¿™é‡Œæ‰“å°é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° //åœ¨è¿™é‡Œæ‰“å°: //5 console.log(queue.size()); //è¿™é‡Œæ‰“å°é˜Ÿåˆ—ä¸­åˆ—å¤´çš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //&quot;Gary&quot; console.log(queue.front()); //è¿™é‡Œæ‰“å°é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //Gary,Lily,Simon,Aaron,Frank console.log(queue.print()); //è¿™é‡Œå°†é˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´ åˆ é™¤ //åœ¨è¿™é‡Œæ‰“å°åˆ—å¤´çš„å…ƒç´ : //&quot;Gary&quot; console.log(queue.dequeue()); queue.dequeue(); queue.dequeue(); //è¿™é‡Œæ‰“å°é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° //åœ¨è¿™é‡Œæ‰“å°: //2 console.log(queue.size()); //è¿™é‡Œæ‰“å°é˜Ÿåˆ—ä¸­åˆ—å¤´çš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //&quot;Aaron&quot; console.log(queue.front()); //å°†é˜Ÿåˆ—æ¸…ç©º queue.clear(); //è¿™é‡Œåˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //true console.log(queue.isEmpty()); //è¿™é‡Œæ‰“å°é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(queue.size()); ä¼˜å…ˆé˜Ÿåˆ— é˜Ÿåˆ—æœ‰æ—¶éœ€è¦æ ¹æ®æŸäº›å‚æ•°è¿›è¡Œä¼˜å…ˆçº§å¤„ç†,æ¯”å¦‚æˆ‘ä»¬ä¹˜åé£žæœº,è´­ä¹°é£žæœºç¥¨,åˆ†ä¸ºå¤´ç­‰èˆ±ã€å•†åŠ¡èˆ±å’Œç»æµŽèˆ±,å¤´ç­‰èˆ±çš„ä¼˜å…ˆçº§æœ€é«˜,ç»æµŽèˆ±çš„ä¼˜å…ˆçº§æœ€ä½Ž,æ‰€ä»¥åœ¨è¿›è¡Œé˜Ÿåˆ—å¤„ç†æ—¶,éœ€è¦æ ¹æ®ä¼˜å…ˆçº§è¿›è¡ŒæŽ’åˆ— let Queue = (function () { //å£°æ˜Žä¸€ä¸ªå¯å…¬ç”¨çš„WeakMapçš„é›†åˆå˜é‡: queue_mock //ä¸ºäº†é¿å…æ­¤å˜é‡åœ¨å…¨å±€ä¸­å¯ä»¥è½»æ˜“æ‹¿åˆ°å¹¶è¿›è¡Œéšæ„ä¿®æ”¹,åœ¨å¤–åŒ…ä¸€å±‚è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ç”¨å‡½æ•°ä½œç”¨åŸŸæ¥ä¿è¯å®ƒåœ¨å…¨å±€ä¸­æ‹¿ä¸åˆ°,ä¸”ä¹Ÿä¿®æ”¹ä¸äº† let queue_mock = new WeakMap(); //å£°æ˜Žä¸€ä¸ªé˜Ÿåˆ—ä¼˜å…ˆçº§ç±»å‡½æ•° //ç”Ÿæˆé˜Ÿåˆ—å…ƒç´ ä¼˜å…ˆçº§å®žä¾‹ class Queue_Prior { constructor(element, prior) { this.element = element; this.prior = prior; } } //å£°æ˜Žä¸€ä¸ªç±»å‡½æ•°,è¿™é‡Œå½“ä½œé˜Ÿåˆ—Queueçš„ç±» class Queue { constructor() { //åœ¨ç±»å‡½æ•°å†…éƒ¨é€šè¿‡WeakMapé›†åˆå˜é‡è®¾ç½®æœ¬ç±»,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ queue_mock.set(this, []); } //æ ¹æ®ä¼˜å…ˆçº§å‘é˜Ÿåˆ—ä¸­æ·»åŠ ä¼˜å…ˆçº§å®žä¾‹å…ƒç´  enqueue(element, prior) { //ç”Ÿæˆé˜Ÿåˆ—ä¼˜å…ˆçº§å®žä¾‹å…ƒç´  let queue_prior = new Queue_Prior(element, prior), //èŽ·å–çŽ°çŠ¶æ€çš„é˜Ÿåˆ— queue_arr = queue_mock.get(this), len = queue_arr.length, index = 0; //å¾ªçŽ¯çŽ°çŠ¶æ€çš„é˜Ÿåˆ—,å‡å¦‚é˜Ÿåˆ—ä¸­å­˜åœ¨å…ƒç´ ä¼˜å…ˆçº§æ¯”å®žä¾‹ä¼˜å…ˆçº§å°çš„,å°±æ’å…¥åˆ°å°ä¼˜å…ˆçº§é˜Ÿåˆ—å…ƒç´ ä¹‹å‰ while(index &lt; len) { if(queue_arr[index][&quot;prior&quot;] &gt; queue_prior[&quot;prior&quot;]) { queue_arr.splice(index, 0, queue_prior); queue_mock.set(this, queue_arr); return index + 1; } index++; } //å‡å¦‚ä¸å­˜åœ¨,å°±ç›´æŽ¥æ·»åŠ åˆ°é˜Ÿåˆ—åˆ—å°¾ index = queue_arr.push(queue_prior); queue_mock.set(this, queue_arr); return index; } //å¯¹é˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´ è¿›è¡Œåˆ é™¤ dequeue() { let queue_arr = queue_mock.get(this); let queue_index = queue_arr.shift(); queue_mock.set(this, queue_arr); return queue_index; } //åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º isEmpty() { return queue_mock.get(this).length === 0; } //èŽ·å–é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•° size() { return queue_mock.get(this).length; } //å¯¹é˜Ÿåˆ—è¿›è¡Œæ¸…ç©º clear() { queue_mock.set(this, []); } //èŽ·å–é˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´  front() { return queue_mock.get(this)[0]; } //å¯¹é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çš„å…ƒç´ è¿›è¡Œæ‰“å° print() { let queue_arr = queue_mock.get(this); let len = queue_arr.length; let queue_toString_arr = []; for(let i = 0; i &lt; len; i++) { queue_toString_arr.push(queue_arr[i][&quot;element&quot;]); } return queue_toString_arr.toString(); } } //è¿”å›žé˜Ÿåˆ—Queueé˜Ÿåˆ— return Queue; })(); //å£°æ˜Žä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—Queueç±»å®žä¾‹ let queue = new Queue(); //è¿™é‡Œåˆ¤æ–­ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //true console.log(queue.isEmpty()); //å‘ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ·»åŠ å…ƒç´  queue.enqueue(&quot;Gary&quot;, 1); queue.enqueue(&quot;Lily&quot;, 2); queue.enqueue(&quot;Simon&quot;, 1); queue.enqueue(&quot;Aaron&quot;, 3); //è¿™é‡Œæ‰“å°ä¼˜å…ˆé˜Ÿåˆ—æ·»åŠ å…ƒç´ çš„è¿”å›žå€¼ //åœ¨è¿™é‡Œæ‰“å°ä¼˜å…ˆé˜Ÿåˆ—æ·»åŠ å…ƒç´ çš„ä½ç½®: //4 console.log(queue.enqueue(&quot;Frank&quot;, 2)); //è¿™é‡Œåˆ¤æ–­ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //false console.log(queue.isEmpty()); //è¿™é‡Œæ‰“å°ä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° //åœ¨è¿™é‡Œæ‰“å°: //5 console.log(queue.size()); //è¿™é‡Œæ‰“å°ä¼˜å…ˆé˜Ÿåˆ—ä¸­åˆ—å¤´çš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //{element: &quot;Gary&quot;, prior: 1} console.log(queue.front()); //è¿™é‡Œæ‰“å°ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ‰€æœ‰çš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //Gary,Simon,Lily,Frank,Aaron console.log(queue.print()); //è¿™é‡Œå°†ä¼˜å…ˆé˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´ åˆ é™¤ //åœ¨è¿™é‡Œæ‰“å°åˆ—å¤´çš„å…ƒç´ : //{element: &quot;Gary&quot;, prior: 1} console.log(queue.dequeue()); queue.dequeue(); queue.dequeue(); //è¿™é‡Œæ‰“å°ä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° //åœ¨è¿™é‡Œæ‰“å°: //2 console.log(queue.size()); //è¿™é‡Œæ‰“å°ä¼˜å…ˆé˜Ÿåˆ—ä¸­åˆ—å¤´çš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //{element: &quot;Frank&quot;, prior: 2} console.log(queue.front()); //å°†ä¼˜å…ˆé˜Ÿåˆ—æ¸…ç©º queue.clear(); //è¿™é‡Œåˆ¤æ–­ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //true console.log(queue.isEmpty()); //è¿™é‡Œæ‰“å°ä¼˜å…ˆé˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•° //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(queue.size()); å¾ªçŽ¯é˜Ÿåˆ—ä½¿ç”¨å¾ªçŽ¯é˜Ÿåˆ—è§£å†³è®¡ç®—æœºç»å…¸ç®—æ³• - å‡»é¼“ä¼ èŠ± ç”¨é˜Ÿåˆ—æ¥å®žçŽ°å‡»é¼“ä¼ èŠ±,å†åˆé€‚ä¸è¿‡äº†,ç»™å®šä¸€ä¸ªæ•°ç»„ä»¥åŠä¼ é€’çš„æ¬¡æ•°ä½œä¸ºå‡½æ•°çš„å‚æ•° let Queue = (function () { //å£°æ˜Žä¸€ä¸ªå¯å…¬ç”¨çš„WeakMapçš„é›†åˆå˜é‡: queue_mock //ä¸ºäº†é¿å…æ­¤å˜é‡åœ¨å…¨å±€ä¸­å¯ä»¥è½»æ˜“æ‹¿åˆ°å¹¶è¿›è¡Œéšæ„ä¿®æ”¹,åœ¨å¤–åŒ…ä¸€å±‚è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼,ç”¨å‡½æ•°ä½œç”¨åŸŸæ¥ä¿è¯å®ƒåœ¨å…¨å±€ä¸­æ‹¿ä¸åˆ°,ä¸”ä¹Ÿä¿®æ”¹ä¸äº† let queue_mock = new WeakMap(); //å£°æ˜Žä¸€ä¸ªç±»å‡½æ•°,è¿™é‡Œå½“ä½œé˜Ÿåˆ—Queueçš„ç±» class Queue { constructor() { //åœ¨ç±»å‡½æ•°å†…éƒ¨é€šè¿‡WeakMapé›†åˆå˜é‡è®¾ç½®æœ¬ç±»,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ queue_mock.set(this, []); } //å‘é˜Ÿåˆ—æœ«å°¾ä¸­æ·»åŠ æ–°çš„å…ƒç´  enqueue(element) { let queue_arr = queue_mock.get(this); let queue_index = queue_arr.push(element); queue_mock.set(this, queue_arr); return queue_index; } //å°†é˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´ åˆ é™¤æŽ‰ dequeue() { let queue_arr = queue_mock.get(this); let queue_item = queue_arr.shift(); queue_mock.set(this, queue_arr); return queue_item; } //æ£€æµ‹é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º isEmpty() { return queue_mock.get(this).length === 0; } //èŽ·å–é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸ªæ•° size() { return queue_mock.get(this).length; } //å¯¹é˜Ÿåˆ—è¿›è¡Œæ¸…ç©º clear() { queue_mock.set(this, []); } //å¯¹é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çš„å…ƒç´ è¿›è¡Œæ‰“å° print() { return queue_mock.get(this).toString(); } //å¯¹é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çš„å…ƒç´ è¿›è¡Œæ‰“å° front() { return queue_mock.get(this)[0]; } } return Queue; })(); //å‡»é¼“ä¼ èŠ±å‡½æ•° //@params queueList æ•°ç»„ //@params count ä¼ é€’çš„æ¬¡æ•° function passThePaperFlower(queueList, count) { //å£°æ˜Žä¸€ä¸ªå¾ªçŽ¯é˜Ÿåˆ—Queueç±»çš„å®žä¾‹ let queue = new Queue(); //éåŽ†æ•°ç»„,å°†æ•°ç»„å…ƒç´ æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ for(let i = 0; i &lt; queueList.length; i++) { queue.enqueue(queueList[i]); } //åªè¦é˜Ÿåˆ—ä¸­çš„å…ƒç´ å¤§äºŽ1,å°±ç»§ç»­å¾ªçŽ¯ while(queue.size() &gt; 1) { //éåŽ†ä¼ é€’çš„æ¬¡æ•°,å°†é˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´ (å°±æ˜¯å‡»é¼“ä¼ èŠ±ä¸­è¦æ·˜æ±°çš„äºº)åˆ é™¤æŽ‰,å†æ·»åŠ åˆ°é˜Ÿåˆ—çš„åˆ—å°¾ for(let j = 0; j &lt; count; j++) { queue.enqueue(queue.dequeue()); } //èŽ·å–åˆ°ä¼ é€’å®Œä¹‹åŽ,é˜Ÿåˆ—åˆ—å¤´çš„å…ƒç´  let queueItem = queue.dequeue(); console.log(`${queueItem}è¢«æ·˜æ±°~`); } //è¿”å›žé˜Ÿåˆ—ä¸­ä»…å‰©çš„æœ€åŽçš„å‡»é¼“ä¼ èŠ±å¤§èµ¢å®¶ return queue.front(); } //ç»™å®šçš„è¿›è¡Œå‡»é¼“ä¼ èŠ±çš„äºº let paperFlowerParticipant = [&quot;Gary&quot;, &quot;Lily&quot;, &quot;Aaron&quot;, &quot;Alice&quot;, &quot;Simon&quot;, &quot;Frank&quot;]; //é˜Ÿåˆ—ä¸­ä»…å‰©çš„æœ€åŽçš„å‡»é¼“ä¼ èŠ±å¤§èµ¢å®¶ let finallyGet = passThePaperFlower(paperFlowerParticipant, 10); //å¯¹æœ€åŽçš„å‡»é¼“ä¼ èŠ±å¤§èµ¢å®¶è¿›è¡Œæ‰“å° console.log(&quot;æœ€åŽçš„èµ¢å®¶æ˜¯:&quot; + finallyGet); é“¾è¡¨ LinkList å‰é¢è¯´äº†æ ˆå’Œé˜Ÿåˆ—ç®€å•çš„é¡ºåºæ•°æ®ç»“æž„,ä¸‹é¢ä»‹ç»ä¸€ä¸‹æœ€åŽçš„é¡ºåºæ•°æ®ç»“æž„: é“¾è¡¨ LinkList,é“¾è¡¨ç›¸æ¯”äºŽæ ˆå’Œé˜Ÿåˆ—çš„ä¼˜ç‚¹åœ¨äºŽ: æ ˆå’Œé˜Ÿåˆ—ä¼šç›´æŽ¥å¯¹å†…éƒ¨å…ƒç´ è¿›è¡Œæ·»åŠ ã€ä¿®æ”¹ä»¥åŠåˆ é™¤çš„æ“ä½œ,ä½¿å¾—å…¶ä»–å†…å­˜å…ƒç´ çš„ä½ç½®å‘ç”Ÿæ”¹å˜(å…¶ä»–å…ƒç´ å‰ç§»æˆ–è€…åŽç§»),å¤§é‡çš„æ¶ˆè€—å†…å­˜,è€Œé“¾è¡¨ä¸ä¼šç ´åå†…å­˜å…ƒç´ çš„ä½ç½®,å‡å¦‚è¿›è¡Œæ·»åŠ ã€ä¿®æ”¹ä»¥åŠåˆ é™¤çš„æ“ä½œ,ç›´æŽ¥æ–­å¼€ä¸­é—´çš„ä¸€ä¸ªçŽ¯èŠ‚,å°†è¿™ä¸ªçŽ¯èŠ‚çš„å‰ä¸€ä¸ªçŽ¯èŠ‚ä»¥åŠåŽä¸€ä¸ªçŽ¯èŠ‚é‡è¿žå°±å¯ä»¥äº†,ç”Ÿæ´»ä¸­ä¹Ÿæœ‰å¾ˆå¤šé“¾è¡¨çš„ä¾‹å­: æ¯”å¦‚è¯´ç«è½¦,ç«è½¦çš„è½¦åŽ¢éƒ½æ˜¯ä¸€çŽ¯è¿žç€ä¸€çŽ¯çš„,å’Œé“¾è¡¨å·®ä¸å¤š let LinkList = (function() { //å®šä¹‰é“¾è¡¨å¤´éƒ¨çš„é“¾è¡¨å…ƒç´ ,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸ºnull //å®šä¹‰é“¾è¡¨çš„é•¿åº¦,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸º0 let head = new WeakMap(), length = new WeakMap(); //å£°æ˜Žé“¾è¡¨å…ƒç´ Nodeå¯¹è±¡çš„ç±»å‡½æ•° //åˆå§‹åŒ–æœ‰ä¸¤ä¸ªå‚æ•° //@param node çŽ°é“¾è¡¨å…ƒç´ çš„å€¼ //@param next ç”¨æ¥é“¾æŽ¥ä¸‹ä¸€ä¸ªé“¾è¡¨å…ƒç´  class Node { constructor(node) { this.node = node; this.next = null; } } //å£°æ˜Žé“¾è¡¨LinkListå¯¹è±¡çš„ç±»å‡½æ•° class LinkList { constructor() { head.set(this, null); length.set(this, 0); } //å‘é“¾è¡¨ä¸­æ·»åŠ é“¾è¡¨å…ƒç´  insert(element) { let headElement = head.get(this), lengths = length.get(this), current = headElement, node = new Node(element); if(!headElement) { headElement = node; } else { while(current.next) { current = current.next; } current.next = node; } lengths++; head.set(this, headElement); length.set(this, lengths); return lengths; } //å‘é“¾è¡¨çš„æŒ‡å®šä½ç½®æ·»åŠ é“¾è¡¨å…ƒç´  insertAt(element, position) { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0, previous, node = new Node(element); if(position &gt;=0 &amp;&amp; position &lt; lengths) { if(!headElement) { headElement = node; } else { if(position === 0) { node.next = current; headElement = node; } else { while(index++ &lt; position) { previous = current; current = current.next; } previous.next = node; node.next = current; } } lengths++; head.set(this, headElement); length.set(this, lengths); return position; } return false; } //åˆ é™¤é“¾è¡¨ä¸­çš„æŒ‡å®šé“¾è¡¨å…ƒç´  remove(element) { const {indexOf, removeAt} = this; let index = indexOf.bind(this)(element); return typeof index === &quot;number&quot; ? removeAt.bind(this)(index) : index; } //èŽ·å–æŒ‡å®šé“¾è¡¨å…ƒç´ çš„ä½ç½® indexOf(element) { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0; while(index++ &lt; lengths) { if(element === current.node) { return index - 1; } current = current.next; } return false; } //åˆ é™¤é“¾è¡¨ä¸­æŒ‡å®šä½ç½®çš„é“¾è¡¨å…ƒç´  removeAt(position) { let headElement = head.get(this), lengths = length.get(this), index = 0, previous, current = headElement; if(position &gt;=0 &amp;&amp; position &lt; lengths) { if(!head) { return false; } else { if(lengths === 1) { headElement = null; } else { if(position === 0) { headElement = current.next; } else { while(index++ &lt; position) { previous = current; current = current.next; } previous.next = current.next; } } } lengths--; head.set(this, headElement); length.set(this, lengths); return position; } return false; } //èŽ·å–é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨ç»“æž„ toString() { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0, result = ``; while(index++ &lt; lengths) { result = `${result}${current.node}|~`; current = current.next; } return result; } //èŽ·å–é“¾è¡¨çš„å¤´éƒ¨é“¾è¡¨å…ƒç´  headElement() { return head.get(this).node; } //èŽ·å–é“¾è¡¨çš„é•¿åº¦ size() { return length.get(this); } //åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©º isEmpty() { return length.get(this) === 0; } //èŽ·å–é“¾è¡¨çš„çœŸå®žç»“æž„ valueOf() { return head.get(this); } //å°†é“¾è¡¨æ¸…ç©º clear() { head.set(this, null); length.set(this, 0); } } //è¿”å›žé“¾è¡¨LinkListç±»å‡½æ•° return LinkList; })(); //å£°æ˜Žé“¾è¡¨ç±»å‡½æ•°çš„å®žä¾‹ let link_list = new LinkList(); //è¿™é‡Œåˆ¤æ–­é“¾è¡¨æ˜¯å¦æ˜¯ç©ºé“¾è¡¨ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(link_list.isEmpty()); //è¿™é‡ŒèŽ·å–é“¾è¡¨çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(link_list.size()); //è¿™é‡Œæ‰“å°é“¾è¡¨å…ƒç´ çš„æ•°é‡: //åœ¨è¿™é‡Œæ‰“å°: //1 console.log(link_list.insert(104)); link_list.insert(99); link_list.insert(155); link_list.insert(34); link_list.insert(16); //è¿™é‡Œåˆ¤æ–­é“¾è¡¨æ˜¯å¦æ˜¯ç©ºé“¾è¡¨ //åœ¨è¿™é‡Œæ‰“å°: //false console.log(link_list.isEmpty()); //è¿™é‡ŒèŽ·å–é“¾è¡¨çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //5 console.log(link_list.size()); //è¿™é‡Œæ‰“å°é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //104 //99 //155 //34 //16 console.log(link_list.toString()); //è¿™é‡ŒèŽ·å–é“¾è¡¨çš„å¤´éƒ¨é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //104 console.log(link_list.headElement()); //è¿™é‡Œåœ¨é“¾è¡¨ä¸‹æ ‡ä¸º2å¤„æ’å…¥é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //2 console.log(link_list.insertAt(88, 2)); //è¿™é‡Œæ‰“å°é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //104 //99 //88 //155 //34 //16 console.log(link_list.toString()); //è¿™é‡Œæ‰“å°é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //{element: 104, next: {element: 99, next: {element: 88, next: {element: 155, next: {element: 34, next: {element: 16, next: null}}}}}} console.log(link_list.valueOf()); //è¿™é‡Œåˆ é™¤é“¾è¡¨ä¸‹æ ‡ä¸º3å¤„çš„é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //3 console.log(link_list.removeAt(3)); link_list.removeAt(4); //è¿™é‡Œæ‰“å°é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //104 //99 //88 //34 console.log(link_list.toString()); //è¿™é‡Œåˆ é™¤é“¾è¡¨ä¸­é“¾è¡¨å…ƒç´ ä¸º88çš„é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //2 console.log(link_list.remove(88)); //è¿™é‡Œæ‰“å°é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //104 //99 //34 link_list.toString(); //è¿™é‡Œæ‰“å°é“¾è¡¨ä¸­çš„å¤´éƒ¨é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //104 console.log(link_list.headElement()); link_list.clear(); //è¿™é‡Œåˆ¤æ–­é“¾è¡¨æ˜¯å¦æ˜¯ç©ºé“¾è¡¨ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(link_list.isEmpty()); //è¿™é‡ŒèŽ·å–é“¾è¡¨çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(link_list.size()); åŒå‘é“¾è¡¨ DoublyLinkList åŒå‘é“¾è¡¨å’Œå•å‘é“¾è¡¨çš„æ¨¡å¼,å”¯ä¸€çš„åŒºåˆ«: åŒå‘é“¾è¡¨å¤šå‡ºäº†ä¸€ä¸ªå°¾éƒ¨é“¾è¡¨å…ƒç´ ,ä¸”é“¾è¡¨å…ƒç´ ç±»å®žä¾‹ä¸ä»…ä»…æœ‰nextå±žæ€§,è¿˜æœ‰prevå±žæ€§,nextæŒ‡å‘ä¸‹ä¸€ä¸ªé“¾è¡¨å…ƒç´ ,prevæŒ‡å‘ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  let DoublyLinkList = (function() { //å®šä¹‰é“¾è¡¨å¤´éƒ¨çš„é“¾è¡¨å…ƒç´ ,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸ºnull //å®šä¹‰é“¾è¡¨å°¾éƒ¨çš„é“¾è¡¨å…ƒç´ ,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸ºnull //å®šä¹‰é“¾è¡¨çš„é•¿åº¦,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸º0 let head = new WeakMap(), tail = new WeakMap(), length = new WeakMap(); //å£°æ˜Žé“¾è¡¨å…ƒç´ Nodeå¯¹è±¡çš„ç±»å‡½æ•° //åˆå§‹åŒ–æœ‰ä¸‰ä¸ªå‚æ•° //@param node çŽ°é“¾è¡¨å…ƒç´ çš„å€¼ //@param next ç”¨æ¥é“¾æŽ¥ä¸‹ä¸€ä¸ªé“¾è¡¨å…ƒç´  //@param prev ç”¨æ¥é“¾æŽ¥ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  class Node { constructor(node) { this.node = node; this.next = null; this.prev = null; } } //å£°æ˜ŽåŒå‘é“¾è¡¨DoublyLinkListå¯¹è±¡çš„ç±»å‡½æ•° class DoublyLinkList { constructor() { head.set(this, null); tail.set(this, null); length.set(this, 0); } //å‘é“¾è¡¨ä¸­æ·»åŠ é“¾è¡¨å…ƒç´  insert(element) { let headElement = head.get(this), tailElement = tail.get(this), lengths = length.get(this), current = headElement, node = new Node(element); if(!headElement) { headElement = node; tailElement = node; } else { while(current.next) { current = current.next; } current.next = node; node.prev = current; tailElement = node; } lengths++; head.set(this, headElement); tail.set(this, tailElement); length.set(this, lengths); return lengths; } //å‘é“¾è¡¨çš„æŒ‡å®šä½ç½®æ·»åŠ é“¾è¡¨å…ƒç´  insertAt(element, position) { let headElement = head.get(this), tailElement = tail.get(this), current = headElement, lengths = length.get(this), node = new Node(element), previous, index = 0; if(position &gt;=0 &amp;&amp; position &lt; lengths) { if(!headElement) { headElement = node; tailElement = node; } else { if(position === 0) { node.next = current; current.prev = node; headElement = node; } else if(position === lengths - 1) { node.prev = tailElement; tailElement.next = node; tailElement = node; } else { while(index++ &lt; position) { previous = current; current = current.next; } previous.next = node; node.prev = previous; node.next = current; current.prev = node; } } lengths++; head.set(this, headElement); tail.set(this, tailElement); length.set(this, lengths); return position; } return false; } //åˆ é™¤é“¾è¡¨ä¸­æŒ‡å®šä½ç½®çš„é“¾è¡¨å…ƒç´  removeAt(position) { let headElement = head.get(this), tailElement = tail.get(this), lengths = length.get(this), current = headElement, index = 0, previous; if(position &gt;=0 &amp;&amp; position &lt; lengths) { if(!headElement) { return false; } else { if(lengths === 1) { headElement = null; tailElement = null; } else { if(position === 0) { headElement = current.next; headElement.prev = null; } else if (position === lengths - 1) { tailElement = tailElement.prev; tailElement.next = null; } else { while(index++ &lt; position) { previous = current; current = current.next; } previous.next = current.next; current.next.prev = previous; } } lengths--; head.set(this, headElement); tail.set(this, tailElement); length.set(this, lengths); return position; } } return false; } //èŽ·å–é“¾è¡¨æŒ‡å®šçš„å…ƒç´ ä½ç½® indexOf(element) { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0; while(index++ &lt; lengths) { if(current.node === element) { return index - 1; } current = current.next; } return false; } //åˆ é™¤é“¾è¡¨ä¸­çš„æŒ‡å®šé“¾è¡¨å…ƒç´  remove(element) { const {indexOf, removeAt} = this; let index = indexOf.bind(this)(element); return typeof index === &quot;number&quot; ? removeAt.bind(this)(index) : false; } //èŽ·å–é“¾è¡¨çš„é•¿åº¦ size() { return length.get(this); } //åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºæ•°ç»„ isEmpty() { return length.get(this) === 0; } //æ‰“å°é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨å…ƒç´  toString() { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0, result = ``; while(index++ &lt; lengths) { result = `${result}${current.node}~|~`; current = current.next; } return result; } //èŽ·å–é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨ç»“æž„ valueOf() { return head.get(this); } //å°†é“¾è¡¨æ¸…ç©º clear() { head.set(this, null); tail.set(this, null); length.set(this, 0); } //èŽ·å–é“¾è¡¨çš„å¤´éƒ¨é“¾è¡¨å…ƒç´  headElement() { return head.get(this).node; } //èŽ·å–é“¾è¡¨çš„å°¾éƒ¨é“¾è¡¨å…ƒç´  tailElement() { return tail.get(this).node; } } //è¿”å›žåŒå‘é“¾è¡¨DoublyLinkListç±»å‡½æ•° return DoublyLinkList; })(); let doubly_link = new DoublyLinkList(); //è¿™é‡Œæ‰“å°é“¾è¡¨æ˜¯å¦ä¸ºç©ºé“¾è¡¨ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(doubly_link.isEmpty()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(doubly_link.size()); //è¿™é‡Œæ‰“å°æ’å…¥æ–°çš„é“¾è¡¨å…ƒç´ åŽé“¾è¡¨çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //1 console.log(doubly_link.insert(111)); doubly_link.insert(88); doubly_link.insert(99); doubly_link.insert(77); doubly_link.insert(222); //è¿™é‡Œæ‰“å°é“¾è¡¨æ˜¯å¦ä¸ºç©ºé“¾è¡¨ //åœ¨è¿™é‡Œæ‰“å°: //false console.log(doubly_link.isEmpty()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //5 console.log(doubly_link.size()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„å¤´éƒ¨é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //111 console.log(doubly_link.headElement()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„å°¾éƒ¨é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //222 console.log(doubly_link.tailElement()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„æ‰€æœ‰é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //111~|88~|99~|77~|222~| console.log(doubly_link.toString()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„æ‰€æœ‰é“¾è¡¨ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //{prev: null, element: 111, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 88, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 99, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 77, next: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 222, next: null}}}}} console.log(doubly_link.valueOf()); //è¿™é‡Œæ‰“å°æ’å…¥åˆ°3å·ä½ç½®çš„æ–°çš„é“¾è¡¨å…ƒç´ çš„ä¸‹æ ‡ä½ç½® //åœ¨è¿™é‡Œæ‰“å°: //3 console.log(doubly_link.insertAt(66, 3)); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„æ‰€æœ‰é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //111~|88~|99~|66~|77~|222~| console.log(doubly_link.toString()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„æ‰€æœ‰é“¾è¡¨ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //{prev: null, element: 111, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 88, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 99, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 66, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 77, next: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 222, next: null}}}}}} console.log(doubly_link.valueOf()); //è¿™é‡Œæ‰“å°åˆ é™¤4å·ä½ç½®çš„é“¾è¡¨å…ƒç´ çš„ä¸‹æ ‡ä½ç½® //åœ¨è¿™é‡Œæ‰“å°: //4 console.log(doubly_link.removeAt(4)); doubly_link.removeAt(0); //è¿™é‡Œæ‰“å°åˆ é™¤æŒ‡å®šçš„é“¾è¡¨å…ƒç´ çš„ä¸‹æ ‡ä½ç½® //åœ¨è¿™é‡Œæ‰“å°: //2 doubly_link.remove(66); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„æ‰€æœ‰é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //88~|99~|222~| console.log(doubly_link.toString()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„æ‰€æœ‰é“¾è¡¨ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //{prev: null, element: 88, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 99, next: {prev: {//ä¸Šä¸€ä¸ªé“¾è¡¨å…ƒç´  ...}, element: 222, next: null}}} console.log(doubly_link.valueOf()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„å¤´éƒ¨é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //88 console.log(doubly_link.headElement()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„å°¾éƒ¨é“¾è¡¨å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //222 console.log(doubly_link.tailElement()); doubly_link.clear(); //è¿™é‡Œæ‰“å°é“¾è¡¨æ˜¯å¦ä¸ºç©ºé“¾è¡¨ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(doubly_link.isEmpty()); //è¿™é‡Œæ‰“å°é“¾è¡¨çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(doubly_link.size()); é›†åˆè‡ªå·±å°è£…Seté›†åˆ æŽ¥ä¸‹æ¥å­¦ä¹ ä¸‹ä¸€ç§éžé¡ºåºçº¿æ€§æ•°æ®ç»“æž„,é‚£å°±æ˜¯é›†åˆã€‚åœ¨å®žä¹‰ä¸ŠæŒ‡çš„æ˜¯å…·æœ‰æŸç§ç‰¹å®šæ€§è´¨çš„äº‹ç‰©çš„æ€»ä½“,ä¿—è¯è®²çš„å¥½,â€ç‰©ä»¥ç±»èš,äººä»¥ç¾¤åˆ†â€,è¿™æ˜¯å¯¹é›†åˆç›¸å½“æ°å½“çš„å†™ç…§,åœ¨ES6ä¸­,æ–°è¯­æ³•å¯¹è±¡Setä¹Ÿæ˜¯ç”¨æ¥å®žçŽ°é›†åˆçš„,ä¸‹é¢æˆ‘ä»¬ä¹Ÿæ¥å°è£…ä¸€ä¸‹Seté›†åˆ,å¹¶å°è£…ä¸€äº›ES6 Setè¯­æ³•ä¸­ä¸å­˜åœ¨çš„æ–¹æ³•,æ¯”å¦‚:äº¤é›†ã€å¹¶é›†ã€å·®é›†å’Œå­é›† let Set = (function () { //è®¾ç½®é›†åˆçš„å®¹å™¨,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸ºç©ºå¯¹è±¡{} let set = new WeakMap(); //è®¾ç½®é›†åˆç±» class Set { constructor() { set.set(this, {}); } //åœ¨é›†åˆä¸­æ·»åŠ é›†åˆé¡¹ add(value) { let set_add = set.get(this); set_add[value] = value; set.set(this, set_add); return true; } //åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æ­¤é›†åˆé¡¹ has(value) { let set_has = set.get(this); return set_has.hasOwnProperty(value); } //åˆ é™¤é›†åˆä¸­çš„æŒ‡å®šé›†åˆé¡¹ delete(value) { let set_delete = set.get(this); if(set_delete.hasOwnProperty(value)) { delete set_delete[value]; set.set(this, set_delete); return true; } return false; } //èŽ·å–é›†åˆçš„é•¿åº¦ size() { let set_size = set.get(this), index = 0; for(let [key, value] of Object.entries(set_size)) { index++; } return index; } //åˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º isEmpty() { let set_isEmpty = set.get(this); for(let [key, value] of Object.entries(set_isEmpty)) { if(set_isEmpty.hasOwnProperty(key)) { return false; } } return true; } //èŽ·å–é›†åˆçš„å±žæ€§å€¼æ•°ç»„ values() { let set_values = set.get(this); return Object.values(set_values); } //æ¸…ç©ºé›†åˆ clear() { set.set(this, {}); return true; } //å¹¶é›† union(union_ano) { let union_this = this, union_new = new Set(); for(let [key_this, value_this] of union_this.values().entries()) { union_new.add(value_this); } for(let [key_ano, value_ano] of union_ano.values().entries()) { union_new.add(value_ano); } return union_new.values(); } //äº¤é›† intersection(intersection_ano) { let intersection_this = this, intersection_new = new Set(); for(let [key_this, value_this] of intersection_this.values().entries()) { if(intersection_ano.has(value_this)) { intersection_new.add(value_this); } } return intersection_new.values(); } //å·®é›† differenceSet(differenceSet_ano) { let differenceSet_this = this, differenceSet_new = new Set(); for(let [key, value] of differenceSet_this.values().entries()) { if(!differenceSet_ano.has(value)) { differenceSet_new.add(value); } } return differenceSet_new.values(); } //å­é›† subset(subset_ano) { let subset_this = this; for(let [key, value] of subset_this.values().entries()) { if(!subset_ano.has(value)) { return false; } } return true; } } //è¿”å›žé›†åˆç±» return Set; })(); let set = new Set(); //è¿™é‡Œåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //true console.log(set.isEmpty()); //è¿™é‡ŒæŸ¥çœ‹é›†åˆçš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(set.size()); //è¿™é‡Œåœ¨é›†åˆä¸­æ·»åŠ é›†åˆé¡¹,å¹¶è¿”å›žtrue //åœ¨è¿™é‡Œæ‰“å°: //true console.log(set.add(&quot;Gary&quot;)); set.add(&quot;Simon&quot;); set.add(&quot;Frank&quot;); set.add(&quot;Lily&quot;); set.add(&quot;Alice&quot;); set.add(&quot;Tom&quot;); set.add(&quot;Tommy&quot;); //è¿™é‡Œåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //false console.log(set.isEmpty()); //è¿™é‡ŒæŸ¥çœ‹é›†åˆçš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //7 console.log(set.size()); //è¿™é‡Œåˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æ­¤é›†åˆé¡¹&quot;Gary&quot; //åœ¨è¿™é‡Œæ‰“å°: //true console.log(set.has(&quot;Gary&quot;)); //è¿™é‡Œåˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æ­¤é›†åˆé¡¹&quot;Alice&quot; //åœ¨è¿™é‡Œæ‰“å°: //true console.log(set.has(&quot;Alice&quot;)); //è¿™é‡Œåˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨æ­¤é›†åˆé¡¹&quot;Clay&quot; //åœ¨è¿™é‡Œæ‰“å°: //false console.log(set.has(&quot;Clay&quot;)); //è¿™é‡ŒèŽ·å–é›†åˆçš„å±žæ€§å€¼æ•°ç»„ //åœ¨è¿™é‡Œæ‰“å°: //[&quot;Gary&quot;, &quot;Simon&quot;, &quot;Frank&quot;, &quot;Lily&quot;, &quot;Alice&quot;, &quot;Tom&quot;, &quot;Tommy&quot;] console.log(set.values()); //è¿™é‡Œåˆ é™¤é›†åˆä¸­çš„æŒ‡å®šé›†åˆé¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(set.delete(&quot;Simon&quot;)); set.delete(&quot;Alice&quot;); //è¿™é‡ŒæŸ¥çœ‹é›†åˆçš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //5 console.log(set.size()); //è¿™é‡ŒèŽ·å–é›†åˆçš„å±žæ€§å€¼æ•°ç»„ //åœ¨è¿™é‡Œæ‰“å°: //[&quot;Gary&quot;, &quot;Frank&quot;, &quot;Lily&quot;, &quot;Tom&quot;, &quot;Tommy&quot;] console.log(set.values()); set.clear(); //è¿™é‡Œåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //true console.log(set.isEmpty()); //è¿™é‡Œæ‰“å°é›†åˆçš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(set.size()); let _set = new Set(); let _set_ano = new Set(); _set.add(45); _set.add(66); _set.add(100); _set.add(52); _set.add(28); _set.add(89); _set_ano.add(28); _set_ano.add(52); _set_ano.add(111); _set_ano.add(120); _set_ano.add(18); //è¿™é‡ŒæŸ¥è¯¢ä¸¤ä¸ªé›†åˆå±žäºŽ_seté›†åˆæˆ–è€…å±žäºŽ_set_anoé›†åˆçš„å¹¶é›† //åœ¨è¿™é‡Œæ‰“å°: //[45, 66, 100, 52, 28, 89, 111, 120, 18] console.log(_set.union(_set_ano)); //è¿™é‡ŒæŸ¥è¯¢ä¸¤ä¸ªé›†åˆæ—¢å±žäºŽ_seté›†åˆåˆå±žäºŽ_set_anoé›†åˆçš„äº¤é›† //åœ¨è¿™é‡Œæ‰“å°: //[28, 52] console.log(_set.intersection(_set_ano)); //è¿™é‡ŒæŸ¥è¯¢ä¸¤ä¸ªé›†åˆå±žäºŽ_seté›†åˆä½†ä¸å±žäºŽ_set_anoé›†åˆçš„å·®é›† //åœ¨è¿™é‡Œæ‰“å°: //[45, 66, 100, 89] console.log(_set.differenceSet(_set_ano)); //è¿™é‡ŒæŸ¥è¯¢_seté›†åˆæ˜¯å¦æ˜¯_set_anoçš„å­é›† //åœ¨è¿™é‡Œæ‰“å°: //false console.log(_set.subset(_set_ano)); ES6 Seté›†åˆ ä¹‹å‰è¯´è¿‡ES6ä¸­ä½¿ç”¨Setæ¥è¡¨çŽ°é›†åˆ,ES6çš„Setä¹Ÿæœ‰addã€hasã€deleteå’Œclearç­‰æ–¹æ³•,å½“ç„¶sizeæ˜¯ä»¥å±žæ€§æ¥å­˜å‚¨é›†åˆçš„é•¿åº¦,è€Œä¹Ÿæ‹¥æœ‰keysã€valueså’Œentriesç­‰éåŽ†çš„æ–¹å¼æ¥è¿”å›žå±žæ€§æ•°ç»„ã€å±žæ€§å€¼æ•°ç»„ä»¥åŠ[å±žæ€§, å±žæ€§å€¼]æ•°ç»„,ä½†æ˜¯Setå¹¶æ²¡æœ‰å°è£…union(å¹¶é›†)ã€intersection(äº¤é›†)ã€differenceSet(å·®é›†)å’Œsubset(å­é›†)ç­‰æ–¹æ³•,æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒçŽ°æœ‰çš„å±žæ€§å’Œæ–¹æ³•æ¥å°è£…ä¸€ä¸‹ //å°è£…ES6 Seté›†åˆunionå¹¶é›†æ–¹æ³• Set.prototype.union = function(set_ano) { let set_this = this, set_new = new Set(), set_union = []; for(let [key, value] of set_this.entries()) { set_new.add(key); } for(let [key, value] of set_ano.entries()) { set_new.add(key); } for(let [key, value] of set_new.entries()) { set_union = [...set_union, key]; } return set_union; }; //å°è£…ES6 Seté›†åˆintersectionäº¤é›†æ–¹æ³• Set.prototype.intersection = function(set_ano) { let set_this = this, set_new = new Set(), set_intersection = []; for(let [key, value] of set_this.entries()) { if(set_ano.has(key)) { set_new.add(key); } } for(let [key, value] of set_new.entries()) { set_intersection = [...set_intersection, key]; } return set_intersection; }; //å°è£…ES6 Seté›†åˆdifferenceSetå·®é›†æ–¹æ³• Set.prototype.differenceSet = function(set_ano) { let set_this = this, set_new = new Set(), set_differenceSet = []; for(let [key, value] of set_this.entries()) { if(!set_ano.has(key)) { set_new.add(key); } } for(let [key, value] of set_new.entries()) { set_differenceSet = [...set_differenceSet, key]; } return set_differenceSet; }; //å°è£…ES6 Seté›†åˆsubsetå­é›†æ–¹æ³• Set.prototype.subset = function(set_ano) { let set_this = this; for(let [key, value] of set_this.entries()) { if(!set_ano.has(key)) { return false; } } return true; }; let set = new Set(), set_ano = new Set(); set.add(45); set.add(66); set.add(100); set.add(52); set.add(28); set.add(89); set_ano.add(28); set_ano.add(52); set_ano.add(111); set_ano.add(120); set_ano.add(18); //è¿™é‡ŒæŸ¥è¯¢å±žäºŽseté›†åˆæˆ–è€…å±žäºŽset_anoé›†åˆçš„å¹¶é›† //åœ¨è¿™é‡Œæ‰“å°: //[45, 66, 100, 52, 28, 89, 111, 120, 18] console.log(set.union(set_ano)); //è¿™é‡ŒæŸ¥è¯¢æ—¢å±žäºŽseté›†åˆåˆå±žäºŽset_anoé›†åˆçš„äº¤é›† //åœ¨è¿™é‡Œæ‰“å°: //[52, 28] console.log(set.intersection(set_ano)); //è¿™é‡ŒæŸ¥è¯¢å±žäºŽseté›†åˆä½†ä¸å±žäºŽset_anoé›†åˆçš„å·®é›† //åœ¨è¿™é‡Œæ‰“å°: //[45, 66, 100, 89] console.log(set.differenceSet(set_ano)); //è¿™é‡ŒæŸ¥è¯¢seté›†åˆæ˜¯å¦æ˜¯set_anoé›†åˆçš„å­é›† //åœ¨è¿™é‡Œæ‰“å°: //false console.log(set.subset(set_ano)); å­—å…¸ é™¤äº†é›†åˆè¿™ç§çº¿æ€§çš„éžé¡ºåºç»“æž„ä»¥å¤–,è¿˜æœ‰ä¸¤ç§çº¿æ€§çš„éžé¡ºåºç»“æž„: å­—å…¸å’Œæ•£åˆ—è¡¨,å¦‚æžœè¯´é›†åˆæ˜¯å…·æœ‰æŸç§ç‰¹å¾æ€§è´¨äº‹ç‰©çš„æ€»é‡çš„è¯,é‚£å­—å…¸å°±æ˜¯å…·æœ‰æŸç§ç‰¹å¾æ€§è´¨äº‹ç‰©çš„åˆ†é›†(åˆ†ç±»é›†åˆ),ES6ä¸­ç”¨Mapæ¥è¡¨çŽ°å­—å…¸,ä¸‹é¢æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹å­—å…¸ let Map = (function () { //è®¾ç½®å­—å…¸çš„å®¹å™¨,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸ºç©ºå¯¹è±¡{} let map = new WeakMap(); //å®šä¹‰Mapå­—å…¸ç±» class Map { constructor() { map.set(this, {}); } //åœ¨å­—å…¸ä¸­æ·»åŠ å­—å…¸é¡¹ set(key, value) { let map_set = map.get(this); map_set[key] = value; map.set(this, map_set); return true; } //èŽ·å–å­—å…¸æŒ‡å®šçš„å­—å…¸é¡¹ get(key) { let map_get = map.get(this); if(map_get.hasOwnProperty(key)) { return map_get[key]; } return false; } //åˆ¤æ–­å­—å…¸æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—å…¸é¡¹ has(key) { let map_has = map.get(this); return map_has.hasOwnProperty(key); } //åˆ é™¤å­—å…¸æŒ‡å®šçš„å­—å…¸é¡¹ delete(key) { let map_delete = map.get(this); if(map_delete.hasOwnProperty(key)){ delete map_delete[key]; map.set(this, map_delete); return true; } return false; } //æ¸…ç©ºå­—å…¸ clear() { map.set(this, {}); return true; } //èŽ·å–å­—å…¸çš„å±žæ€§æ•°ç»„ keys() { let map_keys = map.get(this); return Object.keys(map_keys); } //èŽ·å–å­—å…¸çš„å±žæ€§å€¼æ•°ç»„ values() { let map_values = map.get(this); return Object.values(map_values); } //èŽ·å–å­—å…¸çš„é•¿åº¦ size() { let map_size = map.get(this); return Object.keys(map_size).length; } //åˆ¤æ–­å­—å…¸æ˜¯å¦ä¸ºç©º isEmpty() { let map_isEmpty = map.get(this); return Object.keys(map_isEmpty).length === 0; } } //è¿”å›žMapå­—å…¸ç±» return Map; })(); let map = new Map(); //è¿™é‡Œåˆ¤æ–­å­—å…¸æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //true console.log(map.isEmpty()); //è¿™é‡ŒèŽ·å–å­—å…¸çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(map.size()); //è¿™é‡Œåœ¨å­—å…¸ä¸­æ·»åŠ åˆ¶å®šçš„å­—å…¸é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(map.set(&quot;Gary&quot;, &quot;gary@gmail.com&quot;)); map.set(&quot;Simon&quot;, &quot;simon@gmail.com&quot;); map.set(&quot;Lily&quot;, &quot;lily@gmail.com&quot;); map.set(&quot;Alice&quot;, &quot;alice@gmail.com&quot;); map.set(&quot;Aaron&quot;, &quot;aaron@gmail.com&quot;); //è¿™é‡Œåˆ¤æ–­å­—å…¸æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //false console.log(map.isEmpty()); //è¿™é‡ŒèŽ·å–å­—å…¸çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //5 console.log(map.size()); //è¿™é‡ŒèŽ·å–å­—å…¸æŒ‡å®šçš„å­—å…¸é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //gary@gmail.com console.log(map.get(&quot;Gary&quot;)); //è¿™é‡ŒèŽ·å–å­—å…¸æŒ‡å®šçš„å­—å…¸é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //lily@gmail.com console.log(map.get(&quot;Alice&quot;)); //è¿™é‡Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—å…¸é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(map.has(&quot;Lily&quot;)); //è¿™é‡ŒèŽ·å–å­—å…¸çš„å±žæ€§æ•°ç»„ //åœ¨è¿™é‡Œæ‰“å°: //[&quot;Gary&quot;, &quot;Simon&quot;, &quot;Lily&quot;, &quot;Alice&quot;, &quot;Aaron&quot;] console.log(map.keys()); //è¿™é‡ŒèŽ·å–å­—å…¸çš„å±žæ€§å€¼æ•°ç»„ //åœ¨è¿™é‡Œæ‰“å°: //[&quot;gary@gmail.com&quot;, &quot;simon@gmail.com&quot;, &quot;lily@gmail.com&quot;, &quot;alice@gmail.com&quot;, &quot;aaron@gmail.com&quot;] console.log(map.values()); //è¿™é‡Œåˆ é™¤å­—å…¸çš„æ‰§è¡Œå­—å…¸é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(map.delete(&quot;Alice&quot;)); //è¿™é‡Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—å…¸é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //false console.log(map.has(&quot;Alice&quot;)); //è¿™é‡Œæ¸…ç©ºå­—å…¸ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(map.clear()); //è¿™é‡ŒèŽ·å–å­—å…¸æŒ‡å®šçš„å­—å…¸é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //false console.log(map.get(&quot;Gary&quot;)); //è¿™é‡Œåˆ¤æ–­å­—å…¸æ˜¯å¦ä¸ºç©º //åœ¨è¿™é‡Œæ‰“å°: //true console.log(map.isEmpty()); //è¿™é‡ŒèŽ·å–å­—å…¸çš„é•¿åº¦ //åœ¨è¿™é‡Œæ‰“å°: //0 console.log(map.size()); æ•£åˆ—è¡¨ å¦å¤–ä¸€ç§çº¿æ€§éžé¡ºåºæ•°æ®ç»“æž„å°±æ˜¯æ•£åˆ—è¡¨äº†,ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨Javaä¸­å¸¸ç”¨çš„HashTable,å½“ç„¶å•çº¯çš„ç”¨HashTableä¼šå‡ºçŽ°å¾ˆå¤šé—®é¢˜,æœ€æ˜¾è‘—çš„ä¸€ç‚¹å°±æ˜¯å®¹æ˜“ä¸€ä¸ªå€¼è¢«å¦å¤–ä¸€ä¸ªå€¼æ‰€è¦†ç›–,ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹HashTableæ•£åˆ—è¡¨ let HashTable = (function () { //è®¾ç½®æ•£åˆ—è¡¨çš„å®¹å™¨,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„[] let hash_table = new WeakMap(); //å®šä¹‰æ•£åˆ—è¡¨ç±» class HashTable { constructor() { hash_table.set(this, []); } //å®šä¹‰è®¾è®¡æ•£åˆ—è¡¨çš„ç®—æ³•ä¸ºloseLoseç®—æ³• //loseLoseç®—æ³•å°±æ˜¯å°†HashTableä¸­çš„keyçš„æ¯ä¸€ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„ASCIIç å€¼åŠ ä¸Šæ‰€å¤„ä½ç½®ä¹˜ä»¥ä»»ä½•ä¸€ä¸ªè´¨æ•° //ç„¶åŽå¯¹ä»»ä½•ä¸€ä¸ªè´¨æ•°å–ä½™ //æœ€åŽè¿›è¡Œè¿”å›ž loseLoseHashTable(key) { let hash_key = 13, result_index = 0; for(let i = 0; i &lt; key.length; i++) { result_index += i * hash_key + key.charCodeAt(i); } return result_index % 37; } //åœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ æ•£åˆ—è¡¨é¡¹ put(key, value) { let hashTable = hash_table.get(this); const {loseLoseHashTable} = this; let index = loseLoseHashTable.bind(this)(key); hashTable[index] = value; hash_table.set(this, hashTable); return true; } //èŽ·å–æ•£åˆ—è¡¨æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ get(key) { let hashTable = hash_table.get(this); const {loseLoseHashTable} = this; let index = loseLoseHashTable.bind(this)(key); if(hashTable[index] !== undefined) { return hashTable[index]; } return false; } //åˆ é™¤æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ remove(key) { let hashTable = hash_table.get(this); const {loseLoseHashTable} = this; let index = loseLoseHashTable.bind(this)(key); if(hashTable[index] !== undefined) { hashTable[index] = undefined; hash_table.set(this, hashTable); return true; } return false; } //èŽ·å–æ•£åˆ—è¡¨æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ toString() { let hashTable = hash_table.get(this), result_str = ``; for(let [key, value] of hashTable.entries()) { if(value !== undefined) { result_str = `${result_str}${value} -&gt; `; } } return result_str; } //èŽ·å–æ•£åˆ—è¡¨çš„å…·ä½“ç»“æž„ valueOf() { let hashTable = hash_table.get(this); return hashTable; } } //è¿”å›žæ•£åˆ—è¡¨ç±» return HashTable; })(); let hash_table = new HashTable(); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(hash_table.put(&quot;Gary&quot;, &quot;gary@gmail.com&quot;)); hash_table.put(&quot;Helen&quot;, &quot;helen@gmail.com&quot;); hash_table.put(&quot;Lily&quot;, &quot;lily@gmail.com&quot;); hash_table.put(&quot;Alice&quot;, &quot;alice@gmail.com&quot;); hash_table.put(&quot;Simon&quot;, &quot;simon@gmail.com&quot;); hash_table.put(&quot;Aaron&quot;, &quot;aaron@gmail.com&quot;); hash_table.put(&quot;Tom&quot;, &quot;tom@gmail.com&quot;); hash_table.put(&quot;Tommy&quot;, &quot;tommy@gmail.com&quot;); hash_table.put(&quot;Betty&quot;, &quot;betty@gmail.com&quot;); hash_table.put(&quot;Frank&quot;, &quot;frank@gmail.com&quot;); hash_table.put(&quot;Martin&quot;, &quot;martin@gmail.com&quot;); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //tommy@gmail.com console.log(hash_table.get(&quot;Aaron&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //tom@gmail.com console.log(hash_table.get(&quot;Tom&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //martin@gmail.com -&gt; lily@gmail.com -&gt; tom@gmail.com -&gt; alice@gmail.com -&gt; simon@gmail.com -&gt; betty@gmail.com -&gt; helen@gmail.com -&gt; tommy@gmail.com -&gt; frank@gmail.com -&gt; console.log(hash_table.toString()); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //[&quot;martin@gmail.com&quot;, empty Ã— 6, &quot;lily@gmail.com&quot;, empty Ã— 2, &quot;tom@gmail.com&quot;, empty Ã— 5, &quot;alice@gmail.com&quot;, empty Ã— 2, &quot;simon@gmail.com&quot;, empty, &quot;betty@gmail.com&quot;, empty Ã— 8, &quot;helen@gmail.com&quot;, empty Ã— 4, &quot;tommy@gmail.com&quot;, &quot;frank@gmail.com&quot;] console.log(hash_table.valueOf()); //è¿™é‡Œåˆ é™¤æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(hash_table.remove(&quot;Aaron&quot;)); hash_table.remove(&quot;Tom&quot;); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //false console.log(hash_table.get(&quot;Tom&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //martin@gmail.com -&gt; lily@gmail.com -&gt; alice@gmail.com -&gt; simon@gmail.com -&gt; betty@gmail.com -&gt; helen@gmail.com -&gt; frank@gmail.com -&gt; console.log(hash_table.toString()); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //[&quot;martin@gmail.com&quot;, empty Ã— 6, &quot;lily@gmail.com&quot;, empty Ã— 2, undefined, empty Ã— 5, &quot;alice@gmail.com&quot;, empty Ã— 2, &quot;simon@gmail.com&quot;, empty, &quot;betty@gmail.com&quot;, empty Ã— 8, &quot;helen@gmail.com&quot;, empty Ã— 4, undefined, &quot;frank@gmail.com&quot;] console.log(hash_table.valueOf()); ä¸çŸ¥é“ä½ ä»¬æ³¨æ„åˆ°äº†æ²¡,æœ‰ä¸€äº›æ•£åˆ—è¡¨é¡¹è¢«è¦†ç›–äº†,æ¯”å¦‚è¯´keyå±žæ€§ä¸ºAaronçš„æ•£åˆ—è¡¨é¡¹çš„valueå±žæ€§å€¼ç«Ÿç„¶æ˜¯tommy@gmail.com,å†æ¯”å¦‚è¯´æˆ‘å°†keyå±žæ€§ä¸ºAaronçš„æ•£åˆ—è¡¨é¡¹åˆ é™¤æŽ‰,keyå±žæ€§ä¸ºTommyçš„æ•£åˆ—è¡¨é¡¹ä¹Ÿæ¶ˆå¤±äº†,å˜ä¸ºäº†undefined,è¯´æ˜Žkeyå±žæ€§ä¸ºTommyå’Œkeyå±žæ€§ä¸ºAaronçš„æ•£åˆ—è¡¨é¡¹ç»è¿‡loseLoseç®—æ³•è§£æžæ•£åˆ—è¡¨é¡¹åŽæ˜¯åŒä¸€ä¸ªæ•£åˆ—è¡¨é¡¹,æ‰€ä»¥æ•£åˆ—è¡¨é¡¹è¢«è¦†ç›–äº†,æ‰€ä»¥ç”¨å•çº¯çš„ç”¨HashTableæ˜¯ä¸é€‚å½“çš„,è¦è§£å†³è¿™ä¸ªæ¯”è¾ƒæ˜¾è‘—çš„é—®é¢˜,æœ‰ä¸¤ç§è§£å†³æ–¹å¼:é“¾è¡¨æŸ¥è¯¢ä»¥åŠæ•£åˆ—è¡¨å·¡èˆªè¿­ä»£ é“¾è¡¨æŸ¥è¯¢ é“¾è¡¨æŸ¥è¯¢å°±æ˜¯ç”¨é“¾è¡¨æ¥ä½œä¸ºæ•£åˆ—è¡¨é¡¹,å‡å¦‚å·²ç»å­˜åœ¨loseLoseç®—æ³•è§£æžæ•£åˆ—è¡¨é¡¹åŽçš„æ•£åˆ—è¡¨é¡¹,å°±æ·»åŠ åˆ°æ­¤ä½ç½®é“¾è¡¨çš„æœ€åŽ,è¿™æ ·çš„è¯å°±ä¸ä¼šå‘ç”Ÿè¦†ç›–çš„äº‹æƒ…äº†,ä¸‹é¢æˆ‘ä»¬å°±ç”¨é“¾è¡¨æŸ¥è¯¢æ¥è§£å†³æ•£åˆ—è¡¨é¡¹è¦†ç›–çš„é—®é¢˜å§ let LinkList = (function () { //å®šä¹‰é“¾è¡¨å¤´éƒ¨çš„é“¾è¡¨å…ƒç´ ,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸ºnull //å®šä¹‰é“¾è¡¨çš„é•¿åº¦,å¹¶åœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä¸º0 let head = new WeakMap(), length = new WeakMap(); //å£°æ˜Žé“¾è¡¨å…ƒç´ Nodeå¯¹è±¡çš„ç±»å‡½æ•° //åˆå§‹åŒ–æœ‰ä¸¤ä¸ªå‚æ•° //@param node çŽ°é“¾è¡¨å…ƒç´ çš„å€¼ //@param next ç”¨æ¥é“¾æŽ¥ä¸‹ä¸€ä¸ªé“¾è¡¨å…ƒç´  class Node { constructor(node) { this.node = node; this.next = null; } } //å®šä¹‰é“¾è¡¨ç±» class LinkList { constructor() { head.set(this, null); length.set(this, 0); } //å‘é“¾è¡¨ä¸­æ·»åŠ é“¾è¡¨å…ƒç´  insert(element) { let headElement = head.get(this), lengths = length.get(this), current = headElement, node = new Node(element); if(!headElement) { headElement = node; } else { while(current.next) { current = current.next; } current.next = node; } lengths++; head.set(this, headElement); length.set(this, lengths); return lengths; } //å‘é“¾è¡¨çš„æŒ‡å®šä½ç½®æ·»åŠ é“¾è¡¨å…ƒç´  insertAt(element, position) { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0, previous, node = new Node(element); if(position &gt;= 0 &amp;&amp; position &lt; lengths) { if(!headElement) { headElement = node; } else { if(position === 0) { node.next = current; headElement = node; } else { while(index++ &lt; position) { previous = current; current = current.next; } previous.next = node; node.next = current; } } lengths++; head.set(this, headElement); length.set(this, lengths); return position; } return false; } //åˆ é™¤é“¾è¡¨ä¸­æŒ‡å®šä½ç½®çš„é“¾è¡¨å…ƒç´  removeAt(position) { let headElement = head.get(this), lengths = length.get(this), index = 0, current = headElement, previous; if(position &gt;= 0 &amp;&amp; position &lt; lengths) { if(!headElement) { return false; } else { if(lengths === 1) { headElement = null; } else { if(position === 0) { headElement = current.next; } else { while(index++ &lt; position) { previous = current; current = current.next; } previous.next = current.next; } } lengths--; head.set(this, headElement); length.set(this, lengths); return position; } } return false; } //åˆ é™¤é“¾è¡¨ä¸­çš„æŒ‡å®šé“¾è¡¨å…ƒç´  remove(element) { const {indexOf, removeAt} = this; let index = indexOf.bind(this)(element); return typeof index === &quot;number&quot; ? removeAt.bind(this)(index) : false; } //åˆ é™¤é“¾è¡¨ä¸­æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢ä¸­çš„é“¾è¡¨é¡¹ removeKey(key) { const {indexOfKeyPosition, removeAt} = this; let index = indexOfKeyPosition.bind(this)(key); return typeof index === &quot;number&quot; ? removeAt.bind(this)(index) : index; } //èŽ·å–é“¾è¡¨æŒ‡å®šçš„å…ƒç´ ä½ç½® indexOf(element) { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0; while(index++ &lt; lengths) { if(current.node === element) { return index - 1; } current = current.next; } return false; } //åˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦å­˜åœ¨æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢ä¸­çš„key indexOfKey(key) { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0; while(index++ &lt; lengths) { if(key === current.node.key) { return true; } current = current.next; } return false; } //èŽ·å–é“¾è¡¨æŒ‡å®šçš„æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢ä¸­çš„é“¾è¡¨é¡¹ä½ç½® indexOfKeyPosition(key) { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0; while(index++ &lt; lengths) { if(key === current.node.key) { return index - 1; } current = current.next; } return false; } //èŽ·å–é“¾è¡¨ä¸­æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢ä¸­çš„é“¾è¡¨é¡¹ indexOfNode(key) { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0; while(index++ &lt; lengths) { if(key === current.node.key) { return current.node; } current = current.next; } return false; } //èŽ·å–é“¾è¡¨çš„é•¿åº¦ size() { return length.get(this); } //åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©º isEmpty() { return length.get(this) === 0; } //èŽ·å–é“¾è¡¨çš„å¤´éƒ¨é“¾è¡¨å…ƒç´  headElement() { return head.get(this).node; } //èŽ·å–é“¾è¡¨ä¸­æ‰€æœ‰çš„é“¾è¡¨ç»“æž„ toString() { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0, result_str = ``; while(index++ &lt; lengths) { result_str = `${result_str}${current.node} =&gt; `; current = current.next; } return result_str; } //èŽ·å–é“¾è¡¨ä¸­æ‰€æœ‰æ•£åˆ—è¡¨æŸ¥è¯¢çš„é“¾è¡¨ç»“æž„ toStringKey() { let headElement = head.get(this), lengths = length.get(this), current = headElement, index = 0, result_str = ``; while(index++ &lt; lengths) { result_str = `${result_str}{key: ${current.node.key}, value: ${current.node.value}} =&gt; `; current = current.next; } return result_str; } //èŽ·å–é“¾è¡¨çš„çœŸå®žç»“æž„ valueOf() { return head.get(this); } //å°†é“¾è¡¨æ¸…ç©º clear() { head.set(this, null); length.set(this, 0); } } //è¿”å›žé“¾è¡¨ç±» return LinkList; })(); let HashTable = (function (){ //è®¾ç½®æ•£åˆ—è¡¨çš„å®¹å™¨,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„[] let hash_table = new WeakMap(); //è®¾ç½®æ•£åˆ—è¡¨ä¸­çš„é“¾è¡¨ç±» //@params key //@params value class Node { constructor(key, value) { this.key = key; this.value = value; } } //è®¾ç½®æ•£åˆ—è¡¨ç±» class HashTable { constructor() { hash_table.set(this, []); } //å®šä¹‰è®¾è®¡æ•£åˆ—è¡¨çš„ç®—æ³•ä¸ºloseLoseç®—æ³• //loseLoseç®—æ³•å°±æ˜¯å°†HashTableä¸­çš„keyçš„æ¯ä¸€ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„ASCIIç å€¼åŠ ä¸Šæ‰€å¤„ä½ç½®ä¹˜ä»¥ä»»ä½•ä¸€ä¸ªè´¨æ•° //ç„¶åŽå¯¹ä»»ä½•ä¸€ä¸ªè´¨æ•°å–ä½™ //æœ€åŽè¿›è¡Œè¿”å›ž loseLoseHashTable(key) { let hash_key = 13, index = 0; for(let i = 0; i &lt; key.length; i++) { index += i * hash_key + key.charCodeAt(i); } return index % 37; } //åœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢é¡¹ put(key, value) { const {loseLoseHashTable} = this; let hashTable = hash_table.get(this), index = loseLoseHashTable.bind(this)(key), node = new Node(key, value), linkList; if(hashTable[index] === undefined) { linkList = new LinkList(); linkList.insert(node); hashTable[index] = linkList; } else { linkList = hashTable[index]; if(linkList.indexOfKey(key)) { return false; } else { linkList = hashTable[index]; linkList.insert(node); hashTable[index] = linkList; } } hash_table.set(this, hashTable); return true; } //èŽ·å–æ•£åˆ—è¡¨æŒ‡å®šçš„æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢é¡¹ get(key) { const {loseLoseHashTable} = this; let hashTable = hash_table.get(this), index = loseLoseHashTable.bind(this)(key), linkList, node; if(hashTable[index] !== undefined) { linkList = hashTable[index]; if(linkList.indexOfKey(key)) { node = linkList.indexOfNode(key); return node.value; } else { return false; } } return false; } //åˆ é™¤æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢é¡¹ remove(key) { const {loseLoseHashTable} = this; let hashTable = hash_table.get(this), index = loseLoseHashTable.bind(this)(key), linkList; if(hashTable[index] !== undefined) { linkList = hashTable[index]; if(linkList.indexOfKey(key)) { linkList.removeKey(key); if(linkList.isEmpty()){ hashTable[index] = undefined; } else { hashTable[index] = linkList; } return true; } else { return false; } } return false; } //èŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ toString() { let hashTable = hash_table.get(this), result_str = ``; for(let [key, value] of hashTable.entries()) { if(value !== undefined) { result_str = `${result_str}${value.toStringKey()} -&gt; `; } } return result_str; } //èŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢çš„å…·ä½“ç»“æž„ valueOf() { return hash_table.get(this); } } //è¿”å›žæ•£åˆ—è¡¨ç±» return HashTable; })(); let hash_table = new HashTable(); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(hash_table.put(&quot;Gary&quot;, &quot;gary@gmail.com&quot;)); hash_table.put(&quot;Helen&quot;, &quot;helen@gmail.com&quot;); hash_table.put(&quot;Lily&quot;, &quot;lily@gmail.com&quot;); hash_table.put(&quot;Alice&quot;, &quot;alice@gmail.com&quot;); hash_table.put(&quot;Simon&quot;, &quot;simon@gmail.com&quot;); hash_table.put(&quot;Aaron&quot;, &quot;aaron@gmail.com&quot;); hash_table.put(&quot;Tom&quot;, &quot;tom@gmail.com&quot;); hash_table.put(&quot;Tommy&quot;, &quot;tommy@gmail.com&quot;); hash_table.put(&quot;Betty&quot;, &quot;betty@gmail.com&quot;); hash_table.put(&quot;Frank&quot;, &quot;frank@gmail.com&quot;); hash_table.put(&quot;Martin&quot;, &quot;martin@gmail.com&quot;); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­èŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //aaron@gmail.com console.log(hash_table.get(&quot;Aaron&quot;)); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­èŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //tom@gmail.com console.log(hash_table.get(&quot;Tom&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //{key: Gary, value: gary@gmail.com} =&gt; {key: Martin, value: martin@gmail.com} =&gt; -&gt; {key: Lily, value: lily@gmail.com} =&gt; -&gt; {key: Tom, value: tom@gmail.com} =&gt; -&gt; {key: Alice, value: alice@gmail.com} =&gt; -&gt; {key: Simon, value: simon@gmail.com} =&gt; -&gt; {key: Betty, value: betty@gmail.com} =&gt; -&gt; {key: Helen, value: helen@gmail.com} =&gt; -&gt; {key: Aaron, value: aaron@gmail.com} =&gt; {key: Tommy, value: tommy@gmail.com} =&gt; -&gt; {key: Frank, value: frank@gmail.com} =&gt; -&gt; console.log(hash_table.toString()); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //[LinkList, empty Ã— 6, LinkList, empty Ã— 2, LinkList, empty Ã— 5, LinkList, empty Ã— 2, LinkList, empty, LinkList, empty Ã— 8, LinkList, empty Ã— 4, LinkList, LinkList] console.log(hash_table.valueOf()); //è¿™é‡Œåˆ é™¤æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(hash_table.remove(&quot;Aaron&quot;)); hash_table.remove(&quot;Tom&quot;); hash_table.remove(&quot;Tommy&quot;); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­èŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //false console.log(hash_table.get(&quot;Tom&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //{key: Gary, value: gary@gmail.com} =&gt; {key: Martin, value: martin@gmail.com} =&gt; -&gt; {key: Lily, value: lily@gmail.com} =&gt; -&gt; {key: Alice, value: alice@gmail.com} =&gt; -&gt; {key: Simon, value: simon@gmail.com} =&gt; -&gt; {key: Betty, value: betty@gmail.com} =&gt; -&gt; {key: Helen, value: helen@gmail.com} =&gt; -&gt; {key: Frank, value: frank@gmail.com} =&gt; -&gt; console.log(hash_table.toString()); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨é“¾è¡¨æŸ¥è¯¢çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //[LinkList, empty Ã— 6, LinkList, empty Ã— 2, undefined, empty Ã— 5, LinkList, empty Ã— 2, LinkList, empty, LinkList, empty Ã— 8, LinkList, empty Ã— 4, undefined, LinkList] console.log(hash_table.valueOf()); æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£ æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£å…¶å®žå°±æ˜¯åˆ©ç”¨ä½ç½®è¿­ä»£è§£å†³é—®é¢˜,å‡å¦‚æ ¹æ®loseLoseç®—æ³•è§£æžæ•£åˆ—è¡¨é¡¹åŽçš„æ•£åˆ—è¡¨é¡¹,æ‰€åœ¨ä½ç½®å·²ç»å­˜åœ¨æ•£åˆ—è¡¨é¡¹,å°±åŽ»æŸ¥è¯¢æ‰€åœ¨ä½ç½®çš„ä¸‹ä¸€ä¸ªä½ç½®,ä¾æ¬¡è¿­ä»£ä¸‹åŽ»,ç›´åˆ°æŸ¥è¯¢åˆ°ä½ç½®çš„æ•£åˆ—è¡¨é¡¹ä¸ºæ²¡æœ‰å®šä¹‰çš„å€¼ä¸ºæ­¢,ä¸‹é¢æˆ‘ä»¬å°±ç”¨æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£æ¥è§£å†³æ•£åˆ—è¡¨é¡¹è¦†ç›–çš„é—®é¢˜å§ let HashTable = (function () { //è®¾ç½®æ•£åˆ—è¡¨çš„å®¹å™¨,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„[] let hash_table = new WeakMap(); //è®¾ç½®æ•£åˆ—è¡¨ä¸­çš„å¯¹è±¡ç±» //@params key //@params value class Node { constructor(key, value) { this.key = key; this.value = value; } } //è®¾ç½®æ•£åˆ—è¡¨ç±» class HashTable { constructor() { hash_table.set(this, []); } //å®šä¹‰è®¾è®¡æ•£åˆ—è¡¨çš„ç®—æ³•ä¸ºloseLoseç®—æ³• //loseLoseç®—æ³•å°±æ˜¯å°†HashTableä¸­çš„keyçš„æ¯ä¸€ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„ASCIIç å€¼åŠ ä¸Šæ‰€å¤„ä½ç½®ä¹˜ä»¥ä»»ä½•ä¸€ä¸ªè´¨æ•° //ç„¶åŽå¯¹ä»»ä½•ä¸€ä¸ªè´¨æ•°å–ä½™ //æœ€åŽè¿›è¡Œè¿”å›ž loseLoseHashTable(key) { let hash_key = 13, index = 0; for(let i = 0; i &lt; key.length; i++) { index += i * hash_key + key.charCodeAt(i); } return index % 37; } //åœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£é¡¹ put(key, value) { const {loseLoseHashTable} = this; let hash_key = loseLoseHashTable.bind(this)(key), hashTable = hash_table.get(this), node = new Node(key, value); if(hashTable[hash_key] === undefined) { hashTable[hash_key] = node; } else { while(hashTable[hash_key] !== undefined) { if(hashTable[hash_key].key === key) { return false; } hash_key++; } if(hashTable[hash_key] === undefined) { hashTable[hash_key] = node; } } hash_table.set(this, hashTable); return true; } //èŽ·å–æ•£åˆ—è¡¨æŒ‡å®šçš„æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£é¡¹ get(key) { const {loseLoseHashTable} = this; let hash_key = loseLoseHashTable.bind(this)(key), hashTable = hash_table.get(this); if(hashTable[hash_key] === undefined) { return false; } else { while(hashTable[hash_key] !== undefined) { if(hashTable[hash_key].key === key) { return hashTable[hash_key].value; } hash_key++; } } return false; } //åˆ é™¤æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£é¡¹ remove(key) { const {loseLoseHashTable} = this; let hash_key = loseLoseHashTable.bind(this)(key), hashTable = hash_table.get(this); if(hashTable[hash_key] === undefined) { return false; } else { while(hashTable[hash_key] !== undefined) { if(hashTable[hash_key].key === key) { hashTable[hash_key] = undefined; hash_table.set(this, hashTable); return true; } hash_key++; } } return false; } //èŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ toString() { let hashTable = hash_table.get(this), result_str = ``; for(let [key, value] of hashTable.entries()) { if(value !== undefined) { result_str = `${result_str}{key: ${value[&quot;key&quot;]}, value: ${value[&quot;value&quot;]}} -&gt; `; } } return result_str; } //èŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£çš„å…·ä½“ç»“æž„ valueOf() { return hash_table.get(this); } } //è¿”å›žæ•£åˆ—è¡¨ç±» return HashTable; })(); let hash_table = new HashTable(); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(hash_table.put(&quot;Gary&quot;, &quot;gary@gmail.com&quot;)); hash_table.put(&quot;Helen&quot;, &quot;helen@gmail.com&quot;); hash_table.put(&quot;Lily&quot;, &quot;lily@gmail.com&quot;); hash_table.put(&quot;Alice&quot;, &quot;alice@gmail.com&quot;); hash_table.put(&quot;Simon&quot;, &quot;simon@gmail.com&quot;); hash_table.put(&quot;Aaron&quot;, &quot;aaron@gmail.com&quot;); hash_table.put(&quot;Tom&quot;, &quot;tom@gmail.com&quot;); hash_table.put(&quot;Tommy&quot;, &quot;tommy@gmail.com&quot;); hash_table.put(&quot;Betty&quot;, &quot;betty@gmail.com&quot;); hash_table.put(&quot;Frank&quot;, &quot;frank@gmail.com&quot;); hash_table.put(&quot;Martin&quot;, &quot;martin@gmail.com&quot;); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­èŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //aaron@gmail.com console.log(hash_table.get(&quot;Aaron&quot;)); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­èŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //tom@gmail.com console.log(hash_table.get(&quot;Tom&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //{key: Gary, value: gary@gmail.com} -&gt; {key: Martin, value: martin@gmail.com} -&gt; {key: Lily, value: lily@gmail.com} -&gt; {key: Tom, value: tom@gmail.com} -&gt; {key: Alice, value: alice@gmail.com} -&gt; {key: Simon, value: simon@gmail.com} -&gt; {key: Betty, value: betty@gmail.com} -&gt; {key: Helen, value: helen@gmail.com} -&gt; {key: Aaron, value: aaron@gmail.com} -&gt; {key: Tommy, value: tommy@gmail.com} -&gt; {key: Frank, value: frank@gmail.com} -&gt; console.log(hash_table.toString()); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //[Node, Node, empty Ã— 5, Node, empty Ã— 2, Node, empty Ã— 5, Node, empty Ã— 2, Node, empty, Node, empty Ã— 8, Node, empty Ã— 4, Node, Node, Node] console.log(hash_table.valueOf()); //è¿™é‡Œåˆ é™¤æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(hash_table.remove(&quot;Aaron&quot;)); hash_table.remove(&quot;Tom&quot;); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­èŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //false console.log(hash_table.get(&quot;Tom&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //{key: Gary, value: gary@gmail.com} -&gt; {key: Martin, value: martin@gmail.com} -&gt; {key: Lily, value: lily@gmail.com} -&gt; {key: Alice, value: alice@gmail.com} -&gt; {key: Simon, value: simon@gmail.com} -&gt; {key: Betty, value: betty@gmail.com} -&gt; {key: Helen, value: helen@gmail.com} -&gt; {key: Tommy, value: tommy@gmail.com} -&gt; {key: Frank, value: frank@gmail.com} -&gt; console.log(hash_table.toString()); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨å·¡èˆªè¿­ä»£çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //[Node, Node, empty Ã— 5, Node, empty Ã— 2, undefined, empty Ã— 5, Node, empty Ã— 2, Node, empty, Node, empty Ã— 8, Node, empty Ã— 4, undefined, Node, Node] console.log(hash_table.valueOf()); djb2ç®—æ³•è§£å†³ä¸€åˆ‡é—®é¢˜ è¿˜æœ‰ä¸€ç§æ—¢ä¸ä½¿ç”¨é“¾è¡¨æŸ¥è¯¢,ä¹Ÿä¸ä½¿ç”¨å·¡èˆªè¿­ä»£çš„æ–¹æ³•,é‚£å°±æ˜¯å±•ç¤ºæ•£åˆ—è¡¨æ›´å¹¿çš„djb2ç®—æ³•,ä½¿ç”¨djb2ç®—æ³•å°±å¯ä»¥ç›´æŽ¥è§£å†³loseLoseç®—æ³•è§£æžåŽæ•£åˆ—è¡¨é¡¹è¦†ç›–çš„é—®é¢˜,ä¸‹é¢æˆ‘ä»¬å°±ç”¨djb2ç®—æ³•æ¥è§£å†³æ•£åˆ—è¡¨é¡¹è¦†ç›–çš„é—®é¢˜å§ let HashTable = (function() { //è®¾ç½®æ•£åˆ—è¡¨çš„å®¹å™¨,å¹¶åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„[] let hash_table = new WeakMap(); //è®¾ç½®æ•£åˆ—è¡¨ç±» class HashTable { constructor() { hash_table.set(this, []); } //å®šä¹‰è®¾è®¡æ•£åˆ—è¡¨çš„ç®—æ³•ä¸ºdjb2ç®—æ³• //djb2ç®—æ³•å’ŒloseLoseç®—æ³•ç›¸è¿‘,éƒ½æ˜¯å®šä¹‰ä¸€ä¸ªè´¨æ•°(æ•°å€¼æ¯”è¾ƒå¤§çš„è´¨æ•°)ä¹˜ä»¥å±žæ€§çš„æ¯ä¸€ä¸ªå­—ç¬¦æ‰€åœ¨çš„ä½ç½®,å†åŠ ä¸Šå±žæ€§æ¯ä¸€ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„ASCIIç å€¼ //ç„¶åŽå¯¹ä»»ä½•ä¸€ä¸ªè´¨æ•°(æ•°å€¼æ¯”è¾ƒå¤§çš„è´¨æ•°)å–ä½™ //æœ€åŽå†è¿”å›ž djb2HashTable(key) { let hash_key = 5381, index = 0; for(let i = 0; i &lt; key.length; i++) { index += i * hash_key + key.charCodeAt(i); } return index % 1013; } //åœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ æ•£åˆ—è¡¨é¡¹ put(key, value) { const {djb2HashTable} = this; let hashTable = hash_table.get(this), hash_key = djb2HashTable.bind(this)(key); if(hashTable[hash_key] !== undefined) { return false; } hashTable[hash_key] = value; return true; } //èŽ·å–æ•£åˆ—è¡¨æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ get(key) { const {djb2HashTable} = this; let hashTable = hash_table.get(this), hash_key = djb2HashTable.bind(this)(key); if(hashTable[hash_key] === undefined) { return false; } return hashTable[hash_key]; } //åˆ é™¤æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ remove(key) { const {djb2HashTable} = this; let hashTable = hash_table.get(this), hash_key = djb2HashTable.bind(this)(key); if(hashTable[hash_key] === undefined) { return false; } hashTable[hash_key] = undefined; return true; } //èŽ·å–æ•£åˆ—è¡¨æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ toString() { let hashTable = hash_table.get(this), result_str = ``; for(let [key, value] of hashTable.entries()) { if(value !== undefined) { result_str = `${result_str}${value} -&gt; `; } } return result_str; } //èŽ·å–æ•£åˆ—è¡¨çš„å…·ä½“ç»“æž„ valueOf() { return hash_table.get(this); } } //è¿”å›žæ•£åˆ—è¡¨ç±» return HashTable; })(); let hash_table = new HashTable(); //è¿™é‡Œåœ¨æ•£åˆ—è¡¨ä¸­æ·»åŠ æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(hash_table.put(&quot;Gary&quot;, &quot;gary@gmail.com&quot;)); hash_table.put(&quot;Helen&quot;, &quot;helen@gmail.com&quot;); hash_table.put(&quot;Lily&quot;, &quot;lily@gmail.com&quot;); hash_table.put(&quot;Alice&quot;, &quot;alice@gmail.com&quot;); hash_table.put(&quot;Simon&quot;, &quot;simon@gmail.com&quot;); hash_table.put(&quot;Aaron&quot;, &quot;aaron@gmail.com&quot;); hash_table.put(&quot;Tom&quot;, &quot;tom@gmail.com&quot;); hash_table.put(&quot;Tommy&quot;, &quot;tommy@gmail.com&quot;); hash_table.put(&quot;Betty&quot;, &quot;betty@gmail.com&quot;); hash_table.put(&quot;Frank&quot;, &quot;frank@gmail.com&quot;); hash_table.put(&quot;Martin&quot;, &quot;martin@gmail.com&quot;); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //aaron@gmail.com console.log(hash_table.get(&quot;Aaron&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //tom@gmail.com console.log(hash_table.get(&quot;Tom&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //tom@gmail.com -&gt; gary@gmail.com -&gt; lily@gmail.com -&gt; martin@gmail.com -&gt; alice@gmail.com -&gt; helen@gmail.com -&gt; aaron@gmail.com -&gt; frank@gmail.com -&gt; simon@gmail.com -&gt; betty@gmail.com -&gt; tommy@gmail.com -&gt; console.log(hash_table.toString()); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //[empty Ã— 239, &quot;tom@gmail.com&quot;, empty Ã— 33, &quot;gary@gmail.com&quot;, empty Ã— 6, &quot;lily@gmail.com&quot;, empty Ã— 13, &quot;martin@gmail.com&quot;, empty Ã— 304, &quot;alice@gmail.com&quot;, empty Ã— 13, &quot;helen@gmail.com&quot;, empty Ã— 4, &quot;aaron@gmail.com&quot;, &quot;frank@gmail.com&quot;, empty Ã— 19, &quot;simon@gmail.com&quot;, empty, &quot;betty@gmail.com&quot;, empty Ã— 13, &quot;tommy@gmail.com&quot;] console.log(hash_table.valueOf()); //è¿™é‡Œåˆ é™¤æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(hash_table.remove(&quot;Aaron&quot;)); hash_table.remove(&quot;Tom&quot;); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨ä¸­æŒ‡å®šçš„æ•£åˆ—è¡¨é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //false console.log(hash_table.get(&quot;Tom&quot;)); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨æ‹¥æœ‰å€¼çš„å­—ç¬¦ä¸²é¡¹ //åœ¨è¿™é‡Œæ‰“å°: //gary@gmail.com -&gt; lily@gmail.com -&gt; martin@gmail.com -&gt; alice@gmail.com -&gt; helen@gmail.com -&gt; frank@gmail.com -&gt; simon@gmail.com -&gt; betty@gmail.com -&gt; tommy@gmail.com -&gt; console.log(hash_table.toString()); //è¿™é‡ŒèŽ·å–æ•£åˆ—è¡¨çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //[empty Ã— 239, undefined, empty Ã— 33, &quot;gary@gmail.com&quot;, empty Ã— 6, &quot;lily@gmail.com&quot;, empty Ã— 13, &quot;martin@gmail.com&quot;, empty Ã— 304, &quot;alice@gmail.com&quot;, empty Ã— 13, &quot;helen@gmail.com&quot;, empty Ã— 4, undefined, &quot;frank@gmail.com&quot;, empty Ã— 19, &quot;simon@gmail.com&quot;, empty, &quot;betty@gmail.com&quot;, empty Ã— 13, &quot;tommy@gmail.com&quot;] console.log(hash_table.valueOf()); äºŒå‰æ ‘ è¿™æ˜¯æˆ‘ä»¬å­¦ä¹ çš„ç¬¬ä¸€ç§éžçº¿æ€§éžé¡ºåºçš„æ•°æ®ç»“æž„ â€”â€” æ ‘,åŽé¢è¿˜ä¼šå­¦åˆ°æ›´å¤š,æ¯”å¦‚è¯´å›¾ã€‚æ ‘åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹,æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯èƒ½æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­èŠ‚ç‚¹ â€”â€” å­å¶,ä»Šå¤©æˆ‘ä»¬å®žçŽ°çš„äºŒå‰æ ‘,æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªå­å¶,leftçš„å­å¶æ¯”å…¶çˆ¶èŠ‚ç‚¹æ•°å€¼å°,rightçš„å­å¶æ¯”å…¶çˆ¶èŠ‚ç‚¹æ•°å€¼å¤§,ä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹äºŒå‰æ ‘ let Tree = (function () { //è®¾ç½®äºŒå‰æ ‘çš„å®¹å™¨,å¹¶åˆå§‹åŒ–ä¸ºnull let head = new WeakMap(); //å®šä¹‰äºŒå‰æ ‘å­å¶èŠ‚ç‚¹ç±» //@params node //@params left //@params right class Node { constructor(node) { this.node = node; this.left = null; this.right = null; } } //å®šä¹‰äºŒå‰æ ‘ç±» class Tree { constructor() { head.set(this, null); } //åœ¨äºŒå‰æ ‘ä¸­æ·»åŠ å­å¶èŠ‚ç‚¹ insert(node) { const {insertNode} = this; let head_tree = head.get(this); head_tree = insertNode.bind(this)(head_tree, node); head.set(this, head_tree); return true; } //äºŒå‰æ ‘ä¸­æ·»åŠ å­å¶èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³• //åˆ©ç”¨å½“å‰çš„å­å¶èŠ‚ç‚¹å’Œæ·»åŠ çš„å­å¶èŠ‚ç‚¹æ•°å€¼è¿›è¡Œæ¯”è¾ƒ //å‡å¦‚å°äºŽæ·»åŠ çš„å­å¶èŠ‚ç‚¹æ•°å€¼,å°±æŸ¥è¯¢å½“å‰å­å¶èŠ‚ç‚¹çš„å³å­å¶èŠ‚ç‚¹ //å‡å¦‚å¤§äºŽæ·»åŠ çš„å­å¶èŠ‚ç‚¹æ•°å€¼,å°±æŸ¥è¯¢å½“å‰å­å¶èŠ‚ç‚¹çš„å·¦å­å¶èŠ‚ç‚¹ //ç›´åˆ°æŸ¥è¯¢åˆ°èŠ‚ç‚¹ä¸ºnullä¸ºæ­¢,ç„¶åŽæ·»åŠ æ–°çš„å­å¶èŠ‚ç‚¹ insertNode(node, node_key) { const {insertNode} = this; if(!node) { node = new Node(node_key); } else if(node.node &gt; node_key) { node.left = insertNode.bind(this)(node.left, node_key); } else { node.right = insertNode.bind(this)(node.right, node_key); } return node; } //åœ¨äºŒå‰æ ‘ä¸­åˆ é™¤æŒ‡å®šçš„å­å¶èŠ‚ç‚¹ remove(node) { const {removeNode} = this; let head_tree = head.get(this); if(!head_tree) { return false; } head_tree = removeNode.bind(this)(head_tree, node); head.set(this, head_tree); return true; } //äºŒå‰æ ‘ä¸­åˆ é™¤æŒ‡å®šçš„å­å¶èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³• //åˆ©ç”¨å½“å‰çš„å­å¶èŠ‚ç‚¹å’Œåˆ é™¤çš„å­å¶èŠ‚ç‚¹æ•°å€¼è¿›è¡Œæ¯”è¾ƒ //å‡å¦‚å°äºŽåˆ é™¤çš„å­å¶èŠ‚ç‚¹,å°±æŸ¥è¯¢å½“å‰å­å¶èŠ‚ç‚¹çš„å³å­å¶èŠ‚ç‚¹ //å‡å¦‚å¤§äºŽåˆ é™¤çš„å­å¶èŠ‚ç‚¹,å°±æŸ¥è¯¢å½“å‰å­å¶èŠ‚ç‚¹çš„å·¦å­å¶èŠ‚ç‚¹ //ç›´åˆ°ç­‰äºŽåˆ é™¤çš„å­å¶èŠ‚ç‚¹æ•°å€¼,åˆ†ä¸ºä¸‰ç§æƒ…å†µ //ç¬¬ä¸€ç§,åˆ é™¤çš„å­å¶èŠ‚ç‚¹åº•ä¸‹æ²¡æœ‰å…¶å·¦å³å­å¶èŠ‚ç‚¹,å°±ç›´æŽ¥å°†åˆ é™¤çš„å­å¶èŠ‚ç‚¹ç½®ä¸ºnull //ç¬¬äºŒç§,åˆ é™¤çš„å­å¶èŠ‚ç‚¹åº•ä¸‹çš„å·¦å³å­å¶èŠ‚ç‚¹æœ‰ä¸€è¾¹ä¸ºnull,å°±ç›´æŽ¥å°†åˆ é™¤çš„å­å¶èŠ‚ç‚¹ç½®ä¸ºå·¦å³å­å¶èŠ‚ç‚¹ä¸ä¸ºnullçš„ä¸€è¾¹ //ç¬¬ä¸‰ç§,åˆ é™¤çš„å­å¶èŠ‚ç‚¹åº•ä¸‹å…¶å·¦å³å­å¶èŠ‚ç‚¹éƒ½ä¸ä¸ºnull,å°±ç›´æŽ¥åŽ»æŸ¥è¯¢åˆ é™¤çš„å­å¶èŠ‚ç‚¹å…¶å³å­å¶èŠ‚ç‚¹åº•ä¸‹çš„æœ€å°çš„å­å¶èŠ‚ç‚¹,å¹¶å°†åˆ é™¤çš„å­å¶èŠ‚ç‚¹çš„æ•°å€¼ç½®ä¸ºè¿™ä¸ªæœ€å°çš„å­å¶èŠ‚ç‚¹çš„æ•°å€¼,å†å°†åˆ é™¤çš„å­å¶èŠ‚ç‚¹å…¶å³å­å¶èŠ‚ç‚¹åº•ä¸‹çš„æœ€å°çš„å­å¶èŠ‚ç‚¹åˆ é™¤ removeNode(node, node_key) { const {removeNode, findTheLeftNode} = this; if(node.node &gt; node_key) { node.left = removeNode.bind(this)(node.left, node_key); } else if(node.node &lt; node_key){ node.right = removeNode.bind(this)(node.right, node_key); } else { if(!node.left &amp;&amp; !node.right) { node = null; } else if (!node.left) { node = node.right; } else if (!node.right) { node = node.left; } else { let aux = findTheLeftNode.bind(this)(node.right); node.node = aux.node; node.right = removeNode.bind(this)(node.right, aux.node); } } return node; } //æŸ¥è¯¢å­å¶èŠ‚ç‚¹åº•ä¸‹çš„æœ€å°çš„(æœ€å·¦è¾¹çš„)å­å¶èŠ‚ç‚¹ findTheLeftNode(node) { const {findTheLeftNode} = this; if(node.left) { return findTheLeftNode.bind(this)(node.left); } return node; } //åœ¨äºŒå‰æ ‘ä¸­èŽ·å–æœ€å°çš„(æœ€å·¦è¾¹çš„)å­å¶èŠ‚ç‚¹æ•°å€¼ min() { const {minNode} = this; let head_tree = head.get(this); console.log(&quot;æœ€å°çš„å­å¶:&quot;); return minNode.bind(this)(head_tree).node; } //äºŒå‰æ ‘ä¸­èŽ·å–æœ€å°çš„(æœ€å·¦è¾¹çš„)å­å¶èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³• minNode(node) { const {minNode} = this; if(node.left) { return minNode.bind(this)(node.left); } return node; } //åœ¨äºŒå‰æ ‘ä¸­èŽ·å–æœ€å¤§çš„(æœ€å³è¾¹çš„)å­å¶èŠ‚ç‚¹æ•°å€¼ max() { const {maxNode} = this; let head_tree = head.get(this); console.log(&quot;æœ€å¤§çš„å­å¶:&quot;); return maxNode.bind(this)(head_tree).node; } //äºŒå‰æ ‘ä¸­èŽ·å–æœ€å¤§çš„(æœ€å³è¾¹çš„)å­å¶èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³• maxNode(node) { const {maxNode} = this; if(node.right) { return maxNode.bind(this)(node.right); } return node; } //åœ¨äºŒå‰æ ‘èŽ·å–å…ˆåºéåŽ† preorderTraversal(method) { const {preorderTraversalNode} = this; let head_tree = head.get(this); console.log(&quot;å…ˆåºéåŽ†:&quot;); preorderTraversalNode.bind(this)(head_tree, method); } //äºŒå‰æ ‘å…ˆåºéåŽ†æ‰§è¡Œæ–¹æ³• preorderTraversalNode(node, method) { const {preorderTraversalNode} = this; if(node) { method.bind(this)(node); preorderTraversalNode.bind(this)(node.left, method); preorderTraversalNode.bind(this)(node.right, method); } } //åœ¨äºŒå‰æ ‘ä¸­èŽ·å–ä¸­åºéåŽ† inorderTraversal(method) { const {inorderTraversalNode} = this; let head_tree = head.get(this); console.log(&quot;ä¸­åºéåŽ†:&quot;); inorderTraversalNode.bind(this)(head_tree, method); } //äºŒå‰æ ‘ä¸­åºéåŽ†æ‰§è¡Œæ–¹æ³• inorderTraversalNode(node, method) { const {inorderTraversalNode} = this; if(node) { inorderTraversalNode.bind(this)(node.left, method); method.bind(this)(node); inorderTraversalNode.bind(this)(node.right, method); } } //åœ¨äºŒå‰æ ‘ä¸­èŽ·å–åŽåºéåŽ† postorderTraversal(method) { const {postorderTraversalNode} = this; let head_tree = head.get(this); console.log(&quot;åŽåºéåŽ†:&quot;); postorderTraversalNode.bind(this)(head_tree, method); } //äºŒå‰æ ‘åŽåºéåŽ†æ‰§è¡Œæ–¹æ³• postorderTraversalNode(node, method) { const {postorderTraversalNode} = this; if(node) { postorderTraversalNode.bind(this)(node.left, method); postorderTraversalNode.bind(this)(node.right, method); method.bind(this)(node); } } //åœ¨äºŒå‰æ ‘ä¸­èŽ·å–äºŒå‰æ ‘çš„å…·ä½“ç»“æž„ valueOf() { let head_tree = head.get(this); return head_tree; } } //è¿”å›žäºŒå‰æ ‘ç±» return Tree; })(); let tree = new Tree(); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­æ·»åŠ å­èŠ‚ç‚¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(tree.insert(15)); tree.insert(10); tree.insert(18); tree.insert(20); tree.insert(17); tree.insert(16); tree.insert(25); tree.insert(5); tree.insert(8); tree.insert(55); tree.insert(30); tree.insert(35); tree.insert(40); tree.insert(45); tree.insert(50); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­èŽ·å–æœ€å°çš„(æœ€å·¦è¾¹çš„)å­å¶èŠ‚ç‚¹æ•°å€¼ //åœ¨è¿™é‡Œæ‰“å°: //æœ€å°çš„å­å¶: //5 console.log(tree.min()); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­èŽ·å–æœ€å¤§çš„(æœ€å³è¾¹çš„)å­å¶èŠ‚ç‚¹æ•°å€¼ //åœ¨è¿™é‡Œæ‰“å°: //æœ€å¤§çš„å­å¶: //55 console.log(tree.max()); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­èŽ·å–ä¸­åºéåŽ† //åœ¨è¿™é‡Œæ‰“å°: //ä¸­åºéåŽ†: //5 //8 //10 //15 //16 //17 //18 //20 //25 //30 //35 //40 //45 //50 //55 tree.inorderTraversal((node)=&gt;{ console.log(node.node); }); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­èŽ·å–å…ˆåºéåŽ† //åœ¨è¿™é‡Œæ‰“å°: //å…ˆåºéåŽ†: //15 //10 //5 //8 //18 //17 //16 //20 //25 //55 //30 //35 //40 //45 //50 tree.preorderTraversal((node)=&gt;{ console.log(node.node); }); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­èŽ·å–åŽåºéåŽ† //åœ¨è¿™é‡Œæ‰“å°: //åŽåºéåŽ†: //8 //5 //10 //16 //17 //50 //45 //40 //35 //30 //55 //25 //20 //18 //15 tree.postorderTraversal((node)=&gt;{ console.log(node.node); }); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­èŽ·å–äºŒå‰æ ‘çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //Node {node: 15, left: Node, right: Node} console.log(tree.valueOf()); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­åˆ é™¤æŒ‡å®šçš„å­å¶èŠ‚ç‚¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(tree.remove(50)); tree.remove(40); tree.remove(15); //è¿™é‡Œåœ¨äºŒå‰æ ‘ä¸­èŽ·å–äºŒå‰æ ‘çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //Node {node: 16, left: Node, right: Node} console.log(tree.valueOf()); å¹³è¡¡äºŒå‰æ ‘ ä»‹ç»å¹¶å°è£…å®Œäº†äºŒå‰æ ‘ä¹‹åŽ,æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹å¹³è¡¡äºŒå‰æ ‘,å…¶å®žå¹³è¡¡äºŒå‰æ ‘å°±æ˜¯æ¯ä¸€ä¸ªäºŒå‰æ ‘ä¸Šé¢çš„èŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„ç»å¯¹å€¼ä¸å¯ä»¥è¶…è¿‡1,ä¹Ÿå°±æ˜¯è¯´-1 &lt;= å¹³è¡¡å› å­ &lt;= 1,æ‰€è°“çš„å¹³è¡¡å› å­å°±æ˜¯äºŒå‰æ ‘èŠ‚ç‚¹å­æ ‘èŠ‚ç‚¹çº§æ•°,-1 &lt;= å·¦å­æ ‘çº§æ•° - å³å­æ ‘çº§æ•° &lt;= 1,ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹å¹³è¡¡äºŒå‰æ ‘å§ let AVLTree = (function () { //è®¾ç½®å¹³è¡¡äºŒå‰æ ‘çš„å®¹å™¨,å¹¶åˆå§‹åŒ–ä¸ºnull let head = new WeakMap(); //å®šä¹‰å¹³è¡¡äºŒå‰æ ‘å­å¶èŠ‚ç‚¹ç±» //@params node //@params left //@params right class Node { constructor(node) { this.node = node; this.left = null; this.right = null; } } //å®šä¹‰å¹³è¡¡äºŒå‰æ ‘ç±» class AVLTree { constructor() { head.set(this, null); } //åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­æ·»åŠ å­å¶èŠ‚ç‚¹ insert(node) { const {insertNode} = this; let head_tree = head.get(this); head_tree = insertNode.bind(this)(head_tree, node); head.set(this, head_tree); return true; } //å¹³è¡¡äºŒå‰æ ‘ä¸­æ·»åŠ å­å¶èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³• //åˆ©ç”¨å½“å‰çš„å­å¶èŠ‚ç‚¹å’Œæ·»åŠ çš„å­å¶èŠ‚ç‚¹æ•°å€¼è¿›è¡Œæ¯”è¾ƒ //å‡å¦‚å°äºŽæ·»åŠ çš„å­å¶èŠ‚ç‚¹æ•°å€¼,å°±æŸ¥è¯¢å½“å‰å­å¶èŠ‚ç‚¹çš„å³å­å¶èŠ‚ç‚¹ //å‡å¦‚å¤§äºŽæ·»åŠ çš„å­å¶èŠ‚ç‚¹æ•°å€¼,å°±æŸ¥è¯¢å½“å‰å­å¶èŠ‚ç‚¹çš„å·¦å­å¶èŠ‚ç‚¹ //ç›´åˆ°æŸ¥è¯¢åˆ°èŠ‚ç‚¹ä¸ºnullä¸ºæ­¢,ç„¶åŽæ·»åŠ æ–°çš„å­å¶èŠ‚ç‚¹ insertNode(node, node_key) { const {insertNode, findBalanceFactor, LLBalanceNode, LRBalanceNode, RRBalanceNode, RLBalanceNode} = this; if(!node) { node = new Node(node_key); } else if(node.node &gt; node_key) { node.left = insertNode.bind(this)(node.left, node_key); if(findBalanceFactor.bind(this)(node.left) - findBalanceFactor.bind(this)(node.right) &gt; 1) { if(node_key &lt; node.left.node) { node = LLBalanceNode.bind(this)(node); } else { node = LRBalanceNode.bind(this)(node); } } } else { node.right = insertNode.bind(this)(node.right, node_key); if(findBalanceFactor.bind(this)(node.right) - findBalanceFactor.bind(this)(node.left) &gt; 1) { if(node_key &gt; node.right.node) { node = RRBalanceNode.bind(this)(node); } else { node = RLBalanceNode.bind(this)(node); } } } return node; } //å¹³è¡¡äºŒå‰æ ‘ä½¿ç”¨LLç®—æ³•æ¥è§£å†³æ·»åŠ çš„æ–°çš„å­å¶èŠ‚ç‚¹æ•°å€¼å°äºŽå…¶çˆ¶å­å¶èŠ‚ç‚¹(å·¦è¾¹çˆ¶å­å¶èŠ‚ç‚¹)çš„æ•°å€¼çš„å¹³è¡¡é—®é¢˜ LLBalanceNode(node) { let target = node.left; node.left = target.right; target.right = node; return target; } //å¹³è¡¡äºŒå‰æ ‘ä½¿ç”¨LLç®—æ³•æ¥è§£å†³æ·»åŠ çš„æ–°çš„å­å¶èŠ‚ç‚¹æ•°å€¼å¤§äºŽå…¶çˆ¶å­å¶èŠ‚ç‚¹(å·¦è¾¹çˆ¶å­å¶èŠ‚ç‚¹)çš„æ•°å€¼çš„å¹³è¡¡é—®é¢˜ LRBalanceNode(node) { const {RRBalanceNode, LLBalanceNode} = this; node.left = RRBalanceNode.bind(this)(node.left); return LLBalanceNode.bind(this)(node); } //å¹³è¡¡äºŒå‰æ ‘ä½¿ç”¨RRç®—æ³•æ¥è§£å†³æ·»åŠ çš„æ–°çš„å­å¶èŠ‚ç‚¹æ•°å€¼å¤§äºŽå…¶çˆ¶å­å¶èŠ‚ç‚¹(å³è¾¹çˆ¶å­å¶èŠ‚ç‚¹)çš„æ•°å€¼çš„å¹³è¡¡é—®é¢˜ RRBalanceNode(node) { let target = node.right; node.right = target.left; target.left = node; return target; } //å¹³è¡¡äºŒå‰æ ‘ä½¿ç”¨RRç®—æ³•æ¥è§£å†³æ·»åŠ çš„æ–°çš„å­å¶èŠ‚ç‚¹æ•°å€¼å°äºŽå…¶çˆ¶å­å¶èŠ‚ç‚¹(å³è¾¹çˆ¶å­å¶èŠ‚ç‚¹)çš„æ•°å€¼çš„å¹³è¡¡é—®é¢˜ RLBalanceNode(node) { const {RRBalanceNode, LLBalanceNode} = this; node.right = LLBalanceNode.bind(this)(node.right); return RRBalanceNode.bind(this)(node); } //èŽ·å–æ¯ä¸ªå¹³è¡¡äºŒå‰æ ‘èŠ‚ç‚¹çš„å¹³è¡¡å› å­ findBalanceFactor(node) { const {findBalanceFactor} = this; if(!node) { return -1; } else { return Math.max(findBalanceFactor.bind(this)(node.left), findBalanceFactor.bind(this)(node.right)) + 1; } } //åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­åˆ é™¤æŒ‡å®šçš„å­å¶èŠ‚ç‚¹ remove(node) { const {removeNode} = this; let head_tree = head.get(this); if(!head_tree) { return false; } head_tree = removeNode.bind(this)(head_tree, node); head.set(this, head_tree); return true; } //å¹³è¡¡äºŒå‰æ ‘ä¸­åˆ é™¤æŒ‡å®šçš„å­å¶èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³• //åˆ©ç”¨å½“å‰çš„å­å¶èŠ‚ç‚¹å’Œåˆ é™¤çš„å­å¶èŠ‚ç‚¹æ•°å€¼è¿›è¡Œæ¯”è¾ƒ //å‡å¦‚å°äºŽåˆ é™¤çš„å­å¶èŠ‚ç‚¹,å°±æŸ¥è¯¢å½“å‰å­å¶èŠ‚ç‚¹çš„å³å­å¶èŠ‚ç‚¹ //å‡å¦‚å¤§äºŽåˆ é™¤çš„å­å¶èŠ‚ç‚¹,å°±æŸ¥è¯¢å½“å‰å­å¶èŠ‚ç‚¹çš„å·¦å­å¶èŠ‚ç‚¹ //ç›´åˆ°ç­‰äºŽåˆ é™¤çš„å­å¶èŠ‚ç‚¹æ•°å€¼,åˆ†ä¸ºä¸‰ç§æƒ…å†µ //ç¬¬ä¸€ç§,åˆ é™¤çš„å­å¶èŠ‚ç‚¹åº•ä¸‹æ²¡æœ‰å…¶å·¦å³å­å¶èŠ‚ç‚¹,å°±ç›´æŽ¥å°†åˆ é™¤çš„å­å¶èŠ‚ç‚¹ç½®ä¸ºnull //ç¬¬äºŒç§,åˆ é™¤çš„å­å¶èŠ‚ç‚¹åº•ä¸‹çš„å·¦å³å­å¶èŠ‚ç‚¹æœ‰ä¸€è¾¹ä¸ºnull,å°±ç›´æŽ¥å°†åˆ é™¤çš„å­å¶èŠ‚ç‚¹ç½®ä¸ºå·¦å³å­å¶èŠ‚ç‚¹ä¸ä¸ºnullçš„ä¸€è¾¹ //ç¬¬ä¸‰ç§,åˆ é™¤çš„å­å¶èŠ‚ç‚¹åº•ä¸‹å…¶å·¦å³å­å¶èŠ‚ç‚¹éƒ½ä¸ä¸ºnull,å°±ç›´æŽ¥åŽ»æŸ¥è¯¢åˆ é™¤çš„å­å¶èŠ‚ç‚¹å…¶å³å­å¶èŠ‚ç‚¹åº•ä¸‹çš„æœ€å°çš„å­å¶èŠ‚ç‚¹,å¹¶å°†åˆ é™¤çš„å­å¶èŠ‚ç‚¹çš„æ•°å€¼ç½®ä¸ºè¿™ä¸ªæœ€å°çš„å­å¶èŠ‚ç‚¹çš„æ•°å€¼,å†å°†åˆ é™¤çš„å­å¶èŠ‚ç‚¹å…¶å³å­å¶èŠ‚ç‚¹åº•ä¸‹çš„æœ€å°çš„å­å¶èŠ‚ç‚¹åˆ é™¤ removeNode(node, node_key) { const {removeNode, findTheLeftNode} = this; if(node.node &gt; node_key) { node.left = removeNode.bind(this)(node.left, node_key); } else if(node.node &lt; node_key){ node.right = removeNode.bind(this)(node.right, node_key); } else { if(!node.left &amp;&amp; !node.right) { node = null; } else if (!node.left) { node = node.right; } else if (!node.right) { node = node.left; } else { let aux = findTheLeftNode.bind(this)(node.right); node.node = aux.node; node.right = removeNode.bind(this)(node.right, aux.node); } } return node; } //æŸ¥è¯¢å­å¶èŠ‚ç‚¹åº•ä¸‹çš„æœ€å°çš„(æœ€å·¦è¾¹çš„)å­å¶èŠ‚ç‚¹ findTheLeftNode(node) { const {findTheLeftNode} = this; if(node.left) { return findTheLeftNode.bind(this)(node.left); } return node; } //åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–æœ€å°çš„(æœ€å·¦è¾¹çš„)å­å¶èŠ‚ç‚¹æ•°å€¼ min() { const {minNode} = this; let head_tree = head.get(this); console.log(&quot;æœ€å°çš„å­å¶:&quot;); return minNode.bind(this)(head_tree).node; } //å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–æœ€å°çš„(æœ€å·¦è¾¹çš„)å­å¶èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³• minNode(node) { const {minNode} = this; if(node.left) { return minNode.bind(this)(node.left); } return node; } //åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–æœ€å¤§çš„(æœ€å³è¾¹çš„)å­å¶èŠ‚ç‚¹æ•°å€¼ max() { const {maxNode} = this; let head_tree = head.get(this); console.log(&quot;æœ€å¤§çš„å­å¶:&quot;); return maxNode.bind(this)(head_tree).node; } //å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–æœ€å¤§çš„(æœ€å³è¾¹çš„)å­å¶èŠ‚ç‚¹æ‰§è¡Œæ–¹æ³• maxNode(node) { const {maxNode} = this; if(node.right) { return maxNode.bind(this)(node.right); } return node; } //åœ¨å¹³è¡¡äºŒå‰æ ‘èŽ·å–å…ˆåºéåŽ† preorderTraversal(method) { const {preorderTraversalNode} = this; let head_tree = head.get(this); console.log(&quot;å…ˆåºéåŽ†:&quot;); preorderTraversalNode.bind(this)(head_tree, method); } //å¹³è¡¡äºŒå‰æ ‘å…ˆåºéåŽ†æ‰§è¡Œæ–¹æ³• preorderTraversalNode(node, method) { const {preorderTraversalNode} = this; if(node) { method.bind(this)(node); preorderTraversalNode.bind(this)(node.left, method); preorderTraversalNode.bind(this)(node.right, method); } } //åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–ä¸­åºéåŽ† inorderTraversal(method) { const {inorderTraversalNode} = this; let head_tree = head.get(this); console.log(&quot;ä¸­åºéåŽ†:&quot;); inorderTraversalNode.bind(this)(head_tree, method); } //å¹³è¡¡äºŒå‰æ ‘ä¸­åºéåŽ†æ‰§è¡Œæ–¹æ³• inorderTraversalNode(node, method) { const {inorderTraversalNode} = this; if(node) { inorderTraversalNode.bind(this)(node.left, method); method.bind(this)(node); inorderTraversalNode.bind(this)(node.right, method); } } //åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–åŽåºéåŽ† postorderTraversal(method) { const {postorderTraversalNode} = this; let head_tree = head.get(this); console.log(&quot;åŽåºéåŽ†:&quot;); postorderTraversalNode.bind(this)(head_tree, method); } //å¹³è¡¡äºŒå‰æ ‘åŽåºéåŽ†æ‰§è¡Œæ–¹æ³• postorderTraversalNode(node, method) { const {postorderTraversalNode} = this; if(node) { postorderTraversalNode.bind(this)(node.left, method); postorderTraversalNode.bind(this)(node.right, method); method.bind(this)(node); } } //åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–äºŒå‰æ ‘çš„å…·ä½“ç»“æž„ valueOf() { let head_tree = head.get(this); return head_tree; } } //è¿”å›žå¹³è¡¡äºŒå‰æ ‘ç±» return AVLTree; })(); let tree = new AVLTree(); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­æ·»åŠ å­èŠ‚ç‚¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(tree.insert(15)); tree.insert(10); tree.insert(18); tree.insert(20); tree.insert(17); tree.insert(16); tree.insert(25); tree.insert(5); tree.insert(8); tree.insert(55); tree.insert(30); tree.insert(35); tree.insert(40); tree.insert(45); tree.insert(50); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–æœ€å°çš„(æœ€å·¦è¾¹çš„)å­å¶èŠ‚ç‚¹æ•°å€¼ //åœ¨è¿™é‡Œæ‰“å°: //æœ€å°çš„å­å¶: //5 console.log(tree.min()); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–æœ€å¤§çš„(æœ€å³è¾¹çš„)å­å¶èŠ‚ç‚¹æ•°å€¼ //åœ¨è¿™é‡Œæ‰“å°: //æœ€å¤§çš„å­å¶: //55 console.log(tree.max()); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–ä¸­åºéåŽ† //åœ¨è¿™é‡Œæ‰“å°: //ä¸­åºéåŽ†: //5 //8 //10 //15 //16 //17 //18 //20 //25 //30 //35 //40 //45 //50 //55 tree.inorderTraversal((node)=&gt;{ console.log(node.node); }); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–å…ˆåºéåŽ† //åœ¨è¿™é‡Œæ‰“å°: //å…ˆåºéåŽ†: //17 //15 //8 //5 //10 //16 //30 //20 //18 //25 //40 //35 //50 //45 //55 tree.preorderTraversal((node)=&gt;{ console.log(node.node); }); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–åŽåºéåŽ† //åœ¨è¿™é‡Œæ‰“å°: //åŽåºéåŽ†: //5 //10 //8 //16 //15 //18 //25 //20 //35 //45 //55 //50 //40 //30 //17 tree.postorderTraversal((node)=&gt;{ console.log(node.node); }); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–äºŒå‰æ ‘çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //Node {node: 17, left: Node, right: Node} console.log(tree.valueOf()); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­åˆ é™¤æŒ‡å®šçš„å­å¶èŠ‚ç‚¹ //åœ¨è¿™é‡Œæ‰“å°: //true console.log(tree.remove(50)); tree.remove(40); tree.remove(15); //è¿™é‡Œåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­èŽ·å–äºŒå‰æ ‘çš„å…·ä½“ç»“æž„ //åœ¨è¿™é‡Œæ‰“å°: //Node {node: 17, left: Node, right: Node} console.log(tree.valueOf());]]></content>
      <categories>
        <category>Javascriptæ•°æ®ç»“æž„å’Œç®—æ³•</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>æ•°æ®ç»“æž„</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-05-07 æµ…è°ˆä½¿ç”¨jQueryå’Œreactçš„åŒºåˆ«]]></title>
    <url>%2F2018%2F05%2F07%2F%E6%B5%85%E8%B0%88%E4%BD%BF%E7%94%A8jQuery%E5%92%8Creact%E7%9A%84%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
        <tag>jQuery</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-05-07 æŸ¥æ¼è¡¥ç¼º]]></title>
    <url>%2F2018%2F05%2F07%2F%E6%9F%A5%E6%BC%8F%E8%A1%A5%E7%BC%BA%2F</url>
    <content type="text"><![CDATA[èµ‹å€¼æ“ä½œçš„è¿”å›ž æœ€è¿‘åœ¨è¯»ä¸€æœ¬ã€ŠJavaScript DOM ç¼–ç¨‹è‰ºæœ¯ã€‹çš„ä¹¦,å…¶ä¸­æœ‰ä¸€å¥è¯å¼•èµ·äº†æˆ‘çš„å¥½å¥‡,å‡å¦‚ifåˆ¤æ–­è¯­å¥ä¸­å­˜åœ¨èµ‹å€¼è¯­å¥,åˆ™èµ‹å€¼è¯­å¥çš„è¿”å›žæ€»æ˜¯trueã€‚æˆ‘å¯¹æ­¤ç»“æžœè¿›è¡Œäº†æ£€éªŒ var a; //è¿™ç§æƒ…å†µä¸‹,ifåˆ¤æ–­è¯­å¥ä¸­è¿”å›ž&quot;good&quot;,ä¸ºtrue //æ‰“å°&quot;good result&quot; if(a = &quot;good&quot;) { console.log(&quot;good result&quot;); } //è¿™ç§æƒ…å†µä¸‹,ifåˆ¤æ–­è¯­å¥ä¸­è¿”å›žfalse,ä¸ºfalse //ä»€ä¹ˆéƒ½ä¸æ‰“å° if(a = false) { console.log(&quot;good result&quot;); } //è¿™ç§æƒ…å†µä¸‹,ifåˆ¤æ–­è¯­å¥ä¸­è¿”å›žundefined,ä¸ºfalse //ä»€ä¹ˆéƒ½ä¸æ‰“å° if(a = undefined) { console.log(&quot;good result&quot;); } //è¿™ç§æƒ…å†µä¸‹,ifåˆ¤æ–­è¯­å¥ä¸­è¿”å›ž0,ä¸ºfalse //ä»€ä¹ˆéƒ½ä¸æ‰“å° if(a = 0) { console.log(&quot;good result&quot;); } //è¿™ç§æƒ…å†µä¸‹,ifåˆ¤æ–­è¯­å¥ä¸­è¿”å›žnull,ä¸ºfalse //ä»€ä¹ˆéƒ½ä¸æ‰“å° if(a = null) { console.log(&quot;good result&quot;); } //è¿™ç§æƒ…å†µä¸‹,ifåˆ¤æ–­è¯­å¥ä¸­è¿”å›ž{},ä¸ºtrue //æ‰“å°&quot;good result&quot; if(a = {}) { console.log(&quot;good result&quot;); } //è¿™ç§æƒ…å†µä¸‹,ifåˆ¤æ–­è¯­å¥ä¸­è¿”å›ž[],ä¸ºtrue //æ‰“å°&quot;good result&quot; if(a = []) { console.log(&quot;good result&quot;); } å®žè·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†,ç”±æ­¤æ£€éªŒåˆ°èµ‹å€¼æ“ä½œçš„è¿”å›žå°±æ˜¯å…¶æœ¬èº«,æœ¬èº«ç±»åž‹è½¬æ¢åŽä¸ºtrue,åˆ™ä¸ºtrue;è½¬æ¢åŽä¸ºfalse,åˆ™ä¸ºfalse,å¹¶ä¸æ€»æ˜¯è¿”å›žtrue,ä¹¦ä¸­çš„é‚£å¥è¯å®žè·µå‡ºæ˜¯ä¸å¦¥å½“çš„ã€‚ æ¨¡æ¿å­—ç¬¦ä¸²çš„æ¢è¡ŒåŠŸèƒ½ å­¦æ¨¡æ¿å­—ç¬¦ä¸²æ—¶,æœ¬æ¥åªæ˜¯ä»¥ä¸ºæ¨¡æ¿å­—ç¬¦ä¸²æ‰€å¸¦æ¥çš„åªä¸è¿‡æ˜¯ä¸€ä¸ªå¤–éƒ¨å˜é‡å¼•å…¥çš„åŠŸèƒ½,è¿™å‡ å¤©å‘çŽ°æ¢è¡Œä¸ç›´æŽ¥å†™\n,ç›´æŽ¥æ¢è¡Œç¼–å†™,å°±å¯ä»¥å®žçŽ°æ¢è¡ŒåŠŸèƒ½ let name = &quot;Gary&quot;, sentence = `Hi, ${name} is my name, I&apos;m 25 year&apos;s old~`; //è¿™é‡Œæ‰“å° //Hi, Gary is my name, //I&apos;m 25 year&apos;s old~ console.log(sentence); ES6ç±»çš„å­˜å–å‡½æ•° åœ¨ES6ä¸­å®žçŽ°äº†ç±»çš„è¡¨è±¡,è™½ç„¶è¿˜æ˜¯åŸºäºŽåŽŸåž‹é“¾æ¥å®žçŽ°çš„,ä½†æ˜¯å¤§è‡´çš„åŠŸèƒ½æ­£åœ¨å‘ç€Cã€Javaç±»çš„æ–¹å¼é€æ¸é è¿‘,æ¯”å¦‚ç±»çš„å­˜å–å‡½æ•° class Book { constructor(name = &quot;Gary&quot;) { this._name = name; } //ç±»çš„å–å€¼å‡½æ•° get getBook() { return this._name; } //ç±»çš„å­˜å‚¨å‡½æ•° set setBook(value) { this._name = `Hi, ${value}`; } } //èŽ·å–åˆ°&quot;ä¹¦&quot;è¿™ä¸ªç±»çš„å®žä¾‹ let book = new Book(&quot;Yinwk&quot;); //è°ƒç”¨å®žä¾‹çš„å–å€¼å‡½æ•° //è¿™é‡Œæ‰“å°: //Yinwk console.log(book.getBook); //è°ƒç”¨å®žä¾‹çš„å­˜å‚¨å‡½æ•° book.setBook = &quot;yinwenkai&quot;; //å†æ¬¡è°ƒç”¨å®žä¾‹çš„å–å€¼å‡½æ•° //è¿™é‡Œæ‰“å°: //yinwenkai console.log(book.getBook); å„ç±»åž‹æ¯”è¾ƒè¿ç®—ç¬¦æ—¶çš„è½¬åŒ– if(â€œpackageâ€ == true) console.log(â€œpackage == trueâ€);æ˜¯ä¼šæ‰“å°â€package == trueâ€å‘¢,è¿˜æ˜¯ä¸ä¼šæ‰“å°å‘¢,å¾ˆå¤šäººçš„ç­”æ¡ˆè‚¯å®šæ˜¯ä¼šæ‰“å°,ç†ç”±æ˜¯:å› ä¸ºâ€packageâ€è¿”å›žtrueå•Š,æ‰€ä»¥true == trueå•Šã€‚è¯·çœ‹è¿™é‡Œåˆ¤æ–­è¯­å¥ä¸­æ˜¯ä¸€ä¸ªæ¯”è¾ƒè¡¨è¾¾å¼,å¹¶ä¸æ˜¯if(â€œpackageâ€),æ˜¯éœ€è¦åœ¨æ¯”è¾ƒè¯­å¥ä¸¤è¾¹è¿›è¡Œè½¬åŒ–çš„,æ™®é€šç±»åž‹è¿›è¡ŒtoNumber,å¼•ç”¨ç±»åž‹è¿›è¡ŒvalueOfæˆ–è€…toStringä¹‹åŽçš„åŽŸå§‹å€¼æ¯”è¾ƒ if(null == undefeind) {...} //è¿”å›žtrue if(undefined == null) {...} //è¿”å›žtrue if(&quot;package&quot; == true) {...} //å°†stringå’Œbooleanç±»åž‹è¿›è¡Œnumberè½¬åŒ–, //&quot;package&quot;è½¬åŒ–ä¸ºNaN,trueè½¬åŒ–ä¸º1, //NaN == 1å—?ç­”æ¡ˆå½“ç„¶æ˜¯false,è¿”å›žfalse if(&quot;0&quot; == false){...} //å°†stringå’Œbooleanç±»åž‹è¿›è¡Œnumberè½¬åŒ–, //&quot;0&quot;è½¬åŒ–ä¸º0,falseè½¬åŒ–ä¸º0, //0 == 0å—?ç­”æ¡ˆå½“ç„¶æ˜¯true,è¿”å›žtrue if(&quot;package&quot; == 1){...} //å°†stringå’Œnumberç±»åž‹è¿›è¡Œnumberè½¬åŒ–, //å°†&quot;package&quot;è½¬åŒ–ä¸ºNaN,1è¿˜æ˜¯è½¬åŒ–ä¸º1, //NaN == 1å—?ç­”æ¡ˆå½“ç„¶æ˜¯false,è¿”å›žfalse let _obj = {name: &apos;Gary&apos;}, _objAno = {name: &apos;Gary&apos;}; if(_obj == _objAno){...} //å°†ä¸¤ä¸ªobjectç±»åž‹è¿›è¡ŒvalueOfæ–¹æ³•æˆ–è€…toStringæ–¹æ³•çš„è½¬åŒ–,å“ªä¸ªæ–¹æ³•è½¬åŒ–ä¸ºåŽŸå§‹å€¼,å°±ç”¨è½¬åŒ–ä¸ºçš„åŽŸå§‹å€¼è¿›è¡Œæ¯”è¾ƒ //{name: &apos;Gary&apos;}åœ¨valueOfæ–¹æ³•è½¬åŒ–ä¸º{name: &apos;Gary&apos;},åœ¨toStringæ–¹æ³•è½¬åŒ–ä¸º&quot;[object Object]&quot; //åŽŸå§‹å€¼å½“ç„¶æ˜¯valueOfæ–¹æ³•è½¬åŒ–çš„å€¼ //{name: &apos;Gary&apos;} == {name: &apos;Gary&apos;}å—ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯false,è¿”å›žfalse ES6æ–°å¢žArray.prototype.include ES6æ•°ç»„æ–°å¢žäº†ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦åŒ…å«æ•°ç»„å…ƒç´ çš„æ–¹æ³•,ç”¨æ¥æ£€ç´¢æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªæ•°ç»„å…ƒç´ ,åŸºæœ¬æœ‰ä¸¤ç§æ–¹å¼è¿›è¡Œæ£€ç´¢ let number_arr = [26, 18, 10, 55, 88, 100, 38, 44]; //æ•°ç»„ä¸­çš„ç¡®åŒ…å« 88 è¿™ä¸ªå…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //true console.log(number_arr.includes(88)); //ä»Žæ•°ç»„ä¸‹æ ‡ä¸º 5 çš„å…ƒç´ åŽé¢åŽ»å¯»æ‰¾ 88 è¿™ä¸ªå…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //false console.log(number_arr.includes(88, 5)); ES6ç±»åž‹æ•°ç»„ åœ¨ES6ä¸­å¼•å…¥äº†ä¸€äº›ç±»åž‹æ•°ç»„,ä»–ä»¬çš„å±žæ€§ä»¥åŠæ–¹æ³•å’Œæ™®é€šçš„æ•°ç»„å¹¶æ— äºŒè‡´,åªæ˜¯å¯¹ç±»åž‹åšäº†ä¸€äº›é™åˆ¶,æ¯”å¦‚Int8Array(8ä½äºŒè¿›åˆ¶è¡¥ç æ•´æ•°)ã€Uint8Array(8ä½æ— ç¬¦å·æ•´æ•°)ã€Int16Array(16ä½äºŒè¿›åˆ¶è¡¥ç æ•´æ•°)ã€Uint16Array(16ä½æ— ç¬¦å·æ•´æ•°)ã€Int32Array(32ä½äºŒè¿›åˆ¶è¡¥ç æ•´æ•°)ã€Uint32Array(32ä½æ— ç¬¦å·æ•´æ•°)ç­‰ç­‰ å¯¹å…·æœ‰ç€é‡ç¬¦çš„å­—ç¬¦ä¸²æ•°ç»„è¿›è¡ŒæŽ’åº å‡å¦‚éœ€è¦å¯¹å…·æœ‰ç€é‡ç¬¦å·çš„å­—ç¬¦ä¸²æ•°ç»„è¿›è¡ŒæŽ’åº,éœ€è¦ç”¨localCompare let string_arr = [&quot;MaÃ¨ve&quot;, &quot;Maeve&quot;]; string_arr.sort(function sort_arr(a, b){ return a.localCompare(b); }); //æ²¡æœ‰ç€é‡ç¬¦å·çš„æ•°ç»„å…ƒç´ ä¼šæ¯”æœ‰ç€é‡ç¬¦å·çš„æ•°ç»„å…ƒç´ å° //è¿™é‡Œæ‰“å°: //[&quot;Maeve&quot;, &quot;MaÃ¨ve&quot;] console.log(string_arr); applyã€callç¡¬ç»‘å®šå°ç»éªŒfunction Person() { this.name = &quot;Gary&quot;; this.age = 26; console.log(this.name); console.log(this.age); } let clay = { name: &quot;Clay&quot;, age: 27 }; //è¿™é‡Œå……åˆ†è¯æ˜Žäº†newç»‘å®šå®žçŽ°æž„é€ å‡½æ•°å¯¹è±¡çš„ä¼˜å…ˆçº§å¤§äºŽcallæˆ–è€…applyç¡¬ç»‘å®š //Personå‡½æ•°çš„thisæŒ‡å‘å¹¶æ²¡æœ‰æŒ‡å‘clay,è¿˜ä¿æŒç€åˆå§‹å€¼ //è€Œå¯¹è±¡clayçš„å±žæ€§nameå’Œageçš„å€¼éƒ½æ”¹å˜ä¸ºPersonå‡½æ•°thisæŒ‡å‘çš„å€¼ //åœ¨è¿™é‡Œæ‰“å°: //Gary //26 //Gary //26 Person.call(clay); console.log(clay.name); console.log(clay.age); function Person() { console.log(this.name); console.log(this.age); } let clay = { name: &quot;Clay&quot;, age: 27 }; //è¿™é‡ŒPersonå‡½æ•°çš„thisæŒ‡å‘clay //è€Œå¯¹è±¡clayçš„å±žæ€§nameå’Œageçš„å€¼è¿˜æ˜¯ä¿æŒç€åˆå§‹å€¼ //åœ¨è¿™é‡Œæ‰“å°: //Clay //27 //Clay //27 Person.call(clay); console.log(clay.name); console.log(clay.age); ä»Žä¸Šé¢çš„ä¾‹å­,æˆ‘ä»¬å¯ä»¥å¾—å‡ºthisçš„ç»‘å®šä¼˜å…ˆçº§: newç»‘å®š &gt; applyã€callå’Œbindç¡¬ç»‘å®š &gt; æ™®é€šå¯¹è±¡è½¯ç»‘å®š &gt; é»˜è®¤ç»‘å®š,å½“thiså¯¹è±¡ä¸Šé¢çš„å±žæ€§è¿›è¡Œå®šä¹‰å£°æ˜Ž,å†ä½¿ç”¨applyã€callæˆ–è€…bindç¡¬ç»‘å®šæ—¶,newç»‘å®šthiså¯¹è±¡ä¸Šé¢çš„å±žæ€§çš„ä¼˜å…ˆçº§å°±å¤§äºŽapplyã€callæˆ–è€…bindç¡¬ç»‘å®šå¯¹è±¡ä¸Šé¢çš„å±žæ€§çš„ä¼˜å…ˆçº§,è¿™æ—¶å€™æ˜¾ç¤ºçš„å°±æ˜¯thiså¯¹è±¡ä¸Šé¢çš„å±žæ€§å€¼,å½“thiså¯¹è±¡ä¸Šé¢çš„å±žæ€§æ²¡æœ‰è¿›è¡Œå®šä¹‰å£°æ˜Ž,è¿™æ—¶å€™applyã€callæˆ–è€…bindç¡¬ç»‘å®šå¯¹è±¡ä¸Šé¢çš„å±žæ€§çš„ä¼˜å…ˆçº§å°±æ˜¯æœ€å¤§çš„,è¿™æ—¶å€™æ˜¾ç¤ºçš„å°±æ˜¯ç¡¬ç»‘å®šå¯¹è±¡ä¸Šé¢çš„å±žæ€§çš„å±žæ€§å€¼]]></content>
      <categories>
        <category>Html or Css Or Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>Html</tag>
        <tag>Css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-05-06 å°è£…çš„ä¸€äº›å°å·¥å…·]]></title>
    <url>%2F2018%2F05%2F06%2F%E5%B0%81%E8%A3%85%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8F%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[debounceå‡½æ•°èŠ‚æµ å‡½æ•°èŠ‚æµé€šå¸¸è¢«ç”¨äºŽè¾“å…¥ä¸‹æ‹‰æ¡†ã€æ»šåŠ¨æ‡’åŠ è½½ç­‰åœºæ™¯,ç›®çš„åªæœ‰ä¸€ä¸ª,åœ¨çŸ­æ—¶é—´å†…,é™åˆ¶å¤šæ¬¡è°ƒç”¨åŽå°æŽ¥å£,æµªè´¹å¤§é‡èµ„æº,é˜²æ­¢æŽ¥å£å“åº”æ•°æ®æ—¶é—´ä¸Šçš„è¯¯å·®é€ æˆçš„é¡µé¢æ˜¾ç¤ºæ•°æ®çš„é”™è¯¯ã€‚ //è®¾ç½®ä¸€ä¸ªtimerå˜é‡,ç”¨æ¥æ‰¿æŽ¥setTimeoutè¿”å›žçš„å»¶æ—¶å¯¹è±¡ const timer = null; //å‡½æ•°èŠ‚æµæ–¹æ³• function debounce(fuc, delay) { //æ¯ä¸€æ¬¡è¿›è¡Œè¾“å…¥æˆ–è€…æ‹‰åŠ¨æ»šåŠ¨æ¡çš„æ—¶å€™,éƒ½ä¼šå¯¹å»¶æ—¶å¯¹è±¡è¿›è¡Œåˆ¤æ–­,å‡å¦‚å­˜åœ¨å»¶æ—¶å¯¹è±¡,å°±åœæ­¢å»¶æ—¶å¯¹è±¡,å¹¶æŠŠå»¶æ—¶å¯¹è±¡ç½®ä¸ºç©º,é‡Šæ”¾å†…å­˜,ä½¿å¾—åžƒåœ¾å›žæ”¶æœºåˆ¶èƒ½æ›´å¿«çš„å¯¹å»¶æ—¶å¯¹è±¡è¿›è¡Œå›žæ”¶ if(timer) { clearTimeout(timer); timer = null; } //ç»™å»¶æ—¶å¯¹è±¡èµ‹äºˆä¸€ä¸ªå»¶æ—¶æ–¹æ³•,fucå°±æ˜¯è¯·æ±‚åŽå°æŽ¥å£çš„å‡½æ•°,delayå°±æ˜¯å»¶æ—¶æ—¶é—´ timer = setTimeout(fuc, delay); } //å‡½æ•°èŠ‚æµæ–¹æ³•,åªè¦åœ¨delayæ—¶é—´å†…,å†æ¬¡è§¦å‘æ­¤æ–¹æ³•,å»¶æ—¶å¯¹è±¡å°±ä¼šè¢«åœæ­¢ä¸”ç½®ç©º,åŽå°çš„æŽ¥å£å‡½æ•°å°±ä¸ä¼šè¢«è°ƒç”¨ã€‚ //åšåˆ°äº†åœ¨çŸ­æ—¶é—´å†…è¾“å…¥æˆ–è€…æ»šåŠ¨é™åˆ¶äº†å¤šæ¬¡è°ƒç”¨åŽå°æŽ¥å£,é˜²æ­¢äº†æŽ¥å£å“åº”æ•°æ®æ—¶é—´ä¸Šçš„è¯¯å·®é€ æˆé¡µé¢æ•°æ®æ˜¾ç¤ºçš„é”™è¯¯ã€‚ bindå‡½æ•°ç»‘å®š bindç»‘å®šæ˜¯ä¸€ç§ç¡¬ç»‘å®š,å’Œapplyå‡½æ•°ã€callå‡½æ•°ä¸€æ ·çš„ä½œç”¨,ä¸”æ›´åŠ ç®€ä¾¿,å…¶ä½œç”¨ä¹Ÿæ˜¯ä¸ºäº†æ”¹å˜å‡½æ•°æˆ–è€…â€ç±»â€å‡½æ•°thisçš„æŒ‡å‘,å¤§å¤šæ•°æµè§ˆå™¨éƒ½æ˜¯å·²ç»å®žçŽ°äº†å†…ç½®bindæ–¹æ³•,æˆ‘ä»¬ä»Šå¤©æ¥æ¨¡æ‹Ÿä¸€ä¸‹bindæ–¹æ³•çš„å®žçŽ° if(Function.prototype.bind === undefined) { Function.prototype.bind = function(context) { //é¦–å…ˆåˆ¤æ–­è°ƒç”¨bindæ–¹æ³•çš„æ˜¯å¦æ˜¯å‡½æ•°ç±»åž‹ //å‡å¦‚ä¸æ˜¯å‡½æ•°ç±»åž‹,ç›´æŽ¥æŠ›å‡ºé”™è¯¯å¼‚å¸¸ if(typeof this !== &quot;function&quot;) { throw new Error(&quot;bindå‡½æ•°å¿…é¡»åº”ç”¨åœ¨å‡½æ•°ä¸Šé¢&quot;); } //èŽ·å–argumentså‚æ•°,é™¤äº†è¦ç»‘å®šçš„å¯¹è±¡ç¬¬ä¸€ä¸ªå‚æ•°ä¹‹å¤–çš„æ‰€æœ‰çš„å‚æ•°,å¹¶ç”Ÿæˆæ•°ç»„ let args = Array.prototype.slice.call(arguments, 1), self = this, fBind; function F() {} //åœ¨é—­åŒ…ä¸­è¿›è¡Œç¡¬ç»‘å®š,å‡å¦‚é—­åŒ…ä¸ä½œä¸ºnewç»‘å®šçš„å‡½æ•°å¯¹è±¡ä½¿ç”¨,åˆ™å…¶ä¸­çš„thisæŒ‡å‘window,å‡å¦‚ä½œä¸ºnewç»‘å®šçš„å‡½æ•°å¯¹è±¡ä½¿ç”¨,åˆ™å…¶ä¸­çš„thisæŒ‡å‘é—­åŒ…å‡½æ•°å¯¹è±¡ fBind = function () { let args_fBind = Array.prototype.slice.call(arguments); return self.apply(this instanceof fBind ? this : context, args.concat(args_fBind)); } //å‡å¦‚é—­åŒ…ä½œä¸ºnewç»‘å®šçš„å‡½æ•°å¯¹è±¡ä½¿ç”¨,å°±è¦ç»§æ‰¿bindç»‘å®šå‡½æ•°å¯¹è±¡çš„æ˜¾å¼åŽŸåž‹ //å³é—­åŒ…å‡½æ•°å¯¹è±¡çš„éšå¼åŽŸåž‹æŒ‡å‘å…¶bindç»‘å®šå‡½æ•°å¯¹è±¡çš„æ˜¾å¼åŽŸåž‹ F.prototype = self.prototype; fBind.prototype = new F(); fBind.constructor = fBind; return fBind; } } window.name = &quot;Gary&quot;; function Person(age) { console.log(this.name); this.age = age; console.log(this.age); } //æ­¤æ—¶thisé»˜è®¤ç»‘å®šåœ¨windowä¸Šé¢ //åœ¨è¿™é‡Œæ‰“å°: //Gary //24 Person(24); let clay = { name: &quot;Clay&quot; }; //æ­¤æ—¶è¿›è¡Œç¡¬ç»‘å®š,thisæŒ‡å‘clayå¯¹è±¡ //è€Œé—­åŒ…å‡½æ•°å¯¹è±¡ä¸­çš„thisåˆ™æŒ‡å‘window //åœ¨è¿™é‡Œæ‰“å°: //Clay //25 let me = Person.bind(clay); me(25); Person.prototype.introduce = function () { console.log(`name: ${this.name}, age: ${this.age}`); }; //æ­¤æ—¶è¿›è¡Œç¡¬ç»‘å®š,thisæœ¬æŒ‡å‘clayå¯¹è±¡ //ä½†æ˜¯é—­åŒ…å‡½æ•°å¯¹è±¡å´è¿›è¡Œäº†newç»‘å®šæž„é€ å‡½æ•°æ“ä½œ,ä½¿å¾—thisæŒ‡å‘é—­åŒ…å‡½æ•°æœ¬èº« //é—­åŒ…å‡½æ•°æœ¬èº«å¹¶ä¸å­˜åœ¨nameå¯¹è±¡,æ‰€ä»¥æ‰“å°this.nameä¸ºundefined,æ— å®šä¹‰çš„ //åœ¨è¿™é‡Œæ‰“å°: //undefined //26 //undefined //26 //name: undefined, age: 26 let me_bind = Person.bind(clay); let Clay = new me_bind(26); console.log(Clay.name); console.log(Clay.age); Clay.introduce(); newç»‘å®šå®žçŽ°æž„é€ å‡½æ•°å¯¹è±¡ Javascriptä¸­å­˜åœ¨ä¸€ç§ç‰¹å®šçš„è®¾è®¡æ¨¡å¼:åŽŸåž‹è®¾è®¡æ¨¡å¼,æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å…·æœ‰ä¸€ä¸ªéšå¼åŽŸåž‹,æ¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡éƒ½å…·æœ‰ä¸€ä¸ªæ˜¾å¼åŽŸåž‹,é€šè¿‡newç»‘å®šå®žçŽ°æž„é€ å‡½æ•°å¯¹è±¡è¿”å›žçš„å¼•ç”¨å¯¹è±¡è¿›è¡Œä¸²è”,ä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªå¼•ç”¨å¯¹è±¡çš„éšå¼åŽŸåž‹æŒ‡å‘å…¶æž„é€ å‡½æ•°çš„æ˜¾å¼åŽŸåž‹,æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªç©ºå¯¹è±¡å¤åˆ¶å‡ºæ¥çš„,ä¹Ÿå°±æ˜¯Object.prototype,çŽ°åœ¨æˆ‘ä»¬æ¨¡æ‹Ÿæ¨¡æ‹Ÿä¸€ä¸‹newç»‘å®šå®žçŽ°æž„é€ å‡½æ•°å¯¹è±¡ function ObjectNew() { let obj_prototype = {}, Constructor = Array.prototype.slice.call(arguments, 0, 1)[0]; obj_prototype.__proto__ = Constructor.prototype; let res = Constructor.apply(obj_prototype, Array.prototype.slice.call(arguments, 1)); return typeof res === &quot;object&quot; ? res : obj_prototype; } function Person(name, age) { this.name = name; this.age = age; } Person.prototype.introduce = function () { console.log(`name: ${this.name}, age: ${this.age}`); }; //è¿™é‡Œå’Œnewç»‘å®šå®žçŽ°æž„é€ å‡½æ•°å¯¹è±¡çš„æ•ˆæžœä¸€æ¨¡ä¸€æ · //åœ¨è¿™é‡Œæ‰“å°: //Gary //26 //name: Gary, age: 26 let gary = ObjectNew(Person, &apos;Gary&apos;, 26); console.log(gary.name); console.log(gary.age); gary.introduce(); getElementsByClassNameå°è£… getElementsByClassNameæ˜¯HTML5 DOMå¼•å…¥çš„ä¸€ä¸ªèŽ·å–classæ ·å¼èŠ‚ç‚¹çš„æ–¹æ³•,æœ‰ä¸€äº›ä¸æ”¯æŒHTML5 DOMçš„æµè§ˆå™¨å¯èƒ½ä¸å­˜åœ¨è¿™ä¸ªæ–¹æ³•,æ‰€ä»¥éœ€è¦å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œå°è£… //html code &lt;!Doctype html&gt; &lt;html lang=&quot;zh-cn&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;title&gt;getElemetnsByClassNameå°è£…&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;home&quot;&gt; &lt;p class=&quot;number&quot;&gt;first&lt;/p&gt; &lt;p class=&quot;number second&quot;&gt;second&lt;/p&gt; &lt;p class=&quot;number&quot;&gt;third&lt;/p&gt; &lt;/div&gt; &lt;/body&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;boxesByClassName.js&quot;&gt;&lt;/script&gt; &lt;/html&gt; //boxesByClassName.js function getElementsByClassName(node, className) { //åˆ¤æ–­DOMæ˜¯å¦æœ‰getElementsByClassNameæ–¹æ³•,å‡å¦‚æœ‰,å°±è¿”å›žnodeèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰classNameå­èŠ‚ç‚¹ if(node.getElementsByClassName) { return node.getElementsByClassName(className); } else { //å‡å¦‚æ²¡æœ‰,å°±å…ˆåŽ»èŽ·å–nodeèŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹å…ƒç´ ,ç„¶åŽæ ¹æ®å­èŠ‚ç‚¹å…ƒç´ çš„classNameå±žæ€§è¿›è¡ŒåŒ¹é…å¤–éƒ¨ä¼ å…¥çš„className,å‡å¦‚åŒ…å«æ­¤className,å°±ä¼ å…¥è¿”å›žçš„æ•°ç»„ä¸­,æœ€åŽè¿”å›žæ•°ç»„ let _get_className_arr = [], _tag_arr = node.getElementsByTagName(&quot;*&quot;), _tag_arr_length = _tag_arr.length; for(let i = 0; i &lt; _tag_arr_length; i++) { if(_tag_arr[i].className.includes(className)){ _get_className_arr[_get_className_arr.length] = _tag_arr[i]; } } return _get_className_arr; } } addEventåŠ è½½å®Œæˆäº‹ä»¶å°è£… å¯¹äºŽwindow.onloadäº‹ä»¶,å†ç†Ÿæ‚‰ä¸è¿‡äº†,ç”¨äºŽåœ¨é¡µé¢DOMå…¨éƒ¨åŠ è½½å®Œæ¯•ä¹‹åŽæ‰§è¡ŒJavascript,é˜²æ­¢åœ¨é¡µé¢DOMæ¸²æŸ“è¿‡ç¨‹ä¸­å¯¹DOMè¿›è¡Œæ“ä½œ,ä½¿å¾—é¡µé¢å¡é¡¿,é™ä½Žç”¨æˆ·ä½“éªŒã€‚window.onloadçš„æŒ‚è½½ä¸€ä¸ªæˆ–è€…å¤šä¸ªçš„æ–¹å¼äºŽå®žé™…æƒ…å†µè€Œå®š,æ‰€ä»¥éœ€è¦å¯¹window.onlaodåŠ è½½å®Œæˆäº‹ä»¶è¿›è¡Œå°è£… function addEvent(eventLoad) { //å°†window.onloadäº‹ä»¶å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ let load = window.onload; //åˆ¤æ–­window.onloadåŠ è½½å®Œæˆäº‹ä»¶ä¸Šé¢,æ˜¯å¦æŒ‚è½½äº†äº‹ä»¶å‡½æ•° //å‡å¦‚æŒ‚è½½äº†äº‹ä»¶å‡½æ•°,å°±å°†æ–°çš„äº‹ä»¶å‡½æ•°æ·»åŠ åˆ°window.onloadåŠ è½½å®Œæˆäº‹ä»¶é˜Ÿåˆ—ä¸­ //å‡å¦‚æ²¡æœ‰æŒ‚è½½äº‹ä»¶å‡½æ•°,å°±ç›´æŽ¥å°†æ–°çš„äº‹ä»¶å‡½æ•°æŒ‚è½½ä¸ŠåŽ» if (typeof load !== &quot;function&quot;) { window.onload = eventLoad; } else { window.onload = function() { load(); eventLoad(); } } } insertAfteræ’å…¥åˆ°æŸä¸ªå…ƒç´ èŠ‚ç‚¹ä¹‹åŽå°è£… parentNode.insertBefore(newElement, targetElement),insertBeforeæ–¹æ³•æ˜¯åœ¨æŸä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°çš„å…ƒç´ èŠ‚ç‚¹,è€ŒDOM-Coreå¹¶æ²¡æœ‰æä¾›insertAfteræ–¹æ³•,æ—¨åœ¨åœ¨æŸä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ä¹‹åŽæ’å…¥æ–°çš„å…ƒç´ èŠ‚ç‚¹,äºŽæ˜¯è¿›è¡ŒinsertAfterå°è£… function insertAfter(newElement, targetElement) { //èŽ·å–ç›®æ ‡èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ let parent = targetElement.parentNode; //åˆ¤æ–­çˆ¶èŠ‚ç‚¹çš„æœ€åŽä¸€ä¸ªå­èŠ‚ç‚¹æ˜¯å¦æ˜¯ç›®æ ‡èŠ‚ç‚¹,å‡å¦‚æ˜¯,å°±ç›´æŽ¥å°†æ–°çš„å…ƒç´ èŠ‚ç‚¹,æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹ä¸‹ //å‡å¦‚ä¸æ˜¯,å°±å°†æ–°çš„å…ƒç´ èŠ‚ç‚¹æ’å…¥åˆ°ç›®æ ‡èŠ‚ç‚¹å…„å¼ŸèŠ‚ç‚¹ä¹‹å‰ if(parent.lastChild == targetElement) { parent.appendChild(newElement); } else { parent.insertBefore(newElement, targetElement.nextSibling); } } isEmptyåˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºçš„å°è£… Javascriptçš„å¯¹è±¡åˆ¤æ–­æ˜¯å¦ä¸ºç©º,å¹¶æ²¡æœ‰åŽŸç”Ÿçš„æ–¹æ³•,æ‰€ä»¥éœ€è¦å°è£…ä¸€ä¸‹,æˆä¸ºè‡ªå·±çš„åº“ function isEmpty(obj) { //åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºçš„æ ‡è¯†ç¬¦,é»˜è®¤ä¸ºtrue,åˆ¤æ–­å¯¹è±¡ä¸ºç©º let flag = true; //ä½¿ç”¨ES6éåŽ†å¯¹è±¡,å‡å¦‚å¯¹è±¡ä¸­æœ‰éåŽ†çš„å¯¹è±¡å±žæ€§,å°±è¯´æ˜Žå¯¹è±¡ä¸ä¸ºç©º,è®¾ç½®flagä¸ºfalse,åˆ¤æ–­å¯¹è±¡ä¸ä¸ºç©º for(let [key, value] of Object.entries(obj)) { if(obj.hasOwnProperty(key)) { flag = false; break; } } return flag; } getNextElementSiblingèŽ·å–å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ èŠ‚ç‚¹ node.nextSiblingæ˜¯èŽ·å–æŸä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹,ä½†æ˜¯èŠ‚ç‚¹ç±»åž‹å¯èƒ½æ˜¯å…ƒç´ ã€å±žæ€§ä»¥åŠæ–‡æœ¬,æ˜¯ä¸ç¡®å®šçš„,è€Œé€šå¸¸,æˆ‘ä»¬å¸Œæœ›èŽ·å–ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹çš„æ—¶å€™ä¸ºå…ƒç´ èŠ‚ç‚¹,æ‰€ä»¥éœ€è¦å¯¹èŽ·å–å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ èŠ‚ç‚¹è¿›è¡Œå°è£… function getNextElementSibling(node) { //åˆ¤æ–­å…ƒç´ èŠ‚ç‚¹æ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹,å¦‚æžœæ²¡æœ‰è¿”å›žfalse if(!node.nextSibling) return false; //èŽ·å–å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ let nextSibling = node.nextSibling; //å‡å¦‚å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹çš„èŠ‚ç‚¹ç±»åž‹ä¸º1,ä¹Ÿå°±æ˜¯å…ƒç´ èŠ‚ç‚¹,å°±è¿”å›žå…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ if(nextSibling.nodeType === 1) { return nextSibling; } //å‡å¦‚å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹çš„èŠ‚ç‚¹ç±»åž‹ä¸ºé™¤äº†1ä»¥å¤–çš„å…¶ä»–æ•°å­—,å°±å†æ¬¡é€’å½’å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹,ç›´åˆ°æ‰¾åˆ°ä¸‹ä¸€ä¸ªå…„å¼Ÿå…ƒç´ èŠ‚ç‚¹ä½ç½® return getNextElementSibling(nextSibling); } moveElementåŠ¨æ€çš„å…ƒç´ èŠ‚ç‚¹ é€šè¿‡åŽŸç”Ÿçš„Javascriptæ¥ç”ŸæˆåŠ¨ç”»,æ˜¯è§£å†³CSS3ä¸å…¼å®¹ä½Žç‰ˆæœ¬æµè§ˆå™¨çš„æœ€å¥½çš„å¹³ç¨³é€€åŒ–æ–¹æ¡ˆ,åˆ©ç”¨setTimeoutç”Ÿæˆçš„é€šç”¨åŠ¨ç”»æ•ˆæžœçš„å‡½æ•°æ–¹æ³•åœ¨æ­¤ //è®¾ç½®ä¸€ä¸ªæ‰¿æŽ¥æ—¶é—´å¯¹è±¡çš„å˜é‡ let timer = null; //å‡½æ•°ä¼ é€’å››ä¸ªå‚æ•°,è¦äº§ç”Ÿç§»åŠ¨çš„å…ƒç´ èŠ‚ç‚¹,å°†è¦ç§»åŠ¨åˆ°çš„xè½´ä½ç½®,å°†è¦ç§»åŠ¨åˆ°çš„yè½´ä½ç½®,ä»¥åŠç§»åŠ¨å…ƒç´ èŠ‚ç‚¹çš„æ—¶é—´(å•ä½: æ¯«ç§’) function moveElement(node, x, y, speed) { //é¦–å…ˆæ ¡éªŒæ˜¯å¦å­˜åœ¨ç§»åŠ¨å…ƒç´ çš„èŠ‚ç‚¹,å‡å¦‚ä¸å­˜åœ¨,ç›´æŽ¥è¿”å›žfalse,é€€å‡ºå‡½æ•° if(!document.getElementById(node)) return false; let elem = document.getElementById(node); //ç„¶åŽåˆ¤æ–­æ˜¯å¦æœ‰æ—¶é—´å¯¹è±¡,å‡å¦‚æœ‰çš„è¯,ç›´æŽ¥æ¸…ç†æŽ‰,å¹¶æŠŠæ—¶é—´å¯¹è±¡ç½®ä¸ºç©º,ä»¥ä¾¿æµè§ˆå™¨åžƒåœ¾å›žæ”¶æœºåˆ¶æ›´å¿«çš„å›žæ”¶å†…å­˜ä¸­çš„ä¸éœ€è¦çš„æ•°æ® if(timer) { clearTimeout(timer); timer = null; } //åˆ¤æ–­ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„topå’Œleftå±žæ€§æ˜¯å¦å­˜åœ¨,å¦‚æžœä¸å­˜åœ¨,åˆå§‹åŒ–topå’Œleftçš„å±žæ€§ä¸º0px if(!elem.style.top) { elem.style.top = &quot;0px&quot;; } if(!elem.style.left) { elem.style.left = &quot;0px&quot;; } //èŽ·å–ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„topå’Œleftå±žæ€§å€¼,å¹¶è½¬åŒ–ä¸ºç»å¯¹å€¼çš„æ•°å€¼ç±»åž‹ let xpo = Math.abs(parseInt(elem.style.left)), ypo = Math.abs(parseInt(elem.style.top)); //å‡å¦‚ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„leftçš„ç»å¯¹å€¼ä¸Žè¦ç§»åŠ¨åˆ°çš„xè½´ä½ç½®ç›¸ç­‰,ä¸”ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„topçš„ç»å¯¹å€¼ä¸Žè¦ç§»åŠ¨åˆ°çš„yè½´ä½ç½®ç›¸ç­‰,åˆ™è¿”å›žtrue,é€€å‡ºé€’å½’å‡½æ•° if(xpo === x &amp;&amp; ypo === y) { return true } let dist; //å‡å¦‚ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„leftçš„ç»å¯¹å€¼å°äºŽè¦ç§»åŠ¨åˆ°çš„xè½´ä½ç½®,å°±å°†ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„leftçš„ç»å¯¹å€¼èµ‹å€¼ä¸ºå®ƒä¿©çš„å·®çš„ååˆ†ä¹‹ä¸€çš„å‘ä¸Šå–æ•´æ•°å€¼,è¿™æ ·çš„ç›®çš„æ˜¯ä¸ºäº†å®žçŽ°è¶ŠæŽ¥è¿‘ç›®æ ‡ä½ç½®é€Ÿåº¦è¶Šæ…¢çš„åŠ¨æ€æ•ˆæžœ if(xpo &lt; x) { dist = Math.ceil((x - xpo) / 10); xpo += dist; } //å‡å¦‚ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„leftçš„ç»å¯¹å€¼å¤§äºŽè¦ç§»åŠ¨åˆ°çš„xè½´ä½ç½®... if(xpo &gt; x) { dist = Math.ceil((xpo - x) / 10); xpo -= dist; } //å‡å¦‚ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„topçš„ç»å¯¹å€¼å°äºŽè¦ç§»åŠ¨åˆ°çš„yè½´ä½ç½®,å°±å°†ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„topçš„ç»å¯¹å€¼èµ‹å€¼ä¸ºå®ƒä¿©çš„å·®çš„ååˆ†ä¹‹ä¸€çš„å‘ä¸Šå–æ•´æ•°å€¼,è¿™æ ·çš„ç›®çš„æ˜¯ä¸ºäº†å®žçŽ°è¶ŠæŽ¥è¿‘ç›®æ ‡ä½ç½®é€Ÿåº¦è¶Šæ…¢çš„åŠ¨æ€æ•ˆæžœ if(ypo &lt; y) { dist = Math.ceil((y - ypo) / 10); ypo += dist; } //å‡å¦‚ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„topçš„ç»å¯¹å€¼å¤§äºŽè¦ç§»åŠ¨åˆ°çš„yè½´ä½ç½®... if(ypo &gt; y) { dist = Math.ceil((ypo - y) / 10); ypo -= dist; } //å°†ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼çš„topå’Œleftçš„ç»å¯¹å€¼å–å,èµ‹å€¼é‡æ–°èµ‹å€¼ç»™ç§»åŠ¨å…ƒç´ èŠ‚ç‚¹æ ·å¼ elem.style.left = `${-xpo}px`; elem.style.top = `${-ypo}px`; //æœªåˆ°ç›®æ ‡ä½ç½®,è®¾ç½®æ—¶é—´å¤„ç†å‡½æ•°ç»§ç»­é€’å½’åŠ¨æ€çš„å…ƒç´ èŠ‚ç‚¹å‡½æ•°,å¹¶æŠŠæ—¶é—´å¯¹è±¡èµ‹å€¼ç»™timerå˜é‡ timer = setTimeout(function timer() { moveElement(node, x, y, speed); }, speed); } getGreyGeneralæ ¹æ®å›¾ç‰‡åˆ©ç”¨canvasåˆ¶ä½œç°åº¦å›¾ åˆ©ç”¨canvasç”»å¸ƒå¯ä»¥åˆ¶ä½œå„ç§å„æ ·çš„å›¾ç‰‡ä»¥åŠåŠ¨ç”»æ•ˆæžœ,åŒ…æ‹¬äºŒç»´ã€ä¸‰ç»´ç­‰å›¾ç‰‡å’ŒåŠ¨ç”»,ç°åº¦å›¾å°±æ˜¯äºŒç»´å›¾ç‰‡ä¸­ä¸€ä¸ªæ¯”è¾ƒéš¾å¤„ç†çš„ä¾‹å­,ç”±æ­¤å¯¹å…¶è¿›è¡Œå°è£… function getGreyGeneral(img) { //å‡å¦‚Modernizræ£€æµ‹å…¼å®¹çš„å…¨å±€å¯¹è±¡ä¸­æŸ¥æ‰¾ä¸åˆ°canvaså±žæ€§,å°±è¿”å›žfalse,é€€å‡ºå‡½æ•° if(!Modernizr.canvas) return false; //å‡å¦‚documentå¯¹è±¡ä¸­ä¸å­˜åœ¨createElementæ–¹æ³•,ä¹Ÿè¿”å›žfalse,é€€å‡ºå‡½æ•° if(!document.createElement) return false; //åˆ›å»ºä¸€ä¸ªcanvaså…ƒç´ èŠ‚ç‚¹å¯¹è±¡ let canvas = document.createElement(&quot;canvas&quot;); //è®¾ç½®canvaså…ƒç´ èŠ‚ç‚¹å¯¹è±¡çš„å®½å’Œé«˜ä¸ºå›¾ç‰‡çš„å®½å’Œé«˜ canvas.width = img.width; canvas.height = img.height; //èŽ·å–canvasäºŒç»´ç”»å¸ƒç»˜å›¾çŽ¯å¢ƒ let ctx = canvas.getContext(&quot;2d&quot;); //åœ¨äºŒç»´ç”»å¸ƒç»˜å›¾çŽ¯å¢ƒä¸Šé¢,æ ¹æ®å›¾ç‰‡DOMå¯¹è±¡è¿›è¡Œç»˜åˆ¶,ä»Žå›¾ç‰‡DOMå¯¹è±¡åæ ‡çš„(0, 0)ä½ç½®å¼€å§‹ç»˜åˆ¶ ctx.drawImage(img, 0, 0); //èŽ·å–åˆ°äºŒç»´ç»˜å›¾çŽ¯å¢ƒçš„å›¾ç‰‡æ•°æ®,ä»Žåæ ‡(0, 0)ä½ç½®å¼€å§‹,åˆ°å›¾ç‰‡çš„(img.width, img.height)å®½åº¦å’Œé«˜åº¦ä½ç½®æˆªæ­¢ let c = ctx.getImageData(0, 0, img.width, img.height); //å¯¹å›¾ç‰‡æ•°æ®è¿›è¡Œç°åº¦å¤„ç†,èŽ·å–åˆ°æ¯ä¸ªåƒç´ çš„rgbå€¼,æ¯å››ä¸ªåƒç´ (æœ€åŽä¸€ä¸ªåƒç´ æ°¸è¿œæ˜¯255)æ•°æ®ä¸€ç»„,æ±‚rgbçš„å¹³å‡å€¼,å¹¶é‡æ–°èµ‹å€¼ç»™rgb for(let i = 0;i &lt; c.height;i ++) { for(let j = 0;j &lt; c.width;j ++) { let x = i * 4 * c.height + j * 4, data = c.data, r = data[x], g = data[x + 1], b = data[x + 2]; data[x] = data[x + 1] = data[x + 2] = (r + g + b) / 3; } } //å°†ç°åº¦å¤„ç†å¥½çš„äºŒç»´ç»˜å›¾çŽ¯å¢ƒå›¾ç‰‡æ•°æ®,é‡æ–°èµ‹äºˆåˆ°åŽŸæ¥çš„äºŒç»´ç»˜å›¾çŽ¯å¢ƒä¸Šé¢,ä¸”è®¾ç½®äºŒç»´ç»˜å›¾çŽ¯å¢ƒçš„åç§»ä½ç½®(0, 0),ä»¥åŠç»˜å›¾å¤„ç†æ¸²æŸ“çš„åç§»ä½ç½®(0, 0),æœ€åŽè®¾ç½®äºŒç»´ç»˜å›¾çŽ¯å¢ƒå›¾ç‰‡æ•°æ®çš„å®½åº¦å’Œé«˜åº¦ ctx.putImageData(c, 0, 0, 0, 0, img.width, img.height); //è¿”å›žcanvasç”Ÿæˆçš„å›¾ç‰‡æ•°æ®URL return canvas.toDataURL(); } setVideoControlé…ç½®videoè§†é¢‘æ’­æ”¾å™¨çš„é»˜è®¤æ’­æ”¾å’Œæš‚åœæŒ‰é”® HTML5ä¸­æ–°åŠ äº†videoå’Œaudioæ ‡ç­¾,ä»¥å‰éƒ½æ˜¯ä½¿ç”¨objectå’Œembedæ ‡ç­¾æ¥æ’å…¥è§†é¢‘å’ŒéŸ³é¢‘æ’ä»¶,æœ‰å¥½å¤šç¹ççš„é…ç½®,çŽ°åœ¨æœ‰äº†videoå’Œaudioæ ‡ç­¾ä½¿å¾—æˆ‘ä»¬åœ¨ç¼–å†™è§†é¢‘å’ŒéŸ³é¢‘ä»£ç æ—¶,æ–¹ä¾¿å¿«æ·äº†å¾ˆå¤š,ä¸‹é¢æ˜¯å¯¹videoæ’­æ”¾å’Œæš‚åœé”®é‡ç½®çš„å°è£… function setVideoControl(video) { //é¦–å…ˆå…ˆå°†videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„controlså±žæ€§åˆ æŽ‰,è¿™æ ·controlsä¸€ç³»åˆ—é»˜è®¤çš„æ’­æ”¾ã€æš‚åœé”®ä»¥åŠæ»‘åŠ¨æ¡ç­‰é…ç½®å°±è¢«å‰”é™¤æŽ‰äº† video.removeAttribute(&quot;controls&quot;); //è®¾ç½®videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„å®½åº¦å’Œé«˜åº¦,åˆ†åˆ«ä¸ºè§†é¢‘çš„å®žé™…å®½åº¦å’Œé«˜åº¦ video.width = video.videoWidth; video.height = video.videoHeight; //è®¾ç½®videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„å®½åº¦å’Œé«˜åº¦,åˆ†åˆ«ä¹Ÿä¸ºè§†é¢‘çš„å®žé™…å®½åº¦å’Œé«˜åº¦ video.parentNode.width = video.videoWidth; video.parentNode.height = video.videoHeight; //åˆ›å»ºä¸€ä¸ªæ‰¿æŽ¥æ’­æ”¾/æš‚åœæŒ‰é’®çš„divå®¹å™¨,å†åˆ›å»ºä¸€ä¸ªæ’­æ”¾/æš‚åœæŒ‰é’® let play = document.createElement(&quot;div&quot;), button = document.createElement(&quot;button&quot;); //è®¾ç½®divå®¹å™¨çš„titleæ ‡é¢˜å±žæ€§é»˜è®¤ä¸º&quot;Play&quot; play.setAttribute(&quot;title&quot;, &quot;Play&quot;); //è®¾ç½®æ’­æ”¾/æš‚åœæŒ‰é’®é»˜è®¤çš„æ–‡æœ¬èŠ‚ç‚¹ä¸º&amp;#x25BA;(æ’­æ”¾æŒ‰é’®) button.innerHTML = &quot;&amp;#x25BA;&quot;; //å°†æ’­æ”¾/æš‚åœæŒ‰é’®æ”¾å…¥åˆ°divå®¹å™¨ä¸­ play.appendChild(button); //å¹¶å°†æ‰¿æŽ¥æ’­æ”¾/æš‚åœæŒ‰é’®çš„divå®¹å™¨æ’å…¥åˆ°videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹ä¹‹å‰ video.parentNode.insertBefore(play, video); //è®¾ç½®æ‰¿æŽ¥æ’­æ”¾/æš‚åœæŒ‰é’®çš„divå®¹å™¨ç‚¹å‡»äº‹ä»¶: //å‡å¦‚videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„æš‚åœå±žæ€§ä¸ºtrue,åˆ™æ‰§è¡Œvideoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„playæ’­æ”¾æ–¹æ³• //å¦åˆ™æ‰§è¡Œvedioè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„pauseæš‚åœæ–¹æ³• play.onclick = function (e){ if(video.paused) { video.play(); } else { video.pause(); } }; //è®¾ç½®videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„playæ’­æ”¾æ–¹æ³•,å°†æ‰¿è½½æ’­æ”¾/æš‚åœæŒ‰é’®çš„divå®¹å™¨titleæ ‡é¢˜å±žæ€§è®¾ç½®ä¸ºPause,å¹¶è®¾ç½®æ’­æ”¾/æš‚åœæŒ‰é’®çš„æ–‡æœ¬èŠ‚ç‚¹è®¾ç½®ä¸º&amp;#x2590;&amp;#x2590;(æš‚åœæŒ‰é’®) video.addEventListener(&quot;play&quot;, function (e) { button.innerHTML = &quot;&amp;#x2590;&amp;#x2590;&quot;; play.setAttribute(&quot;title&quot;, &quot;Pause&quot;); }); //è®¾ç½®videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„pauseæš‚åœæ–¹æ³•,å°†æ‰¿è½½æ’­æ”¾/æš‚åœæŒ‰é’®çš„divå®¹å™¨titleæ ‡é¢˜å±žæ€§è®¾ç½®ä¸ºPlay,å¹¶è®¾ç½®æ’­æ”¾/æš‚åœæŒ‰é’®çš„æ–‡æœ¬èŠ‚ç‚¹è®¾ç½®ä¸º&amp;#x25BA;;(æ’­æ”¾æŒ‰é’®) video.addEventListener(&quot;pause&quot;, function (e) { button.innerHTML = &quot;&amp;#x25BA&quot;; play.setAttribute(&quot;title&quot;, &quot;Play&quot;); }); //è®¾ç½®videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„endedè§†é¢‘ç»“æŸæ–¹æ³•,å°†videoè§†é¢‘å…ƒç´ èŠ‚ç‚¹çš„currentTimeå±žæ€§(å½“å‰æ»‘åŠ¨æ¡è¿›åº¦)è®¾ç½®ä¸º:èµ·å§‹ä½ç½®,å¹¶æ‰§è¡Œvideoè§†é¢‘å…ƒç´ èŠ‚ç‚¹pauseæš‚åœæ–¹æ³• video.addEventListener(&quot;ended&quot;, function (e) { video.currentTime = 0; video.pause(); }); } Symbol.iteratorè¿­ä»£å¯¹è±¡ è¯´èµ·Symbol.iterator,å°±ä¼šæƒ³åˆ°ES6æ–°å¼•è¿›çš„è¿­ä»£å™¨,åƒArray.keys(),Array.values(),Array.entries(),éƒ½æ˜¯Symbol.iteratorè¿­ä»£å¯¹è±¡å®žçŽ°çš„,æ¯ä¸€æ¬¡è¿­ä»£(.next())éƒ½ä¼šè¿”å›žä¸€ä¸ªå¯¹è±¡: {value: è¿­ä»£çš„å€¼, done: è¿­ä»£çš„çŠ¶æ€},å½“è¿­ä»£ç»“æŸ,å°±ä¼šè¿”å›ž{value: undefined, done: true},ä½†æ˜¯è¿™ä¸ªè¿­ä»£å¯¹è±¡åªå­˜åœ¨äºŽæ•°ç»„ã€Objectå¯¹è±¡ä»¥åŠGeneratorç­‰è¿­ä»£å™¨é‡Œ,è¦æƒ³è¿­ä»£å¯¹è±¡,éœ€è¦æ‰‹åŠ¨åŽ»æ·»åŠ å®ƒçš„Symbol.iteratoræ–¹æ³• let yinwk = { name: &quot;Gary&quot;, age: 25, hobby: [&quot;basketball&quot;, &quot;tennis&quot;], [Symbol.iterator]() { //é¦–å…ˆå°†thiså¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ let that = this, //ç„¶åŽèŽ·å–thiså¯¹è±¡æŒ‡å‘çš„æœ¬å¯¹è±¡çš„å±žæ€§æ•°ç»„ that_key = Object.keys(that), //æŽ¥ç€èŽ·å–æœ¬å¯¹è±¡çš„å±žæ€§æ•°ç»„çš„é•¿åº¦ len = that_key.length, //æœ€åŽå®šä¹‰ä¸€ä¸ªé€’å¢žå˜é‡,ç”¨æ¥éåŽ†æœ¬å¯¹è±¡çš„å±žæ€§å€¼ index = 0; //è¿”å›žä¸€ä¸ªå¯¹è±¡,å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªnextå‡½æ•°æ–¹æ³•,åœ¨å…¶ä¸­åˆ¤æ–­é€’å¢žå˜é‡indexæ˜¯å¦å¤§äºŽå±žæ€§æ•°ç»„çš„é•¿åº¦, //å‡å¦‚ä¸å¤§äºŽ,è¯´æ˜Žæ²¡æœ‰è¿­ä»£å®Œæˆ,åˆ™è¿”å›ž{value: å±žæ€§å€¼(that[that_key[index++]]), done: false} //å‡å¦‚å¤§äºŽ,è¯´æ˜Žè¿­ä»£å®Œæˆ,åˆ™è¿”å›ž{value: å±žæ€§å€¼(that[that_key[index++]]), done: true} return { next() { if(index &gt; len){ return { value: that[that_key[index++]], done: true } } else { return { value: that[that_key[index++]], done: false } } } } } }; //å¯¹æ·»åŠ å¥½è¿­ä»£å¯¹è±¡çš„å¯¹è±¡è¿›è¡ŒéåŽ† //è¿™é‡Œæ‰“å°: // &quot;Gary&quot; // 25 // [&quot;basketball&quot;, &quot;tennis&quot;] for(let value of yinwk) { console.log(value); } é—­åŒ…å®žçŽ°ç¼“å­˜æœºåˆ¶ æœ‰æ—¶ä¸€äº›å‡½æ•°å†…çš„é‡å¤å¾ªçŽ¯ã€åˆ¤æ–­ç”šè‡³æ˜¯æ™®é€šçš„åŒæ­¥å®šä¹‰èµ‹å€¼,å¯¹äºŽæµè§ˆå™¨æ¥è¯´æˆ–å¤§æˆ–å°éƒ½æ˜¯æŸè€—,çŽ°åœ¨æˆ‘ä»¬ä½¿ç”¨é—­åŒ…å¯¹é‡å¤çš„æ“ä½œç¼“å­˜èµ·æ¥,å‡å°‘é‡å¤çš„æ“ä½œå’ŒæŸè€—,æé«˜æµè§ˆå™¨çš„æ€§èƒ½ function cache() { //è¿›è¡Œå­˜å‚¨çš„å¯¹è±¡ let res_obj = {}; //è¿›è¡Œè¿ç®—çš„æ“ä½œå‡½æ•° function operation() { let a = 1; for(let i = 0; i &lt; arguments.length; i++) { a *= arguments[i]; } return a; } return function() { let args = Array.prototype.join.call(arguments, &quot;_&quot;); if(res_obj[args]) { return res_obj[args]; } console.log(&quot;first cache~&quot;); return res_obj[args] = operation.apply(this, arguments); } } let cache_control = cache(); //åœ¨è¿™é‡Œæ‰“å°: //first cache~ let cache_result = cache_control(3, 4, 5); //åœ¨è¿™é‡Œæ‰“å°: //60 console.log(cache_result); //åœ¨è¿™é‡Œæ‰“å°: //60 console.log(cache_control(3, 4, 5)); ä½¿ç”¨å‘½ä»¤æ¨¡å¼å®žçŽ°æ¨¡æ‹Ÿçš„å¼€å…³Tvçš„åŠŸèƒ½ å°†å¼€å…³Två¯¹è±¡å°è£…è‡³å‡½æ•°å†…éƒ¨,ä»¥æž„é€ å‡½æ•°çš„å¼•ç”¨å¯¹è±¡æˆ–è€…é—­åŒ…å‡½æ•°çš„æ–¹å¼å¯¼å‡º,è°ƒç”¨æ–°çš„å‡½æ•°æ–¹æ³•æŽ§åˆ¶æ¨¡æ‹Ÿå¼€å…³Tv,é¦–å…ˆä»¥æž„é€ å‡½æ•°çš„å¼•ç”¨å¯¹è±¡æ–¹å¼å¯¼å‡º let Tv = { open() { console.log(&quot;open the Tv&quot;); }, close() { console.log(&quot;close the Tv&quot;); } }; //ä»¥æž„é€ å‡½æ•°çš„å¼•ç”¨å¯¹è±¡æ–¹å¼å¯¼å‡º function CommandInOrder(command) { this.command = command; } //åŽŸåž‹é“¾å‡½æ•°æ–¹æ³•: æ‰“å¼€Tv CommandInOrder.prototype.openTheTv = function() { this.command.open(); }; //åŽŸåž‹é“¾å‡½æ•°æ–¹æ³•: å…³é—­Tv CommandInOrder.prototype.closeTheTv = function() { this.command.close(); }; function CommandInOrderOutput(command) { document.getElementById(&quot;open&quot;).onclick = function(e) { command.openTheTv(); //å–æ¶ˆå†’æ³¡ e.stopImmediatePropagation(); }; document.getElementById(&quot;close&quot;).onclick = function(e) { command.closeTheTv(); //å–æ¶ˆå†’æ³¡ e.stopImmediatePropagation(); } } //ç‚¹å‡»idä¸ºopençš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //open the Tv //ç‚¹å‡»idä¸ºcloseçš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //close the Tv CommandInOrderOutput(new CommandInOrder(Tv)); æŽ¥ç€æ˜¯ä»¥é—­åŒ…çš„æ–¹å¼å¯¼å‡º let Tv = { open() { console.log(&quot;open the Tv&quot;); }, close() { console.log(&quot;close the Tv&quot;); } }; //ä»¥é—­åŒ…çš„æ–¹å¼å¯¼å‡º function CommandInOrder(command) { function openTheTv() { command.open(); } function closeTheTv() { command.close(); } return { openTheTv, closeTheTv } } function CommandInOrderOutput(command) { document.getElementById(&quot;open&quot;).onclick = function(e) { command.openTheTv(); //å–æ¶ˆå†’æ³¡ e.stopImmediatePropagation(); }; document.getElementById(&quot;close&quot;).onclick = function(e) { command.closeTheTv(); //å–æ¶ˆå†’æ³¡ e.stopImmediatePropagation(); }; } //ç‚¹å‡»idä¸ºopençš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //open the Tv //ç‚¹å‡»idä¸ºcloseçš„å…ƒç´  //åœ¨è¿™é‡Œæ‰“å°: //close the Tv CommandInOrderOutput(CommandInOrder(Tv)); é«˜é˜¶å‡½æ•° å›žè°ƒé«˜é˜¶å‡½æ•°äº‹ä¾‹: xhrè¯·æ±‚å›žè°ƒé«˜é˜¶å‡½æ•° //xhrè¯·æ±‚å›žè°ƒé«˜é˜¶å‡½æ•° function xhr_request(callback) { let xhr = new XMLHttpRequest(); xhr.open(&quot;GET&quot;, &quot;../data/code.json&quot;); xhr.onreadystatechange = function () { callback.apply(xhr, arguments); }; xhr.send(null); } //åœ¨è¿™é‡Œæ‰“å°: //{code: &quot;000000&quot;} xhr_request(function (e) { if(this.readyState === 4) { if(this.status === 200) { console.log(JSON.parse(this.responseText)); } } //å–æ¶ˆå†’æ³¡ e.stopImmediatePropagation(); }); å›žè°ƒå‡½æ•°é«˜é˜¶å‡½æ•°äº‹ä¾‹: åˆ›å»ºDOMèŠ‚ç‚¹å›žè°ƒé«˜é˜¶å‡½æ•° //åˆ›å»ºDOMèŠ‚ç‚¹å›žè°ƒé«˜é˜¶å‡½æ•° function createDOMNode(callback) { for(let i = 0; i &lt; 10; i++) { let div = document.createElement(&quot;div&quot;); callback.call(div, i); document.body.appendChild(div); } } createDOMNode(function (number) { let text = document.createTextNode(number); this.appendChild(text); }); é—­åŒ…é«˜é˜¶å‡½æ•°: å•ä¾‹æ¨¡å¼ //å•ä¾‹å‡½æ•° function getSingle(func) { let res; return function() { return res || (res = func.apply(this, arguments)); } } let Single = getSingle(function () { return document.createElement(&quot;script&quot;); }); let single_one = Single(); let single_two = Single(); //åœ¨è¿™é‡Œæ‰“å°: //true console.log(single_one === single_two); é—­åŒ…é«˜é˜¶å‡½æ•°: AOPè£…é¥°è€…æ¨¡å¼ /** * åœ¨æŸä¸ªå‡½æ•°ä¹‹å‰æ‰§è¡Œ */ Function.prototype.before = function(before) { let self = this; return function() { before.apply(this, arguments); return self.apply(this, arguments); } }; /** * åœ¨æŸä¸ªå‡½æ•°ä¹‹åŽæ‰§è¡Œ */ Function.prototype.after = function(after) { let self = this; return function() { let res_func = self.apply(this, arguments); after.apply(this, arguments); return res_func; } }; function mid() { console.log(&quot;this is middle~&quot;); } //AOPè£…é¥°è€…æ¨¡å¼å®Œæˆå¹¶æ‰§è¡Œ let res = mid.before(function() { console.log(&quot;this is before~&quot;); }).after(function() { console.log(&quot;this is after~&quot;); }); //åœ¨è¿™é‡Œæ‰“å°: //this is before~ //this is middle~ //this is after~ res(); é«˜é˜¶å‡½æ•°å®žç”¨ curryåŒ–,æŸ¯é‡ŒåŒ–é«˜é˜¶å‡½æ•° /** * æŸ¯é‡ŒåŒ–é«˜é˜¶å‡½æ•° */ function Currying() { let res_arr = []; function curry_result() { let m = 0; for(let i = 0; i &lt; arguments.length; i++) { m += arguments[i]; } return m; } return function() { if(arguments.length &gt; 0) { let args = Array.prototype.slice.call(arguments, 0); res_arr = [...res_arr, ...args]; } else { return curry_result.apply(this, ...res_arr); } } } let currying_res = Currying(); currying_res(300); currying_res(255); currying_res(244); currying_res(344); currying_res(88); //åœ¨è¿™é‡Œæ‰“å°: //1231 console.log(currying_res()); uncurryåŒ–,éžæŸ¯é‡ŒåŒ–é«˜é˜¶å‡½æ•°,ç›´æŽ¥å°†åŽŸåž‹å‡½æ•°æ–¹æ³•å¤–ç”¨ /** * éžæŸ¯é‡ŒåŒ–é«˜é˜¶å‡½æ•° */ Function.prototype.uncurrying = function() { let self = this; return function() { let obj = Array.prototype.slice.call(arguments, 0, 1)[0], args = Array.prototype.slice.call(arguments, 1); return self.apply(obj, args); } }; let push = Array.prototype.push.uncurrying(); //åœ¨è¿™é‡Œæ‰“å°: //[1, 2, 3, 4] (function() { push(arguments, 4); console.log(arguments); })(1, 2, 3); let obj = { length: 3, 0: 1, 1: 2, 2: 3 }; push(obj, &quot;4&quot;); //åœ¨è¿™é‡Œæ‰“å°: //{0: 1, 1: 2, 2: 3, 3: &quot;4&quot;} console.log(obj); uncurryåŒ–æ‹“å±•,éžæŸ¯é‡ŒåŒ–é«˜é˜¶å‡½æ•° /** * éžæŸ¯é‡ŒåŒ–é«˜é˜¶å‡½æ•° */ Function.prototype.uncurrying = function() { let self = this; return function() { let obj = Array.prototype.slice.call(arguments, 0, 1)[0], args = Array.prototype.slice.call(arguments, 1); return self.apply(obj, args); } }; let method_arr = [&quot;push&quot;, &quot;shift&quot;, &quot;forEach&quot;]; for(let i = 0; i &lt; method_arr.length; i ++) { Array[method_arr[i]] = Array.prototype[method_arr[i]].uncurrying(); } let obj = { length: 3, 0: 1, 1: 2, 2: 3 }; Array.push(obj, &quot;44&quot;); //åœ¨è¿™é‡Œæ‰“å°: //{0: 1, 1: 2, 2: 3, 3: &quot;44&quot;, length: 4} console.log(obj); Array.shift(obj); //åœ¨è¿™é‡Œæ‰“å°: //{0: 2, 1: 3, 2: &quot;44&quot;, length: 3} console.log(obj); //åœ¨è¿™é‡Œæ‰“å°: //2 //3 //&quot;44&quot; Array.forEach(obj, function(item, index){ console.log(item); }); uncurryåŒ–æ‹“å±•callä¸Žapply,éžæŸ¯é‡ŒåŒ–é«˜é˜¶å‡½æ•° /** * éžæŸ¯é‡ŒåŒ–é«˜é˜¶å‡½æ•° */ Function.prototype.uncurrying = function() { let self = this; return function() { let obj = Array.prototype.slice.call(arguments, 0, 1)[0], args = Array.prototype.slice.call(arguments, 1); return self.apply(obj, args); } }; let call = Function.prototype.call.uncurrying(); let name = &quot;Gary&quot;; window.name = &quot;Clay&quot;; function introduce() { console.log(name); console.log(this.name); } //åœ¨è¿™é‡Œæ‰“å°: //&quot;Gary&quot; //&quot;Clay&quot; call(introduce, window); let apply = Function.prototype.apply.uncurrying(); function Gary_myself() { console.log(arguments); console.log(this.name); } //åœ¨è¿™é‡Œæ‰“å°: //[&quot;simon&quot;] //&quot;wenkai yin&quot; apply(Gary_myself, {name: &quot;wenkai yin&quot;}, [&quot;simon&quot;]); å‡½æ•°èŠ‚æµé«˜é˜¶å‡½æ•°,æˆ‘ä»¬åœ¨å‰é¢æ•´ç†è¿‡å‡½æ•°èŠ‚æµ,åªæ˜¯è¿™æ¬¡çš„å‡½æ•°èŠ‚æµä¸Žä¸Šæ¬¡ä¸åŒ,è¿™æ¬¡åœ¨å»¶æ—¶çš„æ—¶é—´å†…ä¸èƒ½å†æ‰§è¡Œè°ƒç”¨æ–¹æ³•çš„æ“ä½œ,åªæœ‰ç­‰åˆ°å»¶æ—¶å¤„ç†å™¨æ‰§è¡Œå®Œæ‰åœæ­¢å»¶æ—¶å¤„ç†å™¨,è€Œä¸Šæ¬¡æ— è®ºæ˜¯æ˜¯å¦æ˜¯åœ¨å»¶æ—¶çš„æ—¶é—´å†…,åªè¦å†æ¬¡æ‰§è¡Œè°ƒç”¨æ–¹æ³•çš„æ“ä½œ,å°±ç›´æŽ¥åœæ­¢å»¶æ—¶å¤„ç†å™¨ /** * å‡½æ•°èŠ‚æµ */ function throttle(func, speed) { let first_time = true, timer; return function() { let self = this, args = arguments; if(first_time) { func.apply(self, args); first_time = false; } if(timer) { return false; } timer = setTimeout(function time() { clearTimeout(timer); timer = null; func.apply(self, args); }, speed); } } //åœ¨è¿™é‡Œæ‰“å°: //Window {postMessage: Æ’, blur: Æ’, focus: Æ’, close: Æ’, frames: Window, â€¦} //Event {isTrusted: true, type: &quot;resize&quot;, target: Window, currentTarget: Window, eventPhase: 2, â€¦} //800 window.onresize = throttle(function(e) { console.log(this); console.log(e); console.log(800); }, 800); åˆ†æ—¶é«˜é˜¶å‡½æ•°,æœ‰æ—¶ä¸ºäº†é˜²æ­¢å¤§é‡çš„DOMæ“ä½œ,æ¯”å¦‚ä¸€æ¬¡æ€§åˆ›å»ºå‡ ä¸‡ä¸ªDOMèŠ‚ç‚¹,ä¸€èµ·æ·»åŠ åˆ°é¡µé¢ä¸Š,ä½¿å¾—æµè§ˆå™¨å¡é¡¿ç”šè‡³æ˜¯å¡down,åˆ†æ—¶å‡½æ•°å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„æ¯”è¾ƒä¸é”™çš„æ–¹æ³•,å°†è¿™å‡ ä¸‡ä¸ªDOMèŠ‚ç‚¹,åˆ†ä¸ºå¾ˆå¤šä»½,åœ¨ä¸€å®šçš„æ—¶é—´å†…,åªåŽ»å¤„ç†ä¸€ä»½å†…çš„èŠ‚ç‚¹æ•°æ®,æ·»åŠ åˆ°é¡µé¢ä¸Š,è¿™æ ·æ¯”è¾ƒå¤§çš„ä¼˜åŒ–äº†æµè§ˆå™¨çš„æ€§èƒ½ /** * åˆ†æ—¶å‡½æ•° */ function timeShare(share_arr, func, count) { let timer, inner_arr = share_arr; function resolve_res() { for(let i = 1; i &lt;= Math.min(count || 1, inner_arr.length); i ++) { let inner_shift = inner_arr.shift(); func.call(this, inner_shift); } } return function() { let self = this, args = arguments; timer = setInterval(function time() { if(inner_arr.length &lt;= 0) { clearInterval(timer); timer = null; } resolve_res.apply(self, args); }, 100); } } let share_arr = Array.from(Array.apply(null, {length: 1000}), function map(item, index) { return index + 1; }); timeShare(share_arr, function(i) { let div = document.createElement(&quot;div&quot;), text = document.createTextNode(i); div.appendChild(text); document.body.appendChild(div); }, 8); æƒ°æ€§åŠ è½½é«˜é˜¶å‡½æ•° /** * æ™®é€šæƒ°æ€§åŠ è½½å‡½æ•°,è°ƒç”¨æ—¶,æ¯ä¸€æ¬¡éƒ½è¦åŽ»åˆ¤æ–­å“ªç§äº‹ä»¶æ–¹å¼æµè§ˆå™¨å¯ç”¨,è¿™æ ·è™½å¯¹äºŽæ€§èƒ½æ²¡æœ‰ä»€ä¹ˆå¤§å½±å“,ä½†æ˜¯è¿˜æ˜¯å¾ˆä¸ä¼˜é›…çš„ */ function addEvent(elem, type, func) { if(window.addEventListener) { elem.addEventListener(type, function() { func.apply(this, arguments); }); } if(window.attachEvent) { elem.attachEvent(`on${type}`, function() { func.apply(this, arguments); }); } } addEvent(document.getElementById(&quot;open&quot;), &quot;click&quot;, function(e) { console.log(e.target); }); /** * è¿™æ ·çœåŽ»äº†åœ¨è°ƒç”¨æ—¶çš„åˆ¤æ–­å“ªç§äº‹ä»¶æ–¹å¼æµè§ˆå™¨å¯ç”¨,æ¢æˆäº†åœ¨æµè§ˆå™¨åŠ è½½æ—¶åˆ¤æ–­,åªåˆ¤æ–­ä¸€æ¬¡,è¿™æ ·åœ¨è°ƒç”¨æ—¶å°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨åˆ¤æ–­åŽçš„äº‹ä»¶æ–¹å¼äº†,ä½†æ˜¯å‡å¦‚é¡µé¢æ²¡æœ‰ä½¿ç”¨åˆ°äº‹ä»¶,è¿˜æ˜¯è¿›è¡Œäº†åˆ¤æ–­å“ªç§äº‹ä»¶æ–¹å¼æµè§ˆå™¨å¯ç”¨,è¿™æ ·æµªè´¹äº†æµè§ˆå™¨çš„æ€§èƒ½,è¿˜æ˜¯ä¸èƒ½è¿™æ ·åšçš„ */ let addEvent = (function (){ if(window.addEventListener) { return function(elem, type, func) { elem.addEventListener(type, function() { func.apply(this, arguments); }); } } if(window.attachEvent) { return function(elem, type, func) { elem.attachEvent(`on${type}`, function() { func.apply(this, arguments); }); } } })(); addEvent(document.getElementById(&quot;open&quot;), &quot;click&quot;, function(e) { console.log(e.target); }); /** * è¿™æ ·åªæœ‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨addEventå‡½æ•°æ–¹æ³•çš„æ—¶å€™,æ‰å›žåŽ»åˆ¤æ–­å“ªç§äº‹ä»¶æ–¹å¼æµè§ˆå™¨å¯ç”¨,åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ä¹‹åŽ,å°±ç›´æŽ¥å°†åˆ¤æ–­åŽçš„é‚£ç§äº‹ä»¶æ–¹å¼ä»¥å¦å¤–ä¸€ç§å‡½æ•°æ–¹æ³•çš„æ–¹å¼èµ‹å€¼ç»™addEventå˜é‡,ç„¶åŽå†ç»§ç»­æ‰§è¡Œè°ƒç”¨addEventå‡½æ•°æ–¹æ³•,å†ä¸€æ¬¡è°ƒç”¨æ—¶,å°±ä¸éœ€è¦åˆ¤æ–­å“ªç§æ–¹å¼æµè§ˆå™¨å¯ç”¨äº†,ç›´æŽ¥è°ƒç”¨ç¬¬ä¸€æ¬¡åˆ¤æ–­è¿‡åŽèµ‹å€¼ç»™addEventå˜é‡çš„å‡½æ•°æ–¹æ³•å³å¯,è¿™å°±æ˜¯æƒ°æ€§åŠ è½½å‡½æ•° */ let addEvent = function(elem, type, func) { let args = Array.prototype.slice.call(arguments); if(window.addEventListener) { addEvent = function(elem, type, func) { elem.addEventListener(type, function() { func.apply(this, arguments); }); } } if(window.attachEvent) { addEvent = function(elem, type, func) { elem.attachEvent(`on${type}`, function() { func.apply(this, arguments); }); } } addEvent(elem, type, func); }; addEvent(document.getElementById(&quot;open&quot;), &quot;click&quot;, function(e) { console.log(e.target); });]]></content>
      <categories>
        <category>å°è£…çš„ä¸€äº›å°å·¥å…·</category>
      </categories>
      <tags>
        <tag>å°è£…</tag>
        <tag>å°å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-30 webpackæ‰“åŒ…å¦‚ä½•é˜²æ­¢ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ä½“ç§¯è¿‡å¤§é€ æˆæ‰“åŒ…é€Ÿåº¦æ…¢çš„é—®é¢˜]]></title>
    <url>%2F2018%2F04%2F30%2Fwebpack%E6%89%93%E5%8C%85%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2%E7%AC%AC%E4%B8%89%E6%96%B9%E4%BE%9D%E8%B5%96%E5%8C%85%E4%BD%93%E7%A7%AF%E8%BF%87%E5%A4%A7%E9%80%A0%E6%88%90%E6%89%93%E5%8C%85%E9%80%9F%E5%BA%A6%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ä¸ºä½•ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ä¼šå¼•èµ·æ‰“åŒ…çš„ä½“ç§¯è¿‡å¤§ ES6çš„æ¨¡å—åŒ–æœºåˆ¶,å½“å¼•å…¥å¤–éƒ¨ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…æ—¶,æ— è®ºæ˜¯å¦å·²ç»å¼•å…¥,éƒ½ä¼šå†æ¬¡å°†å…¶å¼•å…¥è¿›æ¥,è¿™æ—¶å€™å°±ä¼šå­˜åœ¨é‡å¤å¼•å…¥å¯¼è‡´æ‰“åŒ…ä½“ç§¯è¿‡å¤§ã€æ‰“åŒ…é€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜ã€‚ å¦‚ä½•è§£å†³é‡å¤å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…,å¼•èµ·çš„æ‰“åŒ…ä½“ç§¯è¿‡å¤§ä»¥åŠæ‰“åŒ…é€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜ ä½¿ç”¨CommonsChunkPluginæå–å…¬å…±æ¨¡å—,ç†æƒ³çŠ¶æ€ä¸‹æ˜¯å°†ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…ã€ä¸šåŠ¡ä»£ç ã€ä¸šåŠ¡ä»£ç ä¸­çš„é‡å¤å¼•å…¥çš„å…¬å…±éƒ¨åˆ†å’Œwebpackçš„å¼•å¯¼ç¨‹åºä»¥åŠmanifest åŠ è½½è¿è¡Œå¤–éƒ¨ä¾èµ–åŒ…éƒ½åˆ†åˆ«æ‰“æˆä¸€ä¸ªåŒ…,å‡å°æ‰“åŒ…ä½“ç§¯,æé«˜æ‰“åŒ…çš„é€Ÿåº¦ã€‚ const webpack = require(&quot;webpack&quot;), HtmlWebpackIncludeAssetsPlugin = require(&quot;html-webpack-include-assets-plugin&quot;), HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;); const PUBLIC_DIR = &quot;/&quot;; module.exports = { entry: { //loginå…¥å£æœ‰å¼•å…¥testConfig.jsä»¥åŠreactConfig.js login: `${APP_DIR}/login.js`, //indexå…¥å£ä¹Ÿæœ‰å¼•å…¥testConfig.jsä»¥åŠreactConfig.js index: `${APP_DIR}/index.js`, //appå…¥å£æ²¡æœ‰å¼•å…¥testConfig.js,ä¹Ÿæ²¡æœ‰å¼•å…¥reactConfig.js app: `${APP_DIR}/app.js`, //mobileå…¥å£æœ‰å¼•å…¥testConfig.js,å´æ²¡æœ‰å¼•å…¥reactConfig.js mobile: `${APP_DIR}/mobule.js` }, plugins: [ //... //é¦–å…ˆæˆ‘æƒ³æŠŠå››ä¸ªå…¥å£ä¸­çš„å…¬å…±æ¨¡å—,åŒ…æ‹¬å¼•å…¥çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…éƒ½æå–å‡ºæ¥ new webpack.optimize.CommonsChunkPlugin({ name: &apos;common&apos;, filename: &apos;js/common.[hash].js&apos; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;login.html&quot;, template: `${ROOT_DIR}/login.html`, chunks: [&quot;common&quot;, &quot;login&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;index.html&quot;, template: `${ROOT_DIR}/index.html`, chunks: [&quot;common&quot;, &quot;index&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;app.html&quot;, template: `${ROOT_DIR}/app.html`, chunks: [&quot;common&quot;, &quot;app&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;mobile.html&quot;, template: `${ROOT_DIR}/mobile.html`, chunks: [&quot;common&quot;, &quot;mobile&quot;], inject: &quot;body&quot; }) //å‘çŽ°è¿™æ ·è¡Œä¸é€š,æ‰“åŒ…ä¹‹åŽ,common.[hash].jsä¸­åªæœ‰webpackå¼•å¯¼ç¨‹åºä»¥åŠmanifest åŠ è½½è¿è¡Œæ¨¡å—çš„ä»£ç ,å…¬å…±éƒ¨åˆ†å¹¶æ²¡æœ‰åŠžæ³•æå–å‡ºæ¥ã€‚ //åŽæ¥æŸ¥æ‰¾åŽŸå› ,åŽŸæ¥æ˜¯CommonsChunkPluginä¸­çš„minChunkså±žæ€§é»˜è®¤è®¾ç½®ä¸ºå…¬å…±æ¨¡å—éƒ¨åˆ†æœ€å°åœ¨å…¨éƒ¨å…¥å£å…¨éƒ¨å¼•å…¥,æ‰ä¼šè¢«æå–åˆæˆå…¬å…±ä»£ç ã€‚ //çŸ¥é“äº†åŽŸå› ,é‚£å°±ç®€å•äº†,ç›´æŽ¥è®¾ç½®minChunks: 2,ä¹Ÿå°±æ˜¯è¯´åªè¦å…¬å…±æ¨¡å—æœ€å°åœ¨ä¸¤ä¸ªå…¥å£å¼•å…¥,å°±å¯ä»¥è¢«æå–å‡ºæ¥ä½œä¸ºå…¬å…±æ¨¡å—éƒ¨åˆ†ã€‚ new webpack.optimize.CommonsChunkPlugin({ name: &apos;common&apos;, filename: &apos;js/common.[hash].js&apos;, minChunks: 2 }), ... //è¿™æ ·è®¾ç½®ä¹‹åŽå‘çŽ°æ˜¯å¯ä»¥çš„,å°†å…¬å…±çš„ç¬¬ä¸‰æ–¹çš„å¤–éƒ¨ä¾èµ–åŒ…ã€testConfig.jsã€reactConfig.jsã€webpackå¼•å¯¼ç¨‹åºä»¥åŠmanifest åŠ è½½è¿è¡Œæ¨¡å—éƒ¨åˆ†éƒ½æå–å‡ºæ¥,æ‰“åŒ…è‡³common.[hash].jsä¸­,å‡å°äº†æ‰“åŒ…çš„ä½“ç§¯,åŠ å¿«äº†æ‰“åŒ…é€Ÿåº¦ã€‚ //è¯•æƒ³å‡å¦‚æˆ‘åªæƒ³æå–testConfig.jsæ¨¡å— new webpack.optimize.CommonsChunkPlugin({ name: &apos;common&apos;, filename: &apos;js/common.[hash].js&apos;, //minChunksè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°,æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°,moduleæ˜¯æŒ‡å…¥å£æ‰€å¼•å…¥çš„æ¯ä¸€ä¸ªæ¨¡å—,countåˆ™æ˜¯æŒ‡moduleè¢«å‡ ä¸ªå…¥å£æ‰€è°ƒç”¨ //moduleæœ‰ä¸¤ä¸ªå±žæ€§: contextå’Œresource //context: æ¨¡å—æ‰€å­˜å‚¨çš„ç›®å½•ä½ç½® //resource: æ¨¡å—æ‰€æ‰§è¡Œçš„æ–‡ä»¶åç§° //è¿™é‡Œå°±æ˜¯ä½¿ç”¨resourceæ¨¡å—æ‰€æ‰§è¡Œçš„æ–‡ä»¶åç§°åŽ»åŒ¹é…testConfig,ä¸”æ¨¡å—è‡³å°‘è¢«ä¸¤ä¸ªå…¥å£æ‰€å¼•å…¥,è¿™æ ·å°±å¯ä»¥å•ç‹¬æå–testConfig.jsæ–‡ä»¶äº† minChunks: function(module, count) { return module.resource &amp;&amp; /testConfig/.test(module.resource) &amp;&amp; count &gt;= 2; } }), ... ], //å°†ç¬¬ä¸‰æ–¹å…¬å…±ä¾èµ–åŒ…ä¸ŽtestConfig.jsã€reactConfig.jsè¿™ç§ä¸šåŠ¡å¼€å‘æ‰€ä½¿ç”¨çš„å…¬å…±æ¨¡å—åˆ†ç¦»å¼€,ä½¿å¾—ç¬¬ä¸‰æ–¹å…¬å…±ä¾èµ–åŒ…åˆ†ç¦»åœ¨å¦ä¸€ä¸ªåŒ…ä¸‹ entry: { //loginå…¥å£æœ‰å¼•å…¥testConfig.jsä»¥åŠreactConfig.js login: `${APP_DIR}/login.js`, //indexå…¥å£ä¹Ÿæœ‰å¼•å…¥testConfig.jsä»¥åŠreactConfig.js index: `${APP_DIR}/index.js`, //appå…¥å£æ²¡æœ‰å¼•å…¥testConfig.js,ä¹Ÿæ²¡æœ‰å¼•å…¥reactConfig.js app: `${APP_DIR}/app.js`, //mobileå…¥å£æœ‰å¼•å…¥testConfig.js,å´æ²¡æœ‰å¼•å…¥reactConfig.js mobile: `${APP_DIR}/mobule.js`, //è®¾ç½®ä¸€ä¸ªç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…çš„å…¥å£ vendor: [&apos;react&apos;, &apos;react-redux&apos;, &apos;redux&apos;, &apos;react-router&apos;, &apos;redux-thunk&apos;, &apos;redux-logger&apos;, &apos;react-dom&apos;, &apos;react-addons&apos;, &apos;prop-types&apos;, &apos;moment&apos;, &apos;antd&apos;, &apos;babel-polyfill&apos;] }, plugins: [ ... //è¿™é‡Œæ— è®ºå…¥å£æ˜¯å¦å¼•å…¥äº†vendorå…¥å£æ•°ç»„é‡Œé¢çš„ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…,å®ƒéƒ½ä¼šå¯¹æ•°ç»„é‡Œé¢çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…è¿›è¡Œæå–,å½“ç„¶è¿™é‡Œçš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ˜¯æœ‰é™åˆ¶çš„,module.contextåœ¨è¿™é‡Œèµ·åˆ°äº†ä½œç”¨,åªæœ‰æ¨¡å—æ‰€å­˜å‚¨çš„è·¯å¾„å«æœ‰&quot;node_modules&quot;çš„æƒ…å†µä¸‹,ä¹Ÿå°±æ˜¯è¯´åªæœ‰æ˜¯åœ¨npmä¸‹è½½çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…,æ‰ä¼šè¢«æå–å‡ºæ¥ã€‚ new webpack.optimize.CommonsChunkPlugin({ name: &apos;vendor&apos;, filename: &apos;js/vendor.[hash].js&apos;, minChunks: function(module, count) { return module.context &amp;&amp; module.context.includes(&quot;nodule_modules&quot;); } }), //è¿™æ ·æå–ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ˜¯å¯ä»¥çš„,ç›´æŽ¥æå–åˆ°jsæ–‡ä»¶å¤¹é‡Œé¢çš„vendor.[hash].js //ä¸Šé¢ä»¥åŠæ‰€æœ‰çš„æå–çš„å…¬å…±æ¨¡å—æ–‡ä»¶åŠ hashçš„åŽŸå› ,æ˜¯ä¸ºäº†é˜²æ­¢æµè§ˆå™¨çš„æ°¸ä¹…ç¼“å­˜æœºåˆ¶,ä½¿å¾—æ–‡ä»¶æ›´æ–°è¿‡åŽ,ä½¿ç”¨çš„è¿˜æ˜¯åŽŸæ¥æ–‡ä»¶çš„å†…å®¹ã€‚ //æå–å‡ºäº†ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…ä¹‹åŽ,ç”±äºŽæƒ³åˆ°å®ƒä»¬ä¸æ˜¯ä¸šåŠ¡ä»£ç ,å¾ˆå°‘è¿›è¡Œä¿®æ”¹,å°½é‡çš„å¤šåˆ©ç”¨æµè§ˆå™¨æ°¸ä¹…ç¼“å­˜æœºåˆ¶,æ‰€ä»¥ä¸ºäº†é˜²æ­¢æ¯ä¸€æ¬¡æž„å»ºéƒ½ä¼šå¼•èµ·å®ƒä»¬hashå€¼çš„æ”¹å˜,ä¸èƒ½åˆ©ç”¨æµè§ˆå™¨æ°¸ä¹…ç¼“å­˜æœºåˆ¶,è¦æŠŠwebpackå¼•å¯¼ç¨‹åºä»¥åŠmanifest åŠ è½½è¿è¡Œæ–‡ä»¶æå–åˆ°å¦ä¸€ä¸ªæ¨¡å—åŒ…ä¸­ã€‚ //è¿™é‡Œmanifestå°±æ˜¯éšè—çš„webpackå¼•å¯¼ç¨‹åºä»¥åŠmanifest åŠ è½½å’Œè¿è¡Œæ¨¡å—æ–‡ä»¶çš„å…¥å£ new webpack.optimize.CommonsChunkPlugin({ name: &apos;manifest&apos;, filename: &apos;js/manifest.[hash].js&apos;, minChunks: Infinity }), //è¿™æ ·æå–webpackå¼•å¯¼ç¨‹åºä»¥åŠmanifest åŠ è½½å’Œè¿è¡Œæ–‡ä»¶æ˜¯å¯ä»¥çš„,ç›´æŽ¥æå–åˆ°jsæ–‡ä»¶å¤¹é‡Œé¢çš„manifest.[hash].js //å†æå–å‡ºä¸šåŠ¡ä½¿ç”¨çš„åƒtestConfig.jsã€reactConfig.jså…¬å…±æ¨¡å—,æƒ³ç€åº”è¯¥å¯ä»¥æ»¡è¶³éœ€æ±‚,ä¸šåŠ¡ä»£ç çš„å…¬å…±éƒ¨åˆ†ä¸€ä¸ªæ¨¡å—åŒ…,ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…ä¸€ä¸ªæ¨¡å—åŒ…,ä»¥åŠwebpackå¼•å¯¼ç¨‹åºå’Œmanfiest åŠ è½½è¿è¡Œæ¨¡å—æ–‡ä»¶ä¸€ä¸ªæ¨¡å—åŒ… new webpack.optimize.CommonsChunkPlugin({ name: &apos;common&apos;, filename: &apos;js/common.[hash].js&apos;, minChunks: 2 }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;login.html&quot;, template: `${ROOT_DIR}/login.html`, chunks: [&quot;manifest&quot;, &quot;vendor&quot;, &quot;common&quot;, &quot;login&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;index.html&quot;, template: `${ROOT_DIR}/index.html`, chunks: [manifest&quot;, &quot;vendor&quot;, &quot;common&quot;, &quot;index&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;app.html&quot;, template: `${ROOT_DIR}/app.html`, chunks: [manifest&quot;, &quot;vendor&quot;, &quot;common&quot;, &quot;app&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;mobile.html&quot;, template: `${ROOT_DIR}/mobile.html`, chunks: [manifest&quot;, &quot;vendor&quot;, &quot;common&quot;, &quot;mobile&quot;], inject: &quot;body&quot; }) //å‘çŽ°è¿™æ ·å®žçŽ°æ˜¯ä¸å¯ä»¥çš„,ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…çš„æ¨¡å—åŒ…,webpackå¼•å¯¼ç¨‹åºä»¥åŠmanifest åŠ è½½å’Œè¿è¡Œæ¨¡å—æ–‡ä»¶çš„æ¨¡å—åŒ…è¢«æ‰“å‡ºæ¥äº†ã€‚ //ä½†æ˜¯common.[hash].jsä¸­å´æ²¡æœ‰è‡³å°‘ä¸¤ä¸ªå…¥å£å…±åŒå¼•å…¥ä¸šåŠ¡ä»£ç å…¬å…±æ¨¡å—çš„éƒ¨åˆ†,è¿˜æ˜¯è¢«åˆ†åˆ«æ‰“è¿›äº†ä¸šåŠ¡ä»£ç æ¨¡å—åŒ…ä¸­ã€‚ //ä¸”common.[hash].jsä¸­çš„ä»£ç å®žé™…ä¸Šæ˜¯webpackè¿è¡Œæ–‡ä»¶ä»¥åŠmanfiest åŠ è½½å’Œè¿è¡Œæ¨¡å—çš„æ–‡ä»¶éƒ¨åˆ†,manfiest.[hash].jsä¹Ÿä¸è§äº†,å¥½åƒcommon.[hash].jsæ›¿æ¢æŽ‰äº†ã€‚ //åŽŸå› åˆ°çŽ°åœ¨è¿˜æ²¡æœ‰æ‰¾åˆ°... //CommonsChunkPluginçš„ç¼ºç‚¹å°±åœ¨äºŽ:å³ä½¿æˆ‘ä½¿ç”¨äº†vendorçš„æ–¹å¼åŽ»æå–å…¬å…±çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—,è¿˜æ˜¯åœ¨æ¯ä¸€æ¬¡æž„å»ºçš„æ—¶å€™,éƒ½ä¼šåŽ»è¿›è¡Œæ‰“åŒ…,åƒæˆ‘å‰é¢è¯´çš„,ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—ä¸åƒä¸šåŠ¡ä»£ç ,å¾ˆå°‘è¿›è¡Œä¿®æ”¹ã€‚ //æ‰€ä»¥æ¯ä¸€æ¬¡éƒ½åŽ»è¿›è¡Œæ‰“åŒ…,è¿˜æ˜¯ä¸å¦¥å½“çš„,èŠ±è´¹äº†å¾ˆå¤šæ—¶é—´åœ¨æ‰“åŒ…ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…ä¸Šé¢ã€‚ ] }; ä½¿ç”¨DllPluginã€DllReferencePluginã€CommonsChunkPluginä»¥åŠHtmlWebpackIncludeAssetsPluginå®žçŽ°å¯¹ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—ã€ä¸šåŠ¡ä»£ç å…¬å…±æ¨¡å—ä»¥åŠwebpackå¼•å¯¼ç¨‹åºå’Œmanifest åŠ è½½å’Œè¿è¡Œæ¨¡å—æ–‡ä»¶éƒ½åˆ†åˆ«æ‰“æˆä¸€ä¸ªåŒ…,å‡å°æ‰“åŒ…ä½“ç§¯,æé«˜æ‰“åŒ…çš„é€Ÿåº¦ã€‚ //ä½¿ç”¨DllPluginå’ŒDllReferencePlugin,å°±ä¸éœ€è¦åƒCommonsChunkPluginé‚£æ ·,å¯¹äºŽç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—,æ¯æ¬¡éƒ½è¦åŽ»æž„å»ºæ‰“åŒ…äº†,åªéœ€è¦å¦å¤–é…ç½®ä¸€ä¸ªwebpacké…ç½®æ–‡ä»¶,å°±å¯ä»¥å®žçŽ°ä¸€åŠ³æ°¸é€¸çš„ä½“éªŒã€‚ //åªè¦æ²¡æœ‰ä¸‹è½½æ–°çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—,å°±ä¸éœ€è¦åˆ©ç”¨webpack.dll.configé…ç½®æ–‡ä»¶åŽ»æ‰“dllåŒ…,æ€»ä½“ä¸Šå‡å°‘äº†æ¯æ¬¡éƒ½æž„å»ºç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—çš„æ—¶é—´ã€‚ //webpack.dll.configé…ç½® const webpack = require(&quot;webpack&quot;), path = require(&quot;path&quot;); const PUBLIC_DIR = &quot;/&quot;, DLL_DIR = path.resolve(__dirname, &quot;../dll&quot;), ROOT_DIR = path.resolve(__dirname, &quot;../..&quot;); const webpackDllConfig = { devtool: &quot;source-map&quot;, entry: { vendor: [&quot;react&quot;, &quot;react-router&quot;, &quot;redux&quot;, &quot;react-redux&quot;, &quot;redux-thunk&quot;, &quot;redux-logger&quot;, &quot;react-dom&quot;, &quot;react-addons&quot;, &quot;prop-types&quot;, &quot;antd&quot;, &quot;babel-polyfill&quot;] }, output: { publicPath: PUBLIC_DIR, path: DLL_DIR, filename: &quot;[name].dll.js&quot;, library: &quot;[name]_[chunkhash]&quot; }, plugins: [ //é˜²æ­¢æ‰“åŒ…è¿‡ç¨‹ä¸­å‡ºçŽ°é”™è¯¯,ä¸­æ–­æ‰“åŒ… new webpack.NoEmitOnErrorsPlugin(), //è°ˆä¸€ä¸‹DllPlugin,DllPluginçš„æœºåˆ¶æ˜¯æ ¹æ®webpackåˆ¶å®šçš„idæ˜ å°„åˆ°vendorå…¥å£ä¸­çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—çš„è·¯å¾„ä¸Š,ç”Ÿæˆæ˜ å°„å…³ç³»,æ‰“åŒ…åŽ,ç”Ÿæˆvendor.dll.jsæ–‡ä»¶å’Œvendor_manifest.dll.jsonæ–‡ä»¶,è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹æ˜¯webpackåˆ¶å®šçš„idä¸Žvendorå…¥å£ä¸­çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—çš„æ˜ å°„æ•°æ®,ä¹‹åŽå†ä½¿ç”¨DllReferencePluginå°†vendor_manifest.dll.jsonæ–‡ä»¶å¼•å…¥åˆ°ä¸šåŠ¡ä»£ç æ‰“åŒ…çš„é…ç½®æ–‡ä»¶çš„manfiest åŠ è½½å’Œè¿è¡Œæ¨¡å—æ–‡ä»¶ä¸­,æœ€åŽåªè¦å°†vendor.dll.jså¼•å…¥åˆ°ä½ æ‰€é€‰æ‹©çš„ä¸šåŠ¡ä»£ç å…¥å£å°±å¯ä»¥äº†ã€‚ //vendor.dll.jsçš„ä½œç”¨æ˜¯,æ ¹æ®vendor_manifest.dll.jsonä¸­webpackåˆ¶å®šçš„idä¸Žvendorå…¥å£ä¸­ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—è·¯å¾„çš„æ˜ å°„å…³ç³»,ä¸šåŠ¡ä»£ç å…¥å£æ‰€å¼•å…¥çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—,éƒ½ä¼šé€šè¿‡vendor.dll.jså…¨å±€å‡½æ•°è¿›è¡Œå¤„ç†,å¹¶æ ¹æ®æ‰€å¼•å…¥çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—çš„idè¿›è¡Œä½¿ç”¨,ä¸”è¿™æ ·å¹¶ä¸ä¼šæŠŠåº“æ–‡ä»¶ä¸­çš„ä»£ç ä¹Ÿæ‰“åŒ…è¿›åŽ» new webpack.DllPlugin({ path: path.join(DLL_DIR, &quot;[name]_manifest.dll.json&quot;), //nameå¿…é¡»å’Œoutputçš„libraryå±žæ€§ä¿æŒä¸€è‡´ name: &quot;[name]_[chunkhash]&quot;, context: ROOT_DIR }), //å¯¹æ‰“åŒ…ä»£ç è¿›è¡ŒåŽ‹ç¼© new webpack.optimize.UglifyJsPlugin({ uglifyOptions: { sourceMap: true, compress: { unused: false, dead_code: false, warnings: true }, output: { comments: true } } }) ] }; export default webpackDllConfig; //ä¸šåŠ¡ä»£ç webpackæ‰“åŒ…é…ç½®æ–‡ä»¶ const webpack = require(&quot;webpack&quot;), path = require(&quot;path&quot;), //ç”¨æ¥å¤åˆ¶ç›®å½•æˆ–è€…ç›®å½•ä¸‹çš„æ–‡ä»¶çš„æ’ä»¶ CopyWebpackPlugin = require(&quot;copy-webpack-config&quot;), //ç”¨æ¥å°†vendor.dll.jsæ’å…¥åˆ°ä¸šåŠ¡ä»£ç å…¥å£çš„æ’ä»¶,ä½†ä¸å¯é€‰æ‹©æ’å…¥çš„å…¥å£ä¸šåŠ¡ä»£ç æ–‡ä»¶,é»˜è®¤ä¼šå°†æ‰€æœ‰çš„å…¥å£ä¸šåŠ¡ä»£ç éƒ½æ’å…¥vendor.dll.js AddAssetHtmlPlugin = require(&quot;add-asset-html-webpack-plugin&quot;), //ç”¨æ¥å°†vendor.dll.jsæ’å…¥åˆ°ä¸šåŠ¡ä»£ç å…¥å£çš„æ’ä»¶,å¯é€‰æ‹©æ’å…¥çš„å…¥å£ä¸šåŠ¡ä»£ç æ–‡ä»¶ HtmlWebpackIncludeAssetsPlugin = require(&quot;html-webpack-include-assets-plugin&quot;), HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;); const PUBLIC_DIR = &quot;/&quot;, ROOT_DIR = path.resolve(__dirname, &quot;../&quot;), BUILD_DIR = path.resolve(__dirname, &quot;../build&quot;), DLL_DIR = path.resolve(__dirname, &quot;../dll&quot;), IMAGE_DIR = path.resolve(__dirname, &quot;../images&quot;), MANIFEST_DIR = require(path.resolve(__dirname, `${DLL_DIR}/vendor_manifest.dll.json`)); const webpackProdConfig = { entry: { //loginå…¥å£æœ‰å¼•å…¥testConfig.jsä»¥åŠreactConfig.js login: `${APP_DIR}/login.js`, //indexå…¥å£ä¹Ÿæœ‰å¼•å…¥testConfig.jsä»¥åŠreactConfig.js index: `${APP_DIR}/index.js`, //appå…¥å£æ²¡æœ‰å¼•å…¥testConfig.js,ä¹Ÿæ²¡æœ‰å¼•å…¥reactConfig.js app: `${APP_DIR}/app.js`, //mobileå…¥å£æœ‰å¼•å…¥testConfig.js,å´æ²¡æœ‰å¼•å…¥reactConfig.js mobile: `${APP_DIR}/mobule.js` }, ... plugins: [ ... //è¿™é‡Œå°±æ˜¯å°†vendor_manfiest.dll.jsonç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—å¼•å…¥åˆ°ä¸šåŠ¡ä»£ç çš„æ‰“åŒ…é…ç½®æ–‡ä»¶çš„manifest åŠ è½½å’Œè¿è¡Œæ¨¡å—æ–‡ä»¶ä¸­ new webpack.DllReferencePlugin({ manifest: MANIFEST_DIR, context: ROOT_DIR }), new CopyWebpackPlugin([{ context: ROOT_DIR, from: IMAGE_DIR, to: `${BUILD_DIR}/images` },{ context: ROOT_DIR, from: DLL_DIR, to: `${BUILD_DIR}/dll` }, { context: ROOT_DIR, from: &quot;./dll/vendor.dll.js&quot;, to: &quot;js/&quot; }]), //è¿™é‡Œçš„AddAssetHtmlPluginä¼šå°†æ‰€æœ‰çš„ä¸šåŠ¡ä»£ç å…¥å£éƒ½å¼•å…¥vendor.dll.jsæ–‡ä»¶ //new AddAssetHtmlPlugin({ // filepath: &quot;js/vendor.dll.js&quot;, // hash: true //}), //è¿™é‡Œçš„HtmlWebpackIncludeAssetsPluginä¼šæœ‰é€‰æ‹©çš„å°†loginã€indexã€appå…¥å£æ–‡ä»¶å¼•å…¥vendor.dll.js,å¯å®žçŽ°æŒ‰éœ€åŠ è½½ //appendå±žæ€§è®¾ç½®ä¸ºfalse,æ˜¯ç¡®ä¿vendor.dll.jsæ–‡ä»¶åœ¨ä¸šåŠ¡ä»£ç åŒ…æ¨¡å—ä¹‹å‰å¼•å…¥ new HtmlWebpackIncludeAssetsPlugin({ assets: [&quot;js/vendor.dll.js&quot;], files: [&quot;login.html&quot;, &quot;index.html&quot;, &quot;app.html&quot;], append: false, hash: true }), //è¿™æ ·ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—å°±ç”Ÿæˆäº†,å½“æ¯æ¬¡æ²¡æœ‰æ–°çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—ä¸‹è½½æ—¶,å°±å¯ä»¥ç›´æŽ¥åˆ©ç”¨vendor.dll.jså…¨å±€å‡½æ•°å¤„ç†å¯¹å¼•å…¥çš„webpackåˆ¶å®šçš„idä¸Žvendor_manfiest.dll.jsonä¸­çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—è·¯å¾„çš„æ˜ å°„è¿›è¡Œè°ƒç”¨ new webpack.optimize.CommonsChunkPlugin({ name: &quot;common&quot;, filename: &quot;js/common.[hash].js&quot;, minChunks: 2 }), //è¿™é‡Œä¸Šé¢åœ¨CommonsChunkPluginéƒ¨åˆ†æœ‰ä»‹ç»è¿‡,ç›´æŽ¥å¯¹ä¸šåŠ¡ä»£ç ä¸­çš„å…¬å…±æ¨¡å—éƒ¨åˆ†è¿›è¡Œæå–,ä¸”è‡³å°‘åœ¨ä¸¤ä¸ªå…¥å£ä¸­æœ‰å…¬å…±æ¨¡å—çš„å¼•å…¥ new webpack.optimize.CommonsChunkPlugin({ name: &quot;manifest&quot;, filename: &quot;js/manifest.[hash].js&quot;, minChunks: Infinity }), //å†å°†webpackå¼•å¯¼ç¨‹åºä»¥åŠmanfiest åŠ è½½è¿è¡Œæ¨¡å—æ–‡ä»¶ä»Žcommon.[hash].jsæ–‡ä»¶ä¸­æå–å‡ºæ¥,è¿™æ ·å°±å®Œæˆé…ç½®äº† new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;login.html&quot;, template: `${ROOT_DIR}/login.html`, chunks: [&quot;manifest&quot;, &quot;common&quot;, &quot;login&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;index.html&quot;, template: `${ROOT_DIR}/index.html`, chunks: [manifest&quot;, &quot;common&quot;, &quot;index&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;app.html&quot;, template: `${ROOT_DIR}/app.html`, chunks: [manifest&quot;, &quot;common&quot;, &quot;app&quot;], inject: &quot;body&quot; }), new HtmlWebpackPlugin({ publicPath: PUBLIC_DIR, filename: &quot;mobile.html&quot;, template: `${ROOT_DIR}/mobile.html`, chunks: [manifest&quot;, &quot;common&quot;, &quot;mobile&quot;], inject: &quot;body&quot; }) ] }; è¿™ç§ç”±DllPluginã€DllReferencePluginå’ŒHtmlWebpackIncludAssetsPlugin(å¯å®žçŽ°æŒ‰éœ€åŠ è½½)æ‰“åŒ…ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—,ç”±CommonsChunkPluginæå–ä¸šåŠ¡ä»£ç å…¬å…±æ¨¡å—éƒ¨åˆ†å’Œwebpackå¼•å¯¼ç¨‹åºä»¥åŠmanifest åŠ è½½è¿è¡Œæ¨¡å—æ–‡ä»¶çš„æ–¹å¼,å¾ˆå¥½çš„å®žçŽ°äº†å¯¹ç¬¬ä¸‰æ–¹å¤–éƒ¨ä¾èµ–åŒ…æ¨¡å—ã€ä¸šåŠ¡ä»£ç å…¬å…±æ¨¡å—ä»¥åŠwebpackå¼•å¯¼ç¨‹åºå’Œmanifest åŠ è½½å’Œè¿è¡Œæ¨¡å—æ–‡ä»¶çš„æ‰“åŒ…,å‡å°äº†æ‰“åŒ…ä½“ç§¯,æé«˜äº†æ‰“åŒ…çš„é€Ÿåº¦ã€‚]]></content>
      <categories>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-30 å…³äºŽé—­åŒ…]]></title>
    <url>%2F2018%2F04%2F30%2F%E5%85%B3%E4%BA%8E%E9%97%AD%E5%8C%85%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯å›žè°ƒå‡½æ•° Aå‡½æ•°ä½œä¸ºBå‡½æ•°çš„å‚æ•°,å¹¶åœ¨Bå‡½æ•°ä¸­æ‰§è¡Œ,Aå‡½æ•°å°±æ˜¯å›žè°ƒå‡½æ•°ã€‚ function setTimer(fn, timer) { fn(timer); } //function timerå°±æ˜¯function setTimerçš„å›žè°ƒå‡½æ•° setTimer(function timer(time) { console.log(time); }, 1000); å›žè°ƒå‡½æ•°ä¹Ÿåˆ†åŒæ­¥å’Œå¼‚æ­¥,ä¸Šä¾‹å°±æ˜¯åŒæ­¥,è€ŒåƒsetTimeout,setIntervalä¸­è¿™ç§ç‰µæ‰¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—(å¼‚æ­¥é˜Ÿåˆ—),Event Loopçš„å›žè°ƒå‡½æ•°æ¥è¯´,å°±æ˜¯å¼‚æ­¥ã€‚ ä»€ä¹ˆæ˜¯é—­åŒ… â€œAå‡½æ•°ä¸­åŒ…å«Bå‡½æ•°,å¹¶è¿”å›žBå‡½æ•°,è°ƒç”¨Bå‡½æ•°å¯ä»¥ä½¿ç”¨Aå‡½æ•°ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡â€,Bå‡½æ•°å°±æ˜¯é—­åŒ…,ç¤ºä¾‹å¦‚ä¸‹: function foo() { let _name = &quot;Gary&quot;; function bar() { console.log(`name: ${_name}`); } return bar; } //fooå‡½æ•°æ‰§è¡Œä¹‹åŽ,ä½œç”¨åŸŸä¼šè¢«é”€æ¯,éšä¹‹è€Œç„¶çš„ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡åº”è¯¥ä¼šè¢«é”€æ¯,å¹¶è¢«å¼•æ“Žåžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶, //ä½†æ˜¯åœ¨è¿™é‡Œç¥žå¥‡çš„äº‹æƒ…å‘ç”Ÿäº†,fooå‡½æ•°ä½œç”¨åŸŸå¹¶æ²¡æœ‰è¢«é”€æ¯ä¹‹åŽå›žæ”¶,è€Œæ˜¯è¿˜å­˜åœ¨äºŽå†…å­˜ä¸­,å¹¶è¢«barä½¿ç”¨,è¿™é‡Œå°±å½¢æˆäº†é—­åŒ…ã€‚ let bar = foo(); bar(); è¿˜æœ‰ä¸€ç§å½¢å¼æ˜¯è¿™æ · function foo() { let _name = &quot;Gary&quot;; function bar() { console.log(`name: ${_name}`); } baz(bar); } //è¿™é‡Œåœ¨fooå‡½æ•°æ‰§è¡Œä¹‹åŽ,æŒ‰ç†æ¥è¯´,fooå‡½æ•°ä¸­ä½œç”¨åŸŸ,ä»¥åŠå…¶ä¸­_nameå˜é‡,éƒ½ä¼šè¢«é”€æ¯,å¹¶éšåŽè¢«å¼•æ“Žåžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶ã€‚ //ä½†æ˜¯ç¥žå¥‡çš„æ˜¯,è¿™é‡Œçš„ä½œç”¨åŸŸå¹¶æ²¡æœ‰è¢«é”€æ¯,è€Œå…¶ä¸­çš„_nameå˜é‡ä¹Ÿæ²¡æœ‰è¢«é”€æ¯,å½“ç„¶ä¹Ÿæ²¡æœ‰è¢«å¼•æ“Žåžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶,è€Œè¿˜æ˜¯å­˜å‚¨äºŽå†…å­˜ä¸­,å¹¶è¢«barä½¿ç”¨,è¿™é‡Œå°±å½¢æˆäº†é—­åŒ…ã€‚ function baz(fn) { fn(); } foo();]]></content>
      <categories>
        <category>é—­åŒ…</category>
      </categories>
      <tags>
        <tag>é—­åŒ…</tag>
        <tag>å›žè°ƒå‡½æ•°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-27 å…³äºŽå¼‚æ­¥]]></title>
    <url>%2F2018%2F04%2F27%2F%E5%85%B3%E4%BA%8E%E5%BC%82%E6%AD%A5%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯å¼‚æ­¥ å¼‚æ­¥åœ¨JSä¸­çš„è¡¨çŽ°åˆ†ä¸ºä¸‰ç±»: æ—¶é—´å»¶è¿Ÿ,æ¯”å¦‚setTimeout,setIntervalè¿™ç§æ—¶é—´å¤„ç†å‡½æ•° äº‹ä»¶å¤„ç†,æ¯”å¦‚onClick(ç‚¹å‡»äº‹ä»¶),onChange(è¾“å…¥æ¡†å†…å®¹æ”¹å˜å›žè°ƒ),onMouseover(é¼ æ ‡ç§»å…¥äº‹ä»¶),onMouseout(é¼ æ ‡ç§»å‡ºäº‹ä»¶),onMouseEnter(é¼ æ ‡ç§»å…¥äº‹ä»¶),onMouseLeave(é¼ æ ‡ç§»å‡ºäº‹ä»¶)ç­‰ç­‰ xhrã€fetchè¯·æ±‚ç­‰ç­‰ ä¸ºä»€ä¹ˆä¼šå‡ºçŽ°å¼‚æ­¥ ç”±äºŽJSæ˜¯å•çº¿ç¨‹(åŒä¸€æ—¶é—´,åªèƒ½åšä¸€ä»¶äº‹æƒ…)çš„è¯­è¨€,ä¸ºäº†å®žçŽ°æ—¶é—´å»¶è¿Ÿã€äº‹ä»¶å¤„ç†å’Œxhrã€fetchè¯·æ±‚å¤„ç†è¿™äº›å¿…é¡»æ˜¯å¼‚æ­¥çš„æ“ä½œ,JSå¿…é¡»å¤„ç†å•çº¿ç¨‹æ€Žæ ·å¼‚æ­¥çš„é—®é¢˜ã€‚ ä¸ºä»€ä¹ˆJSè¦ä½¿ç”¨å•çº¿ç¨‹ JSä½¿ç”¨å•çº¿ç¨‹,æ˜¯ç”±äºŽJSä¸­ä¸ä»…ä»…æœ‰ECMAScript,è¿˜æœ‰DOM(Document Object Modal),htmlæ¸²æŸ“DOM,JSä¹Ÿå¯ä»¥åŠ¨æ€æ”¹å˜DOM,å‡å¦‚JSä¸æ˜¯å•çº¿ç¨‹,åŒä¸€æ—¶é—´å¯ä»¥å¤„ç†å¤šä»¶äº‹æƒ…,htmlæ¸²æŸ“DOMå’ŒJSåŠ¨æ€æ”¹å˜DOMå°±ä¼šæ··ä¹±,æµè§ˆå™¨ä¼šä¸çŸ¥é“æ˜¯å…ˆæ¸²æŸ“html DOM,è¿˜æ˜¯å…ˆæ‰§è¡ŒJSåŠ¨æ€æ”¹å˜DOM,å³ä½¿æ˜¯å®žçŽ°äº†å¤šçº¿ç¨‹çš„WebWorker,ä¹Ÿæ²¡æœ‰è§¦åŠDOMéƒ¨åˆ†ã€‚ å…³äºŽå¼‚æ­¥ JSä½¿ç”¨å•çº¿ç¨‹,è¿è¡Œæ—¶,å…ˆä¼šè¿è¡ŒåŒæ­¥ä»£ç ,å¦‚æžœé‡åˆ°å¼‚æ­¥ä»£ç ,å°±ä¼šå…ˆå°†å¼‚æ­¥ä»£ç æ”¾è¿›å†…å­˜çš„å¼‚æ­¥é˜Ÿåˆ—ä¸­,å¾…åˆ°åŒæ­¥ä»£ç è¿è¡Œå®Œæ¯•,å°±ä¼šåŽ»è½®è¯¢å¼‚æ­¥é˜Ÿåˆ—ä¸­çš„å¼‚æ­¥ä»£ç ã€‚ å‡å¦‚å¼‚æ­¥é—­åŒ…ä¸­è¿˜å­˜åœ¨å¼‚æ­¥é—­åŒ…,åœ¨å¼‚æ­¥é˜Ÿåˆ—ä¸­,å°±ä¼šå°†é‡Œå±‚çš„å¼‚æ­¥é—­åŒ…pushåˆ°å¤–å±‚çš„å¼‚æ­¥é—­åŒ…åŽé¢,å¾…åˆ°å¤–å±‚çš„å¼‚æ­¥é—­åŒ…æ‰§è¡Œå®Œæ¯•ä¹‹åŽ,å†æ‰§è¡Œé‡Œå±‚çš„å¼‚æ­¥é—­åŒ…ã€‚ ä½¿ç”¨å¼‚æ­¥å‡ºçŽ°çš„é—®é¢˜ JSä½¿ç”¨å¼‚æ­¥è§£å†³äº†JSå•çº¿ç¨‹çš„é—®é¢˜,ä½†æ˜¯å¼‚æ­¥å´åˆå¼•èµ·äº†å¦å¤–ä¸€ä¸ªé—®é¢˜,å°±æ˜¯å¼‚æ­¥æƒ…å†µä¸‹çš„åŒæ­¥æ‰§è¡Œ,å°¤å…¶æ˜¯xhrã€fetchçš„è¯·æ±‚,ç”±äºŽå“åº”æ—¶é—´ä¸ç¡®å®š,å¾ˆå®¹æ˜“å¼•èµ·å¼‚æ­¥æ‰§è¡Œæ··ä¹±çš„é—®é¢˜ã€‚ å¼‚æ­¥çš„æ¼”å˜è¿‡ç¨‹setTimeout callback ä¹‹å‰è¿˜æ²¡æœ‰ä½¿ç”¨nodejsçš„æ—¶å€™,è§£å†³å¼‚æ­¥é—®é¢˜åŸºæœ¬ä¸Šä½¿ç”¨çš„æ˜¯setTimeoutä½¿ç”¨å¼‚æ­¥é—­åŒ…åŽ»è§£å†³å¼‚æ­¥çš„æ–¹å¼,æ¯”å¦‚åœ¨reactä¸­,setStateå°±æ˜¯å¼‚æ­¥æ‰§è¡Œçš„,å‡å¦‚nameçš„åˆå§‹å€¼ä¸ºGary componentWillMount() { this.setState({ name: &quot;Yinwk&quot; }); this.setState({ name: &quot;CLAY&quot; }); //è¿™æ—¶å€™ç”±äºŽsetStateæ˜¯å¼‚æ­¥çš„,æ‰€ä»¥ä¼šå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ,ä¹Ÿå°±æ˜¯è¯´è¿™æ—¶å€™this.state.nameçš„å€¼ä¾ç„¶ä¸ºGary console.log(this.state.name); } componentWillMount() { setTimeout(function timer(){ this.setState({ name: &quot;Yinwk&quot; }); //è¿™æ—¶å€™this.state.nameçš„å€¼å°±å˜ä¸ºäº†Yinwk console.log(this.state.name); setTimeout(function timer(){ this.setState({ name: &quot;CLAY&quot; }); //è¿™æ—¶å€™this.state.nameçš„å€¼å°±å˜ä¸ºäº†CLAY console.log(this.state.name); }.bind(this), 0); }.bind(this), 0) } EventEmitter(å¹¶ä¸æ˜¯å¼‚æ­¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ) nodejså‡ºçŽ°ä¹‹åŽ,eventæ¨¡å—æœ‰ä¸€ä¸ªç±»â€”â€”EventEmitter,ä¸€ç›´ä»¥ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ¶ˆæ¯ç®¡ç†æ¨¡å—,è·ŸEvent Loopå¼‚æ­¥é˜Ÿåˆ—æœ‰ç€åƒä¸ä¸‡ç¼•çš„å…³ç³»,åŽæ¥çœ‹äº†æºç ,å‘çŽ°å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªæ¶ˆæ¯ç®¡ç†æ¨¡å—,è·Ÿæ¶ˆæ¯é˜Ÿåˆ—æ²¡æœ‰ä»»ä½•å…³ç³»,on/emitåªæ˜¯ä¸€ä¸ªç›‘å¬çš„è§‚å¯Ÿè€…æ¨¡å¼,onæ—¶æ·»åŠ /åˆ é™¤listener,emitæ—¶è¿è¡Œå›žè°ƒå‡½æ•°ã€‚è¿˜æ˜¯æ‹¿ä¸Šä¸€ä¸ªä¾‹å­è¿›è¡Œä¸¾ä¾‹,å‡å¦‚nameçš„åˆå§‹å€¼ä¸ºGary import {EventEmitter} from &quot;events&quot;; const eventEmitter = new EventEmitter(); componentWillMount(){ eventEmitter.on(&quot;gary&quot;, () =&gt; { this.setState({ name: &quot;Yinwk&quot; }); console.log(this.state.name); }); //è¿™é‡Œæ‰“å°å‡ºçš„this.state.nameè¿˜æ˜¯Gary,ç”±äºŽEventEmitterè·Ÿæ¶ˆæ¯é˜Ÿåˆ—æ²¡æœ‰ä»»ä½•å…³ç³»,æ‰€ä»¥å¹¶ä¸æ˜¯å¼‚æ­¥,åªæ˜¯ä¸€ä¸ªç›‘å¬çš„è§‚å¯Ÿè€…æ¨¡å¼,æ‰€ä»¥æ˜¯åŒæ­¥çš„ eventEmitter.emit(&quot;gary&quot;); } Promise ES6è¯­æ³•å‘å¸ƒä¹‹åŽ,Promiseæˆä¸ºäº†æ–°çš„è§£å†³å¼‚æ­¥é—®é¢˜çš„æ–¹æ¡ˆ,å®žè´¨çš„ä¹Ÿæ˜¯åˆ©ç”¨å¼‚æ­¥é—­åŒ…æ¥è§£å†³å¼‚æ­¥é—®é¢˜ã€‚è¿˜æ˜¯æ‹¿æœ€åˆçš„ä¾‹å­è¿›è¡Œä¸¾ä¾‹,å‡å¦‚nameçš„åˆå§‹å€¼ä¸ºGary ComponentWillMount() { (function iifeSetName() { return new Promise(function promise(resolve, reject) { this.setState({ name: &quot;Yinwk&quot; }); resolve(); }.bind(this)); }.bind(this))().then(function resolve() { //è¿™é‡Œæ‰“å°å‡ºçš„this.state.nameå°±æ˜¯Yinwk console.log(this.state.name); }.bind(this), function reject() { }.bind(this)); } yield and * å†åˆ°åŽæ¥æœ€æ–°çš„è§£å†³å¼‚æ­¥çš„æ–¹æ¡ˆ:yield *é…åˆPromise,ä¹Ÿå°±æ˜¯GeneratoræŽ§åˆ¶è¿­ä»£å™¨,æ‰§è¡Œæ—¶æ¯æ‰§è¡Œåˆ°yieldæ—¶,å°±ä¼šåœæ­¢æ‰§è¡Œå¹¶è¿”å›žä¸€ä¸ªIteratorè¿­ä»£å™¨,ä¸”ä¼šä¿ç•™ä¸Šä¸‹æ–‡,ç›´åˆ°ä¸‹æ¬¡è¿è¡Œ,ç¤¾åŒºtjå¤§ç¥žçš„coå‡½æ•°åŒæ­¥è¯»å–æ–‡ä»¶å°±æ˜¯ä½¿ç”¨äº†yield *é…åˆPromise const fs = require(&quot;fs&quot;); function readFile(file){ return new Promise((resolve, reject) =&gt; { fs.readFile((err, data) =&gt; { if(err) reject(err); resolve(data); }); }); } function *gc() { let a = yield readFile(&quot;../data/file_first.txt&quot;); console.log(a); let b = yield readFile(&quot;../data/file_second.txt&quot;); console.log(b); return b; } co(gc).then(function resolve(data){ console.log(data); }.bind(this), function reject(){ }.bind(this)); //coå‡½æ•°åˆ©ç”¨yield * + PromiseåŒæ­¥è¯»å–æ–‡ä»¶ function co(gc_co){ let gc = gc_co(); return new Promise((resolve, reject) =&gt; { //è¿™é‡Œå®žçŽ°ä¸€ä¸ªGeneratoræŽ§åˆ¶è¿­ä»£å™¨çš„è¿­ä»£å¾ªçŽ¯ (function readData(data){ let gcNext = gc.next(data), value = gcNext.value, done = gcNext.done; if(done) { resolve(value); } else { value.then(readData, reject); } })(); }); } async and await çŽ°å¦‚ä»Šçš„æŽ¨å‡ºçš„è§£å†³å¼‚æ­¥é—®é¢˜çš„æœ€ç»ˆè§£å†³æ–¹æ¡ˆ:asyncå’Œawait,å¾ˆå¥½çš„è§£å†³äº†å¼‚æ­¥çš„é—®é¢˜,ä¸”å½“await Promiseæ—¶,è¿”å›žçš„æ˜¯fulfilledå’Œrejectedè¿”å›žçš„ç»“æžœã€‚è¿˜æ˜¯æ‹¿æœ€åˆçš„ä¾‹å­è¿›è¡Œä¸¾ä¾‹,å‡å¦‚nameçš„åˆå§‹å€¼ä¸ºGary ComponentWillMount() { (async function iifeSetName() { await this.setState({ name: &quot;Yinwk&quot; }); //è¿™é‡Œæ‰“å°å‡ºçš„this.state.nameå°±æ˜¯Yinwk await console.log(this.state.name); }.bind(this))(); } è¿˜å¯ä»¥è¿™æ · ComponentWillMount() { (async function iifeSetName() { let name = await new Promise((resolve, reject) =&gt; { this.setState({ name: &quot;Yinwk&quot; }); resolve(); }).then(()=&gt;{ return this.state.name; }, ()=&gt;{ }); //è¿™é‡Œæ‰“å°å‡ºçš„this.state.nameå°±æ˜¯Yinwk await console.log(name); //è¿™é‡Œæ‰“å°å‡ºçš„this.state.nameè¿˜æ˜¯Yinwk await console.log(this.state.name); }.bind(this))(); }]]></content>
      <categories>
        <category>å¼‚æ­¥</category>
      </categories>
      <tags>
        <tag>å¼‚æ­¥</tag>
        <tag>Promise</tag>
        <tag>async await</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-27 å…³äºŽwebpack]]></title>
    <url>%2F2018%2F04%2F27%2F%E5%85%B3%E4%BA%8Ewebpack%2F</url>
    <content type="text"><![CDATA[å…³äºŽwebpack ä½¿ç”¨webpackå·²æœ‰å¤§åŠå¹´,ä»Žwebpack 1.0ç›´åˆ°4.0,éƒ½æœ‰å°è¯•è¿‡,æ¯æ¬¡å‡çº§éƒ½æ¯”è¾ƒç—›è‹¦,ä»Šå¤©æ¢³ç†ä¸€ä¸‹ä¸åŒç‚¹ webpack 1.0 webpackæ˜¯çŽ°å¦‚ä»Šéžå¸¸æµè¡Œã€æ˜“ç”¨è¯­ä¹‰åŒ–å¾ˆæ˜Žæ˜¾çš„æ‰“åŒ…åŽ‹ç¼©å·¥å…·,åºŸè¯ä¸å¤šè¯´,ç›´æŽ¥ä¸Šä»£ç (ä¼šæœ‰æ˜Žç¡®çš„æ³¨é‡Š)ã€‚PSï¼šreactä½¿ç”¨çš„æ˜¯CommonJSæ¨¡å—åŒ–è¯­æ³• const webpack = require(&quot;webpack&quot;), //å¯¹äºŽè·¯å¾„ç®¡ç†çš„å¤–éƒ¨ä¾èµ–åŒ… path = require(&quot;path&quot;), //è‡ªåŠ¨æ·»åŠ cssæ‰©å±•å¤´ä»¥å…¼å®¹ä½Žç‰ˆæœ¬æµè§ˆå™¨çš„å¤–éƒ¨ä¾èµ–åŒ… autoprefixer = require(&quot;autoprefixer&quot;), //å¤„ç†æ‰“åŒ…cssçš„webpack pluginæ’ä»¶ ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;), //å¤„ç†æ‰“åŒ…htmlçš„webpack pluginæ’ä»¶ HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;); const PUBLIC_DIR = &quot;/&quot;, //è·¯å¾„å·¡èˆª,å…ˆè¿›å…¥webpackæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„,ç„¶åŽå†è¿›å…¥æ ¹è·¯å¾„,æˆ‘è¿™é‡Œæ˜¯æŠŠwebpacké…ç½®æ–‡ä»¶æ”¾åœ¨äº†æ ¹è·¯å¾„åº•ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ ROOT_DIR = path.resolve(__dirname, &quot;../&quot;)]]></content>
      <categories>
        <category>webpack or webpack-dev-server</category>
      </categories>
      <tags>
        <tag>webpack</tag>
        <tag>webpack-dev-server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-27 å…³äºŽwebstorm]]></title>
    <url>%2F2018%2F04%2F27%2F%E5%85%B3%E4%BA%8Ewebstorm%2F</url>
    <content type="text"><![CDATA[webstorm license server ä»Žæ¯•ä¸šå°±å¼€å§‹ä½¿ç”¨webstorm,ä»Žwebstorm 11åˆ°webstorm 2017,å†åˆ°çŽ°åœ¨çš„webstorm 2018,webstorm IDEåŠŸèƒ½è¶Šæ¥è¶Šå¼ºå¤§,ä½†æ˜¯æˆ‘ä»Žæ¥ä¸ä½¿ç”¨æ­£ç‰ˆ,è€Œä»Šå¤©å°±ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹,åœ¨ä½¿ç”¨ç›—ç‰ˆè¿‡ç¨‹ä¸­æœ€å¤§çš„å›°éš¾â€”â€”license serverã€‚åœ¨æœ€åˆçš„æ—¶å€™,æˆ‘ä¹Ÿæ˜¯ç™¾åº¦çš„ä¸€äº›Activation code,åŽæ¥å‘çŽ°è¿™äº›Activation codeæžä¸ç¨³å®š,å¯èƒ½æ˜¯ä¸€ä¸ªActivation codeåªèƒ½åœ¨ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨å§,æˆ‘æ”¾å¼ƒäº†ä½¿ç”¨Activation codeçš„æ–¹å¼ã€‚ åŽæ¥,åœ¨Webstormå§æ‰¾åˆ°äº†ä¸€ç§å¯ä»¥è®¾ç½®è¯•ç”¨æœŸåˆ°2099å¹´çš„æ–¹æ³•:æ”¹å˜æœ¬åœ°çš„æ—¥æœŸæ—¶é—´è‡³2099å¹´11æœˆ30æ—¥,ç„¶åŽå®‰è£…webstorm,é€‰æ‹©è¯•ç”¨,è¯•ç”¨æœŸä¸€ä¸ªæœˆ,è¿™æ—¶å€™ä½ çš„è¯•ç”¨æœŸå°±åˆ°äº†2099å¹´çš„12æœˆ31æ—¥ã€‚å‡å¦‚ä½ å·²ç»å®‰è£…äº†webstorm,ç›´æŽ¥æ‰¾åˆ°WINDOWSç³»ç»Ÿ,C:/Users(ç”¨æˆ·)/ä½ çš„WINDOWSç”µè„‘ç”¨æˆ·å/.Webstorm2017.2/config/eval,ç›´æŽ¥å°†evalæ–‡ä»¶åˆ æŽ‰,é‡æ–°æ‰“å¼€webstorm,æ›´æ”¹æœ¬åœ°æ—¥æœŸ,åŽé¢çš„æ“ä½œå°±åŒä¸Šäº†ã€‚ç›´åˆ°2017.3ç‰ˆæœ¬ä¹‹å‰,ä½¿ç”¨çš„å¾ˆèˆ’æœ,åˆ°äº†2017.3ç‰ˆæœ¬,JetBrainså‘çŽ°äº†è¿™ä¸ªæ¼æ´ž,è¿›è¡Œäº†ä¿®è¡¥,ç”±æ­¤ä¹Ÿæ”¾å¼ƒäº†ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚ å†ä¹‹åŽ,å°±å¼€å§‹ä½¿ç”¨license server,ä½¿ç”¨çš„license serverå¦‚ä¸‹: http://idea.imsxm.com (2017.3.3ç‰ˆæœ¬æžå…¶ä¹‹å‰ç‰ˆæœ¬å¯ç”¨) http://idea.iteblog.com/key.php (2017.1å¯ç”¨) http://www.aku.vn/idea (2017.1å¯ç”¨) http://idea.ibdyr.com (2017.3.3ç‰ˆæœ¬æžå…¶ä¹‹å‰ç‰ˆæœ¬å¯ç”¨) å†åŽæ¥,å°±å¼€å§‹ä½¿ç”¨æœ¬åœ°nginxåå‘ä»£ç†http://idea.imsxm.com,å°†ä¸‹é¢çš„é…ç½®æ”¾è¿›serverä¸­: location /rpc { proxy_pass http://idea.imsxm.com/rpc; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } çŽ°åœ¨è¿žæœ¬åœ°nginxåå‘ä»£ç†éƒ½å¤±æ•ˆäº†,jetbrainsåœ¨2017.3.4ç‰ˆæœ¬ä½¿ç”¨äº†ipåœ°å€åŠ¨æ€å°ç¦,ç»è¿‡æˆ‘å¾ˆé•¿æ—¶é—´çš„å¯»æ‰¾,æ‰¾åˆ°äº†çŽ°åœ¨åœ¨2018ç‰ˆæœ¬ä¹‹åŽéƒ½å¯ä½¿ç”¨çš„license server: http://www.activejetbrains.ml æœ€æ–°çš„license serverè½¬è‡ªç½‘ä¸Šçš„ä¸€ç¯‡æ–‡ç« ,æ¥æºäºŽhttps://www.imsxm.com/jetbrains-license-server.html]]></content>
      <categories>
        <category>webstorm</category>
      </categories>
      <tags>
        <tag>webstorm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[reactæ€æƒ³]]></title>
    <url>%2F2018%2F04%2F26%2Freact%E6%80%9D%E6%83%B3%2F</url>
    <content type="text"><![CDATA[Reactä¸»ä½“æ€æƒ³ Reactçš„ä¸»ä½“æ€æƒ³:æ•°æ®é©±åŠ¨ã€‚å°±æ˜¯åˆ©ç”¨æ•°æ®çš„å˜åŒ–,æ¥å¼•èµ·Viewè§†å›¾çš„å˜åŒ–ã€‚Reactä½¿ç”¨çš„æ˜¯jsx(js + xml)è¯­æ³•å’Œè™šæ‹ŸDOM,è™šæ‹ŸDOMæ˜¯Reactåšçš„ä¸€ä»¶å¾ˆé©æ–°çš„äº‹æƒ…,åœ¨Reactä¹‹å‰,DOMæ“ä½œååˆ†æ˜‚è´µ,å¤§é‡çš„DOMæ“ä½œè€—è´¹äº†webç½‘ç«™å¤§é‡çš„æ—¶é—´,æ€§èƒ½æ¯”è¾ƒä½Žã€‚Reactä½¿ç”¨Javascriptæ¨¡æ‹ŸDOM,æ¥è¿›è¡ŒViewè§†å›¾çš„æ¸²æŸ“,è™šæ‹ŸDOMèŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶,Reacté¦–å…ˆä¼šåˆ©ç”¨diffç®—æ³•å¯¹å‰åŽçš„è™šæ‹ŸDOMæ ‘è¿›è¡Œå¯¹æ¯”,ä¸€æ—¦å‘çŽ°æœ‰æ‰€ä¸åŒ,å°±ä¼šå¼•èµ·è™šæ‹ŸDOMä»Žæ ¹ç»“ç‚¹è¿›è¡Œé‡æ–°åˆ·æ–°,è€Œæµè§ˆå™¨å®žé™…æ“ä½œDOMçš„ä»…ä»…æ˜¯difféƒ¨åˆ†,å°½ç®¡æ¯ä¸€æ¬¡è™šæ‹ŸDOMéƒ½ä¼šä»Žæ ¹ç»“ç‚¹è¿›è¡Œé‡æ–°åˆ·æ–°,ä½†æ˜¯ç”±äºŽæ˜¯å†…å­˜æ•°æ®,æ‰€ä»¥æ€§èƒ½å¾ˆé«˜,è€Œæµè§ˆå™¨å®žé™…æ“ä½œDOMçš„ä»…ä»…æ˜¯diffçš„éƒ¨åˆ†,æ‰€ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜äº†webç½‘ç«™çš„æ€§èƒ½ã€‚]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-26 Javascript 0.1 + 0.2 !== 0.3]]></title>
    <url>%2F2018%2F04%2F26%2Fjavascript-0-1-0-2-0-3%2F</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆ0.1 + 0.2 !== 0.3 Javascriptçš„æµ®ç‚¹æ•°ç±»åž‹ä¸å¤Ÿç²¾ç¡®,åŒç²¾åº¦æµ®ç‚¹æ•°ç±»åž‹çš„äºŒè¿›åˆ¶ä½æ•°åŠ ä¸Šç¬¦å·ä½ä¸º53ä½,ä¹Ÿå°±æ˜¯è¯´0.1çš„äºŒè¿›åˆ¶æ ‘åŠ ä¸Š0.2çš„äºŒè¿›åˆ¶æ•°,è½¬åŒ–ä¸ºåè¿›åˆ¶æ•°ä¸º0.30000000000000004,æ‰€ä»¥0.1 + 0.2 !== 0.3 æ€Žä¹ˆè§£å†³0.1 + 0.2 !== 0.3çš„é—®é¢˜ æœ€å¥½çš„æ–¹æ³•æ˜¯è®¾ç½®ä¸€ä¸ªè¯¯å·®â€æœºå™¨ç²¾åº¦â€çš„èŒƒå›´å€¼,ä¸Ž0.1 + 0.2 - 0.3çš„å€¼è¿›è¡Œæ¯”è¾ƒ,å‡å¦‚ä¸è¶…è¿‡è¿™ä¸ªèŒƒå›´å°±è¿”å›žtrue,å¦‚æžœè¶…è¿‡è¿™ä¸ªèŒƒå›´å°±è¿”å›žfalse,å¯ä»¥åˆ©ç”¨ES6ç»™å¼€å‘è€…æä¾›çš„ä¸€ä¸ªæ–°å±žæ€§EPSILON,è¿™ä¸ªå±žæ€§æ­£å¥½ç­‰äºŽ2^-52,æ— é™æŽ¥è¿‘äºŽ0,ä½†ä¸ç­‰äºŽ0 0.1 + 0.2 - 0.3 &lt; Number.EPSILON ä¹Ÿå¯ä»¥åˆ©ç”¨ä¿ç•™å°æ•°çš„æ–¹å¼è¿›è¡Œè§£å†³,æ¯”å¦‚toFixedå’ŒtoPrecision parseFloat((0.1 + 0.2).toFixed(1)) === 0.3]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-25 reactä¼˜åŒ–]]></title>
    <url>%2F2018%2F04%2F25%2Freact%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[Reactæ€§èƒ½ä¼˜åŒ– ç”±äºŽReactä½¿ç”¨çš„è™šæ‹ŸDOMåœ¨å…¶èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶,Reactä¼šä½¿ç”¨Diffç®—æ³•å¯¹å‰åŽçš„è™šæ‹ŸDOMæ ‘è¿›è¡Œå¯¹æ¯”,ä¸€æ—¦å‘çŽ°ä¸åŒ,è™šæ‹ŸDOMæ ‘å°±ä¼šä»Žæ ¹ç»“ç‚¹è¿›è¡Œé‡æ–°åˆ·æ–°,è€Œæµè§ˆå™¨è¿›è¡Œå®žé™…æ“ä½œDOMçš„ä»…ä»…æ˜¯diffçš„éƒ¨åˆ†,å°½ç®¡æ¯æ¬¡è™šæ‹ŸDOMéƒ½ä¼šä»Žæ ¹ç»“ç‚¹è¿›è¡Œé‡æ–°åˆ·æ–°,ä½†æ˜¯ç”±äºŽjavascriptæ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­,æ‰€ä»¥æ€§èƒ½å¾ˆé«˜,ä½†æ˜¯æ¯ä¸€æ¬¡éƒ½ä¼šä»Žè™šæ‹ŸDOMçš„æ ¹ç»“ç‚¹è¿›è¡Œé‡æ–°åˆ·æ–°,ä¼šé€ æˆä¸€äº›æ— è°“çš„è™šæ‹ŸDOMæ ‘çš„é‡æ–°åˆ·æ–°,æ¯”å¦‚çˆ¶ç»„ä»¶çš„è™šæ‹ŸDOMèŠ‚ç‚¹ä¿®æ”¹å‘ç”Ÿäº†å˜åŒ–,è™šæ‹ŸDOMèŠ‚ç‚¹æ ¹æ®diffç®—æ³•è¿›è¡Œå¯¹æ¯”ä¹‹åŽ,å°±ä¼šä»Žè™šæ‹ŸDOMæ ¹ç»“ç‚¹è¿›è¡Œé‡æ–°åˆ·æ–°,ä½†æ˜¯å…¶å­ç»„ä»¶å¹¶æ²¡æœ‰å‘ç”Ÿè™šæ‹ŸDOMçš„ä¿®æ”¹,è¿™æ˜¯å­ç»„ä»¶ä¹Ÿä¼šè·Ÿç€çˆ¶ç»„ä»¶ä¸€èµ·è¿›è¡Œè™šæ‹ŸDOMæ ‘çš„diffç®—æ³•å¯¹æ¯”å’Œè™šæ‹ŸDOMèŠ‚ç‚¹çš„é‡æ–°åˆ·æ–°,ä¹Ÿè€—è´¹äº†æ¯”è¾ƒå¤šçš„æ—¶é—´ã€‚ä¸ºäº†é¿å…æ— è°“çš„è™šæ‹ŸDOMæ ‘diffç®—æ³•å¯¹æ¯”å’Œè™šæ‹ŸDOMæ ¹ç»“ç‚¹çš„é‡æ–°åˆ·æ–°,Reactç»™å¼€å‘è€…æä¾›äº†shouldComponentUpdateè¿›è¡Œåˆ¤æ–­,shouldComponentUpdateæ˜¯è¿è¡Œåœ¨è™šæ‹ŸDOMæ ‘diffç®—æ³•å¯¹æ¯”å’Œè™šæ‹ŸDOMæ ‘æ ¹ç»“ç‚¹é‡æ–°æ¸²æŸ“ä¹‹å‰çš„,å‡å¦‚è¿”å›žtrueå°±è¯´æ˜Ž,æ•°æ®å‘ç”Ÿäº†å˜åŒ–,éœ€è¦è¿›è¡Œè™šæ‹ŸDOMæ ‘diffç®—æ³•å¯¹æ¯”ä»¥åŠè™šæ‹ŸDOMæ ¹ç»“ç‚¹çš„é‡æ–°åˆ·æ–°,å¦åˆ™å°±è¿”å›žfalse,ä¸æ‰§è¡Œè™šæ‹ŸDOMæ ‘diffç®—æ³•å¯¹æ¯”ä»¥åŠè™šæ‹ŸDOMæ ¹ç»“ç‚¹çš„é‡æ–°åˆ·æ–°ã€‚ é¿å…æ— è°“çš„è™šæ‹ŸDOMæ ‘é‡æ–°åˆ·æ–° å‡å¦‚æœ‰ä¸€ä¸ªç»„ä»¶ä»…ä»…æ¸²æŸ“ä¸€ä¸ªå­—ç¬¦ä¸²,åˆ©ç”¨shouldComponentUpdateè¿›è¡Œåˆ¤æ–­,é¿å…æ— è°“çš„è™šæ‹ŸDOMæ ‘é‡æ–°åˆ·æ–° class TextView extends React.Component{ static propTypes = { value: PropTypes.string.isRequired }; constructor(props){ super(props); this.state = { }; } shouldComponentUpdate(nextProps, nextState){ return this.props.value !== nextProps.value; } render(){ let {value} = this.props; return ( &lt;h1&gt; {value} &lt;/h1&gt; ) } }]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-25 react-router 3.0 browserHistoryé…ç½®]]></title>
    <url>%2F2018%2F04%2F25%2Freact-router-3-0-browserHistory%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆæŽ¨èä½¿ç”¨browserHistory,èˆå¼ƒhashHistory é¦–å…ˆbrowserHistoryä»Žè¡¨çŽ°æ¥çœ‹,æ¯”è¾ƒèˆ’æœå’Œè¯­ä¹‰åŒ–,æ›´æ˜“è¯»ã€‚ browserHistoryä½¿ç”¨çš„æ˜¯HTML5çš„History API,æ ¹æ®è·¯ç”±è·¯å¾„çš„å˜åŒ–å¼•èµ·æµè§ˆå™¨åŽ†å²è®°å½•çš„å˜åŒ–;hashHistoryåˆ™æ˜¯ä¾é hashçš„æ”¹å˜,æ¥ä½¿å¾—æµè§ˆå™¨çš„åŽ†å²è®°å½•å‘ç”Ÿæ”¹å˜ã€‚hashHistoryçš„hashéƒ¨åˆ†ä¸ä¼šè¯·æ±‚åˆ°æœåŠ¡ç«¯,æœåŠ¡ç«¯èŽ·å–ä¸åˆ°URLçš„ç»†èŠ‚éƒ¨åˆ†,è€ŒbrowserHistoryä½¿ç”¨çš„History APIéœ€è¦æœåŠ¡ç«¯çš„æ”¯æŒ,æœåŠ¡ç«¯å¯ä»¥å®Œå…¨çš„æŽŒæ¡URLä¸­çš„ç»†èŠ‚éƒ¨åˆ†ã€‚ æœ‰ä¸€äº›æµè§ˆå™¨ä¼šæŠŠhashHistory URLå½“ä¸­çš„hashéƒ¨åˆ†åˆ é™¤æŽ‰,è®°èµ·ä¹‹å‰è¿›è¡Œåˆ†äº«çš„æ—¶å€™,URLä¼ åˆ°å¾®ä¿¡ä¸­,hashéƒ¨åˆ†é­åˆ°ä¸¢å¤±ã€‚ browserHistoryé…ç½® è·¯ç”±ä¸Šé¢é™¤äº†å¼•å…¥ä¸åŒ,åŸºæœ¬ä¸Šå’ŒhashHistoryé…ç½®ç›¸åŒ import {Router, browserHistory} from &quot;react-router&quot;; &lt;Router history={browserHistory}&gt; &lt;/Router&gt; é…ç½®è·¯å¾„ä¸ºç©ºæ—¶,callbackçš„å¤„ç†,ä½¿ç”¨webpack-dev-serveræ—¶,åœ¨é…ç½®æ–‡ä»¶å†…éƒ¨æ·»åŠ  historyApiFallback: true ä½¿ç”¨nginxæ—¶,åœ¨é…ç½®æ–‡ä»¶å†…éƒ¨æ·»åŠ  location / { root ... index index.html index.htm try_files $uri /index.html }]]></content>
      <categories>
        <category>react-router</category>
      </categories>
      <tags>
        <tag>react-router</tag>
        <tag>browserHistory</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-24 reactåŽŸç†]]></title>
    <url>%2F2018%2F04%2F24%2Freact%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[ReactåŽŸç† Reactçš„ä¸»ä½“æ€æƒ³:æ•°æ®é©±åŠ¨ã€‚Reactæ ¹æ®æ•°æ®çš„å˜åŒ–,ä½¿å¾—Viewè§†å›¾rerender,ä¹Ÿå°±æ˜¯é‡æ–°æ¸²æŸ“ã€‚Reactä½¿ç”¨çš„æ˜¯jsx(js + xml)è¯­æ³•å’Œè™šæ‹ŸDOM,Reactå¼•å…¥è™šæ‹ŸDOM,æ˜¯ä¸€ä»¶å¾ˆé©æ–°çš„äº‹æƒ…,åœ¨Reactä¹‹å‰,DOMæ“ä½œååˆ†æ˜‚è´µ,å¤§é‡çš„DOMæ“ä½œè€—è´¹äº†webç½‘ç«™å¤§é‡çš„æ—¶é—´,æ€§èƒ½æ¯”è¾ƒä½Žã€‚Reactä½¿ç”¨Javascriptæ¨¡æ‹ŸDOM,ä½¿å¾—Viewè¿›è¡Œæ¸²æŸ“,å½“è™šæ‹ŸDOMèŠ‚ç‚¹å‘ç”Ÿä¿®æ”¹æ—¶,Reactä½¿ç”¨diffç®—æ³•è¿›è¡Œæ¯”å¯¹,ä¸€æ—¦å‘çŽ°ä¸åŒ,Reactè™šæ‹ŸDOMå°±ä¼šä»Žæ ¹èŠ‚ç‚¹è¿›è¡Œrerender,è€Œæµè§ˆå™¨å®žé™…çš„DOMæ“ä½œä»…ä»…æ˜¯difféƒ¨åˆ†,å°½ç®¡æ¯æ¬¡çš„è™šæ‹ŸDOMéƒ½æ˜¯ä»Žæ ¹èŠ‚ç‚¹è¿›è¡Œåˆ·æ–°,ä½†ç”±äºŽæ˜¯å†…å­˜æ•°æ®,æ€§èƒ½å¾ˆé«˜,è€Œæµè§ˆå™¨å®žé™…çš„DOMæ“ä½œä»…ä»…æ˜¯difféƒ¨åˆ†,ä»Žè€Œå¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜äº†webç½‘ç«™çš„æ€§èƒ½ã€‚]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018-04-24 hexoæ­å»ºè‡ªå·±çš„åšå®¢]]></title>
    <url>%2F2018%2F04%2F24%2Fhexo%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[gitå»ºåº“ é¦–å…ˆè¦å…ˆå»ºç«‹ä¸€ä¸ªä»¥dreamthen(æˆ‘çš„ç”¨æˆ·å).github.ioç»“å°¾çš„repository,ä½œä¸ºhexoæ‰˜ç®¡ä»£ç çš„åº“,githubé»˜è®¤.github.ioç»“å°¾ä½œä¸ºç”¨æˆ·çš„ç½‘ç«™äºŒçº§åŸŸåã€‚æ‰€ä»¥githubç”¨æˆ·æ­å»ºè‡ªå·±çš„ä¸ªäººç½‘ç«™å¾ˆå®¹æ˜“ã€‚ hexoå®‰è£… é¦–å…ˆè¦ç”¨npmå¤–éƒ¨ä¾èµ–åŒ…ç®¡ç†å·¥å…·å®‰è£…å…¨å±€å‘½ä»¤hexo-cli npm install hexo-cli -g ç„¶åŽä½¿ç”¨hexoåˆå§‹åŒ–åšå®¢æ–‡ä»¶å¤¹,æ¯”å¦‚blogæ–‡ä»¶å¤¹ hexo init blog ä¹‹åŽ,è¿›å…¥ç”Ÿæˆçš„blogæ–‡ä»¶å¤¹,ä¸‹è½½å¤–éƒ¨ä¾èµ–åŒ… npm i/npm install æœ€åŽå¯åŠ¨hexoè‡ªèº«æ­å»ºçš„æœåŠ¡,ç”Ÿæˆæœ¬åœ°çš„åšå®¢ç½‘ç«™,é»˜è®¤ç«¯å£åœ¨æœ¬åœ°ipåœ°å€ä¸‹çš„4000ç«¯å£,å‡å¦‚ä½ ä¸æƒ³å¯åŠ¨åœ¨4000ç«¯å£,ä¹Ÿå¯ä½¿ç”¨-p å…¶ä»–ç«¯å£å·è¿›è¡Œé…ç½®,æ¯”å¦‚-p 9977 hexo server hexo server -p 9977 é»˜è®¤çš„ä¸»é¢˜é£Žæ ¼themeæ˜¯landscape,å‡å¦‚ä½ æƒ³æ›´æ¢,å¯ä»¥é€šè¿‡https://hexo.io/themes/è¿›è¡Œç­›é€‰,ç­›é€‰ä¹‹åŽè¿›è¡Œé…ç½®,ä¸»é¢˜é…ç½®è§ä¸‹æ–‡ hexoé…ç½® hexo gité…ç½® è¦æƒ³éƒ¨ç½²åˆ°è‡ªå·±æ­å»ºçš„ä¸ªäººç½‘ç«™githubåº“é‡Œé¢,é¦–å…ˆè¦ä¸‹è½½hexo-gitæ’ä»¶ npm install hexo-deployer-git --save ç„¶åŽå°±è¦åœ¨ä½ è‡ªå·±çš„æœ¬åœ°hexoåšå®¢çš„é¡¹ç›®é‡Œé¢,æ›´æ”¹æ ¹ç›®å½•åº•ä¸‹çš„_config.ymlæ–‡ä»¶,å…¨å±€æœç´¢git,æ›´æ”¹deployé…ç½® deploy: type: git repo: git@github.com:dreamthen/dreamthen.github.io.git(ä½ çš„ä¸ªäººç½‘ç«™githubåº“çš„é“¾æŽ¥åœ°å€,æœ€å¥½ä½¿ç”¨git:å¼€å¤´çš„,https:å¼€å¤´çš„ä¼šæŠ¥é”™) branch: master(åˆ†æ”¯å) hexo themeä¸»é¢˜é…ç½® ç­›é€‰å¥½è‡ªå·±é€‰ä¸­çš„ä¸»é¢˜ä¹‹åŽ,å°±éœ€è¦åœ¨é¡¹ç›®é‡Œé¢è¿›è¡Œé…ç½®æ›´æ¢ã€‚é¦–å…ˆéœ€è¦ä¸‹è½½è¿œç¨‹githubåº“é‡Œé¢çš„ä¸»é¢˜é¡¹ç›®åˆ°é¡¹ç›®æ ¹ç›®å½•é‡Œé¢çš„themesæ–‡ä»¶å¤¹åº•ä¸‹,æ¯”å¦‚æœ¬äººç”¨çš„æ˜¯nextä¸»é¢˜çš„hexo git clone https://github.com/iissnan/hexo-theme-next.git themes/next éšåŽæ›´æ”¹æ ¹ç›®å½•é‡Œé¢çš„_config.ymlæ–‡ä»¶,å…¨å±€æœç´¢theme,æ›´æ”¹themeé…ç½® theme: next æŽ¥ç€é€‰æ‹©ä¸»é¢˜å±•ç¤ºçš„æ–¹å¼,éœ€è¦åœ¨ä¸»é¢˜çš„é¡¹ç›®ç›®å½•ä¸‹,æ›´æ”¹_config.ymlæ–‡ä»¶,å…¨å±€æœç´¢Scheme,æ›´æ”¹Schemeé…ç½®,æ¯”å¦‚nextä¸»é¢˜åº•ä¸‹çš„Schemeé…ç½® scheme: #scheme: Muse scheme: Mist #scheme: Pisces #scheme: Gemini hexo languageè¯­è¨€é…ç½® æ¯ä¸ªä¸»é¢˜çš„è¯­è¨€éƒ½æ˜¯æ ¹æ®ä½œè€…çš„æ¯è¯­æ¥é…ç½®çš„,è¦æƒ³é…ç½®å¼€å‘è€…è‡ªå·±å›½å®¶çš„è¯­è¨€,è¿˜æ˜¯æ›´æ”¹é¡¹ç›®æ ¹ç›®å½•åº•ä¸‹çš„_config.ymlæ–‡ä»¶,å…¨å±€æœç´¢language,æ›´æ”¹languageé…ç½® language: zh-CN å†æ›´æ”¹ä¸»é¢˜é¡¹ç›®ç›®å½•åº•ä¸‹çš„languageæ–‡ä»¶å¤¹åº•ä¸‹çš„zh-Hans.ymlæ–‡ä»¶,å°†å…¶é‡å‘½åä¸ºzh-CN.yml,å†æ›´æ”¹å…¶ç›®å½•åº•ä¸‹çš„_config.ymlæ–‡ä»¶,å…¨å±€æœç´¢language,æ›´æ”¹languageé…ç½® language: zh-CN hexo page é¡µé¢é…ç½® hexoæä¾›äº†å‡ ä¸ªå¯ä¾›ç­›é€‰çš„é¡µé¢,å¸¸ç”¨çš„æœ‰è¿™ä¹ˆå‡ ä¸ªï¼šhome(é¦–é¡µ)ã€tags(æ ‡ç­¾)ã€about(å…³äºŽæˆ‘)ã€archives(æ¡£æ¡ˆ)å’Œcategories(åˆ†ç±»),é¦–å…ˆè¦åˆ›å»ºé¡µé¢ hexo new page tags hexo new page about hexo new page archives hexo new page categories æŽ¥ç€åœ¨ä¸»é¢˜é¡¹ç›®ç›®å½•ä¸‹,æ›´æ”¹_config.ymlæ–‡ä»¶,å…¨å±€æœç´¢menu,æ›´æ”¹menué…ç½®,å½“ç„¶æ¯ä¸ªä¸»é¢˜çš„é…ç½®ä¸å°½ç›¸åŒ menu: home: / || home about: /about/ || user tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive éšåŽæ›´æ”¹sourceç›®å½•åº•ä¸‹åˆ›å»ºçš„é¡µé¢,ä»¥tagsä¸ºä¾‹ ---------------------------- title: about date: 2018-04-24 17:57:26 type: &quot;tags&quot; comments: false ---------------------------- hexo avatar å¤´åƒé…ç½® é…ç½®è‡ªå·±ä¸ªäººåšå®¢ç½‘ç«™çš„å¤´åƒ,éœ€è¦æ›´æ”¹hexoåšå®¢é¡¹ç›®åº•ä¸‹çš„_config.ymlæ–‡ä»¶,æ·»åŠ avataré…ç½® avatar: https://avatars1.githubusercontent.com/u/13704681?s=400&amp;u=bfc4636397a7c4384f63d4836a33d1797cd2c660&amp;v=4(å¤´åƒurlé“¾æŽ¥) hexo search å…¨ç«™æœç´¢é…ç½® å‡å¦‚æƒ³è¦é…ç½®è‡ªå·±hexoä¸ªäººåšå®¢ç½‘ç«™çš„å…¨ç«™æœç´¢é…ç½®,é¦–å…ˆè¦ä¸‹è½½hexo searchå¤–éƒ¨ä¾èµ–åŒ… npm install hexo-generator-search --save npm install hexo-generator-searchdb --save æ›´æ”¹hexoåšå®¢é¡¹ç›®æ ¹ç›®å½•åº•ä¸‹çš„_config.ymlæ–‡ä»¶,æ·»åŠ searché…ç½® search: path: search.xml field: post format: html limit: 10000 å¼€å¯ä¸»é¢˜é¡¹ç›®ç›®å½•åº•ä¸‹çš„_config.ymlæ–‡ä»¶ä¸­çš„local_searché…ç½® local_search: enable: true hexo new_post_nameé…ç½® å‡å¦‚æƒ³è¦æ›´æ”¹æ¯ä¸€ç¯‡åšå®¢çš„æ–‡ä»¶åç§°,ä¸å†æ˜¯é»˜è®¤çš„:title.mdçš„æ–‡ä»¶å,éœ€è¦æ›´æ”¹hexoåšå®¢é¡¹ç›®æ ¹ç›®å½•åº•ä¸‹çš„_config.ymlæ–‡ä»¶,æ›´æ”¹new_post_nameé…ç½® new_post_name: :year-:month-:day-:title.md hexo auto_excerpté˜…è¯»å…¨æ–‡é…ç½® åšå®¢æ–‡ç« ä¸€èˆ¬éƒ½ä¼šå¾ˆé•¿çš„,æ‰€ä»¥åœ¨é¦–é¡µè¦å¯¹åšå®¢è¿›è¡Œè¶…é•¿æˆªæ–­,è¦æƒ³çœ‹æ‰€æœ‰çš„å†…å®¹,ç‚¹å‡»é˜…è¯»å…¨æ–‡æˆ–è€…æ–‡ç« æ ‡é¢˜è¿›å…¥å…¨æ–‡æŸ¥çœ‹,éœ€è¦æ›´æ”¹ä¸»é¢˜é¡¹ç›®ç›®å½•åº•ä¸‹çš„_config.ymlæ–‡ä»¶,å…¨å±€æœç´¢auto_excerpt,æ›´æ”¹auto_excerpté…ç½® auto_excerpt: enable: true length: 200 hexo å…¶ä»–é…ç½® æ›´æ”¹hexoåšå®¢é¡¹ç›®æ ¹ç›®å½•åº•ä¸‹çš„_config.ymlæ–‡ä»¶,æ›´æ”¹ç½‘ç«™title(æ ‡é¢˜)ã€author(ä½œè€…)ã€keywords(å…³é”®å­—)ã€description(æè¿°)é…ç½®,æ¯”å¦‚æœ¬äººçš„é…ç½® title: yinwk_Gary Blog author: yinwk_Gary keywords: hexo,hexo-cli,hexoåšå®¢,hexoåšå®¢ä¸ªäººç½‘ç«™ description: Gary&apos;s blog,è®°å½•_ä»Žä»Šå¤©å¼€å§‹ è®¾ç½®ä¸ªäººçš„github(githubæ‰˜ç®¡ä»£ç ç½‘å€)ã€google(googleä¸ªäººèµ„æ–™ç½‘å€)ã€gmail(gmailé‚®ç®±ç½‘å€)ã€twitter(twitterä¸ªäººå¾®åšç½‘å€)ç­‰ç­‰,æ¯”å¦‚æœ¬äººçš„é…ç½® social: GitHub: https://github.com/dreamthen || github E-Mail: https://dreamthen.00@gmail.com || envelope Google: https://plus.google.com/u/0/103833130011211353424 || google #hexoå‘½ä»¤ é¦–å…ˆå»ºç«‹ä¸€ç¯‡åä¸ºhexoé…ç½®çš„åšå®¢ hexo new hexoé…ç½® åœ¨hexoåšå®¢é¡¹ç›®sourceç›®å½•åº•ä¸‹çš„_postç›®å½•ä¸‹æ‰¾åˆ°åä¸ºhexoé…ç½®çš„åšå®¢æ–‡ä»¶,åœ¨é‡Œé¢ç”¨markdownè¿›è¡Œè®°å½•è‡ªå·±çš„åšå®¢,å½“ç„¶å¯ä»¥åœ¨hexo serverè‡ªå¸¦çš„æœåŠ¡å™¨è¿è¡Œç›‘å¬çš„æƒ…å†µä¸‹,è¿›è¡Œæ·»åŠ å’Œä¿®æ”¹è‡ªå·±çš„åšå®¢ã€‚ä¹‹åŽï¼Œè¿›è¡Œç”Ÿæˆé™æ€æ–‡ä»¶ hexo generate ç”Ÿæˆé™æ€æ–‡ä»¶ä¹‹åŽ,è¿›è¡Œéƒ¨ç½² hexo deploy ç”Ÿæˆé™æ€æ–‡ä»¶å’Œéƒ¨ç½²å¯ä»¥ä½¿ç”¨ä¸€å¥å‘½ä»¤æ‰§è¡Œ hexo generate -deploy hexo deploy -generate ä¸ºäº†é˜²æ­¢å­˜åœ¨é™æ€æ–‡ä»¶å’Œç¼“å­˜,é€ æˆæ²¡æœ‰é‡æ–°æ¸²æŸ“é¡µé¢çš„é—®é¢˜,åœ¨æ¯ä¸€æ¬¡éƒ¨ç½²ä¹‹å‰,è¦è¿è¡Œä¸€ä¸‹æ¸…ç†é™æ€æ–‡ä»¶å’Œç¼“å­˜çš„å‘½ä»¤ hexo clean hexo generate hexo deploy hexo deployéƒ¨ç½²ä¹‹åŽ,æ ¹æ®hexoåšå®¢é¡¹ç›®æ ¹ç›®å½•åº•ä¸‹_config.ymlé…ç½®æ–‡ä»¶çš„deploy gité…ç½®,ä¼šæäº¤åˆ°è¿œç¨‹github repositoryåº“]]></content>
      <categories>
        <category>hexoåšå®¢æ­å»ºå·¥å…·</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>hexo-cli</tag>
      </tags>
  </entry>
</search>
